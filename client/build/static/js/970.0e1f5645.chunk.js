"use strict";(self.webpackChunkappalti190_client=self.webpackChunkappalti190_client||[]).push([[970],{5970:function(e,n,r){r.r(n),r.d(n,{default:function(){return oe}});var o=r(390),i=r(1846),t=r(4890),a=r(6515),l=r(3738),c=r(3721),s=r(6533),u=r(8020),d=r(3769),f=r(6990),p=r(2951),h=r(7637),m=r(1395),x=r(8282),v=r(2420),g=r(5240),j=r(2559),b=window.innerHeight,Z=b>=window.innerWidth?.64*b:.52*b,k=(0,i.Z)((function(e){return{paragraph:{fontSize:"1.1em"},paragraphSmall:{fontSize:"0.8em"},centered:{display:"flex",justifyContent:"center",alignItems:"center"},justified:{textAlign:"justify"},box:{display:"flex"},boxRight:{justifyContent:"flex-end"},sup:{fontSize:"0.8em"},scrollableContainer:{display:"flex",flexDirection:"column",marginTop:"1em",height:Z},scrollable:{height:"100%",overflowY:"auto",paddingLeft:10,paddingRight:10}}})),y=o.memo((function(e){return(0,j.jsx)("div",{children:e.children})}));y.defaultProps={};var E=o.memo((function(e){var n=k();return(0,j.jsx)("div",{className:n.scrollableContainer,children:(0,j.jsx)("div",{className:n.scrollable,children:e.children})})}));E.defaultProps={};var C=o.memo((function(e){var n=k();return(0,j.jsx)("div",{className:n.centered,children:(0,j.jsx)("h2",{children:e.children})})}));C.defaultProps={};var D=o.memo((function(e){var n=k();return(0,j.jsx)(x.Z,{mb:1,children:(0,j.jsx)(m.Z,{component:"div",className:"".concat(n.paragraph," ").concat(n.justified," ").concat(e.small?n.paragraphSmall:null," ").concat(e.class),children:e.children})})}));D.defaultProps={class:null};var S=o.memo((function(e){var n=k();return(0,j.jsx)(x.Z,{component:"span",m:1,className:"".concat(n.box," ").concat(n.boxRight),children:(0,j.jsx)(v.Z,{variant:"contained",color:"secondary",onClick:e.onNext,disabled:!e.nextIsEnabled,children:e.children})})}));S.defaultProps={};var T=o.memo((function(e){var n=k();return(0,j.jsx)(g.ZP,{title:e.title,placement:"top",children:(0,j.jsx)("sup",{className:n.sup,children:e.anchor})})}));function w(e){var n=(0,c.$)().t,r=(0,o.useState)(!0),i=(0,t.Z)(r,1)[0];return(0,j.jsxs)(y,{children:[(0,j.jsxs)(E,{children:[(0,j.jsx)(C,{children:n("Welcome!")}),(0,j.jsxs)(D,{children:["Questa \xe8 la nostra proposta per adempiere i requisiti della "," ",(0,j.jsx)("a",{href:"https://www.anticorruzione.it/-/adempimenti-legge-190/2012-art.-1-comma-32-7",target:"legge190",children:"Legge 190"}),". Speriamo che sia chiara e semplice da usare."]}),(0,j.jsx)(D,{children:"Questa app ti guider\xe0 passo passo nei pochi passi che occorrono per completare l'adempimento con successo."}),(0,j.jsxs)(D,{children:["Per iniziare dovrai scaricare un modello Excel",(0,j.jsx)(T,{title:"Pu\xf2 essere in formato MicroSoft-Excel, oppure in formato ODS, come preferisci."}),", che contiene delle regole per guidarti nella compilazione, e minimizzare i possibili errori formali."]}),(0,j.jsx)(D,{children:"Poi dovrai inserire, uno per riga, tutti i beni o servizi che la tua struttura ha appaltato nell'anno in corso."}),(0,j.jsx)(D,{children:"Alla fine dell'anno, in genere entro la fine di Gennaio dell'anno successivo, sar\xe0 sufficiente caricare qui il foglio Excel compilato."}),(0,j.jsx)(D,{children:"A questo punto il nostro sistema effettur\xe0 il controllo formale dei dati inseriti. Nel caso che venga segnalato qualche anomalia dovrai correggere i problemi segnalati sul tuo file Excel, e poi ri-caricarlo."}),(0,j.jsx)(D,{children:"Dopodich\xe8 potrai scaricare il documento XML prodotto, che andr\xe0 pubblicato sul sito cui fa riferimento la tua struttura."}),(0,j.jsx)(D,{children:"A questo punto avrai praticamente completato l'adempimento. Se vorrai potrai controllare - sempre su questo sito - l'esito della verifica da parte dell'ANAC."}),(0,j.jsx)(D,{children:'Tieni presente che siamo sempre disponibili a risponderti per qualsiasi dubbio o incertezza. Le modalit\xe0 di assistenza sono diverse, dal supporto telefonico a quello per email, e dipendono anche dal piano scelto. I riferimenti sono presenti nel menu in alto a sinistra, in "Supporto".'})]}),(0,j.jsx)(S,{onNext:function(){e.goto("next")},nextIsEnabled:i,children:"".concat(n("Start"))})]})}T.defaultProps={anchor:"*"},w.defaultProps={};var N=o.memo(w),z=r(2600),P=r.n(z);function O(e){var n=(0,c.$)().t,r=(0,o.useState)(!1),i=(0,t.Z)(r,2),a=i[0],l=i[1];return(0,j.jsxs)(y,{children:[(0,j.jsxs)(E,{children:[(0,j.jsx)(C,{children:n("Download")}),(0,j.jsx)(D,{children:"Scarica il modello Excel in cui potrai inserire i dati degli appalti, uno per riga."}),(0,j.jsx)(D,{children:(0,j.jsxs)(v.Z,{onClick:function(){var e=document.createElement("a");e.download=P().data.templateDownloadName,e.href=P().data.templateDownloadLink,e.click(),l(!0)},variant:"contained",color:"primary",children:[n("Download")," \u2b07"]})}),(0,j.jsx)("br",{}),(0,j.jsxs)(D,{small:!0,children:[(0,j.jsx)("input",{type:"checkbox"}),"Clicca qui se preferisci la versione ODS (Open Document Format), nel caso che tu utilizzi LibreOffice anzich\xe9 Microsoft Office."]})]}),(0,j.jsx)(S,{onNext:function(){e.goto("next")},nextIsEnabled:a,children:"".concat(n("Continue"))})]})}O.defaultProps={};var A=o.memo(O),F=(0,i.Z)((function(e){return{xul:{padding:15}}}));function L(e){var n=F(),r=(0,c.$)().t,i=(0,o.useState)(!0),a=(0,t.Z)(i,1)[0];return(0,j.jsxs)(y,{children:[(0,j.jsxs)(E,{children:[(0,j.jsx)(C,{children:r("Fill your data")}),(0,j.jsx)(D,{children:"Adesso puoi aprire il modello scaricato con il tuo programma di gestione fogli di lavoro."}),(0,j.jsxs)(D,{children:['Sono presenti 2 fogli: "METADATI" ed "ELENCO GARE". Ti consigliamo di iniziare dal primo foglio, "METADATI", ed inserire i 4 dati generali richiesti:',(0,j.jsxs)("ul",{className:n.ul,children:[(0,j.jsxs)("li",{children:[(0,j.jsx)("i",{children:"codiceFiscaleStrutturaProponente"})," il codice fiscale della tua struttura"]}),(0,j.jsxs)("li",{children:[(0,j.jsx)("i",{children:"denominazioneStrutturaProponente"})," la ragione sociale della tua struttura"]}),(0,j.jsxs)("li",{children:[(0,j.jsx)("i",{children:"annoRiferimento"})," l'anno di riferimento per cui inserirai gli appalti"]}),(0,j.jsxs)("li",{children:[(0,j.jsx)("i",{children:"urlFile"})," l'indirizzo URL dove sar\xe0 pubblicato il documento finale"]})]})]}),(0,j.jsx)(D,{children:'A questo punto puoi passare al secondo foglio, "ELENCO GARE". Occorre inserire ogni apaplto (o "gara"), uno per riga.'}),(0,j.jsxs)(D,{children:["I campi da compilare sono:",(0,j.jsxs)("ul",{className:n.ul,children:[(0,j.jsxs)("li",{children:[(0,j.jsx)("i",{children:"CIG"})," il Codice Identificativo Gara"]}),"... TODO: documentare tutti gli altri campi..."]})]})]}),(0,j.jsx)(S,{onNext:function(){e.goto("next")},nextIsEnabled:a,children:"".concat(r("Continue"))})]})}L.defaultProps={};var I=o.memo(L),X=r(3032),q=r(4322),R=r.n(q);var G=r(5892),$=(0,i.Z)((function(e){return{fileDropLabel:{display:"inline-block",textAlign:"center",width:"100%",border:"3px black dashed",padding:"3em 1.78em",cursor:"pointer",backgroundColor:"#f0f0f0"},fileDropError:{display:"inline-block",fontSize:"1.0em",fontStyle:"italic",fontWeight:"bold",color:"darkred",marginTop:"1em"}}}));function M(e){var n=$(),r=(0,c.$)().t,i=(0,o.useContext)(G.o),a=i.service,l=i.setService,s=(0,o.useState)(!1),u=(0,t.Z)(s,2),d=u[0],f=u[1],p=(0,o.useState)(null),h=(0,t.Z)(p,2),m=h[0],x=h[1],g=function(){var e=(0,o.useState)(!1),n=(0,t.Z)(e,2),r=n[0],i=n[1],a=(0,o.useState)(null),l=(0,t.Z)(a,2),c=l[0],s=l[1];return{dragOver:r,setDragOver:i,onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy",i(!0)},onDragLeave:function(e){i(!1)},fileDropError:c,setFileDropError:s}}(),b=g.dragOver,Z=g.setDragOver,k=g.onDragOver,T=g.onDragLeave,w=g.fileDropError,N=g.setFileDropError,z=function(e){if(Z(!1),e){var n=P(e);n?(N(n),x(null),f(!1)):(N(null),x(e),f(!0))}else N(r("No file selected, sorry... Please, repeat...")),x(null),f(!1)},P=function(e){var n,o,i,t;return null!==e&&void 0!==e&&null!==(n=e.type)&&void 0!==n&&null!==(o=n.split("/")[1])&&void 0!==o&&o.match("officedocument.spreadsheetml.sheet")||null!==e&&void 0!==e&&null!==(i=e.type)&&void 0!==i&&null!==(t=i.split("/")[1])&&void 0!==t&&t.match("ms-excel")?null:r("Please upload a spreadsheet")+"."+(null===e||void 0===e?void 0:e.type)?" "+r("Selected file looks like {{fileType}}",{fileType:e.type}):""},O=function(){var e=(0,X.Z)(R().mark((function e(){var n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",m),e.next=4,fetch("/api/service/upload",{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){console.log("Upload success, file path",e.file),console.log("TTTTT pre, service:",a),l({file:e.file}),console.log("TTTTT2, service:",a),setTimeout((function(){console.log("TT3:",a)}),1e3)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var n=(0,X.Z)(R().mark((function n(){return R().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,O();case 2:console.log("GOT NEXT, service",a),e.goto("next");case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,j.jsxs)(y,{children:[(0,j.jsxs)(E,{children:[(0,j.jsx)(C,{children:r("Upload")}),(0,j.jsx)(D,{children:"Carica il foglio Excel compilato:"}),(0,j.jsxs)("div",{className:"container",children:[(0,j.jsxs)("form",{children:[(0,j.jsx)("label",{htmlFor:"file",onDragOver:k,onDragLeave:T,onDrop:function(e){var n;e.preventDefault();var r=null===e||void 0===e||null===(n=e.dataTransfer)||void 0===n?void 0:n.files[0];z(r)},style:{backgroundColor:"".concat(b?"#ffdd00":"")},className:n.fileDropLabel,children:(0,j.jsx)("span",{style:{color:"".concat(b?"black":"#444")},children:r("Drop the file here or click to select from disk")})}),(0,j.jsx)("input",{type:"file",name:"file",id:"file",onChange:function(e){var n;e.preventDefault();var r=null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.files[0];z(r)},style:{display:"none"}})]}),w&&(0,j.jsx)("div",{className:n.fileDropError,children:w}),(0,j.jsx)("br",{}),(0,j.jsxs)(D,{children:[m&&r("File caricato: ".concat(m.name)),(0,j.jsx)("br",{}),m&&(0,j.jsx)(v.Z,{variant:"contained",size:"small",color:"default",onClick:function(e){x(null),document.getElementById("file").value="",N(""),f(!1),Z(!1)},title:r("Remove file"),children:" \ud83d\uddd1 "})]})]})]}),(0,j.jsx)(S,{onNext:A,nextIsEnabled:d,children:"".concat(r("Continue"))})]})}M.defaultProps={};var U=o.memo(M),W=r(4100),B=r(2368);function H(e){var n=(0,c.$)().t,r=(0,o.useContext)(G.o),i=r.service,l=r.setService,s=(0,o.useState)({}),u=(0,t.Z)(s,2),d=u[0],f=u[1],p=(0,o.useState)(!1),h=(0,t.Z)(p,2),m=h[0],x=h[1];(0,o.useEffect)((function(){e.value===e.index&&(f({loading:!0}),console.log("transformXls2Xml service:",i),(0,B.$8)({file:i.file}).then((function(e){if(!e.ok)return W.A.error(n(e.message)),void f({error:e.message});console.log("transformXls2Xml success:",e),l((0,a.Z)((0,a.Z)({},i),{},{transform:e})),f({success:e}),x(!0)})))}),[e,n,l]);return(0,j.jsxs)(y,{children:[(0,j.jsxs)(E,{children:[(0,j.jsx)(C,{children:n("Check")}),(0,j.jsxs)(D,{children:[d&&"loading"in d&&"Elaborazione in corso...",d&&"error"in d&&"Errore: ".concat(d.error),d&&"success"in d&&"Elaborazione completata"]})]}),(0,j.jsx)(S,{onNext:function(){e.goto("next")},nextIsEnabled:m,children:"".concat(n("Continue"))})]})}H.defaultProps={};var Q=o.memo(H),_=["children","value","index"];function Y(e){var n=e.children,r=e.value,o=e.index,i=(0,l.Z)(e,_);return(0,j.jsx)(m.Z,(0,a.Z)((0,a.Z)({component:"div",role:"tabpanel",hidden:r!==o,id:"scrollable-auto-tabpanel-".concat(o),"aria-labelledby":"nav-tab-".concat(o)},i),{},{children:(0,j.jsx)(x.Z,{p:3,children:n})}))}var J=function(e){return{id:"nav-tab-".concat(e),"aria-controls":"nav-tabpanel-".concat(e)}},K=(0,s.Z)((function(e){return{root:{opacity:.8}}}))((function(e){return(0,j.jsx)(h.Z,(0,a.Z)({},e))})),V=(0,u.Z)((function(e){return{root:{flexGrow:1},tabs:{"& .MuiTabs-indicator":{backgroundColor:"orange"}}}})),ee=function(){var e=V(),n=(0,c.$)().t,r=o.useState(0),i=(0,t.Z)(r,2),l=i[0],s=i[1];function u(e){var n=e;if("string"===typeof e)switch(e.toLowerCase()){case"start":case"download":case"fill your data":case"upload":case"check":case"wait for validation":case"finish!":break;case"next":n=l+1;break;case"prev":n=l-1;break;default:return void console.error("Unforeseen where specification in goto: ".concat(e))}s(n)}return(0,j.jsxs)("div",{className:e.root,children:[(0,j.jsx)(d.Z,{position:"fixed",elevation:0,style:{top:50},children:(0,j.jsx)(f.Z,{elevation:0,square:!0,children:(0,j.jsxs)(p.Z,{value:l,indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",onChange:function(e,n){console.log("handleChangeTab id:",n),s(n)},"aria-label":"disabled tabs example",children:[(0,j.jsx)(K,(0,a.Z)({label:"".concat(n("Start")," \ud83e\ude84")},J(0))),(0,j.jsx)(K,(0,a.Z)({label:"".concat(n("Download")," \u2b07")},J(1))),(0,j.jsx)(K,(0,a.Z)({label:"".concat(n("Fill your data")," \ud83d\udd8b")},J(2))),(0,j.jsx)(K,(0,a.Z)({label:"".concat(n("Upload")," \u2b06")},J(3))),(0,j.jsx)(K,(0,a.Z)({label:"".concat(n("Check")," \u2714")},J(4))),(0,j.jsx)(K,(0,a.Z)({label:"".concat(n("Wait for validation")," \ud83c\udfaf")},J(5))),(0,j.jsx)(K,(0,a.Z)({label:"".concat(n("Finish!")," \ud83c\udfc1")},J(6)))]})})}),(0,j.jsx)(Y,{value:l,index:0,children:(0,j.jsx)(N,{goto:function(e){return u(e)}})}),(0,j.jsx)(Y,{value:l,index:1,children:(0,j.jsx)(A,{goto:function(e){return u(e)}})}),(0,j.jsx)(Y,{value:l,index:2,children:(0,j.jsx)(I,{goto:function(e){return u(e)}})}),(0,j.jsx)(Y,{value:l,index:3,children:(0,j.jsx)(U,{goto:function(e){return u(e)}})}),(0,j.jsx)(Y,{value:l,index:4,children:(0,j.jsx)(Q,{value:l,index:4,goto:function(e){return u(e)}})}),(0,j.jsx)(Y,{value:l,index:5,children:"attendi la validazione da parte dell'ANAC..."}),(0,j.jsx)(Y,{value:l,index:6,children:"Finito!"})]})},ne=(0,i.Z)((function(e){return{home:{fontSize:"1.5em"}}}));function re(){var e=ne();return(0,j.jsx)("div",{className:e.home,children:(0,j.jsx)(ee,{})})}var oe=o.memo(re)},2368:function(e,n,r){r.d(n,{$8:function(){return u},Rf:function(){return a},gF:function(){return l},kk:function(){return s},vG:function(){return c},zB:function(){return t}});var o=r(6515),i=r(2441),t=function(e){return i.Z.post("/auth/login",e).then((function(e){return(0,o.Z)({ok:!0},e.data)})).catch((function(e){return(0,o.Z)({ok:!1},e.response.data)}))},a=function(e){return i.Z.post("/user",e).then((function(e){return(0,o.Z)({ok:!0},e.data)})).catch((function(e){return(0,o.Z)({ok:!1},e.response.data)}))},l=function(e){return console.log("FETCH forgotPassword /auth/recover - params:",e),i.Z.post("/auth/recover",e).then((function(e){return(0,o.Z)({ok:!0},e.data)})).catch((function(e){return console.error("ERR:",e),(0,o.Z)({ok:!1},e.response.data)}))},c=function(e){return console.log("FETCH forgotPasswordSubmit /auth/reset - params:",e),i.Z.post("/auth/reset",e).then((function(e){return(0,o.Z)({ok:!0},e.data)})).catch((function(e){return(0,o.Z)({ok:!1},e.response.data)}))},s=function(e){return i.Z.post("/auth/resend",e).then((function(e){return(0,o.Z)({ok:!0},e.data)})).catch((function(e){return(0,o.Z)({ok:!1},e.response.data)}))},u=function(e){return console.log("transformXls2Xml params:",e),i.Z.post("/service/transformXls2Xml/filePath",{filePath:e.file.path}).then((function(e){return console.log("transformXls2Xml response:",e),(0,o.Z)({ok:!0},e.data)})).catch((function(e){return console.warn("err.message",e.message,e.reason),{ok:!1,message:e.message}}))}}}]);
//# sourceMappingURL=970.0e1f5645.chunk.js.map