{"version":3,"sources":["components/TabsComponents.js","hooks/useWindowSize.js","components/FlexibleDialog.js","services/JobService.js","components/Tab01Start.js","components/Tab02DownloadTemplate.js","components/Tab03FillData.js","components/DragNDrop.js","components/Tab04Upload.js","components/Tab05Produce.js","components/Tab06DownloadDataset.js","components/Tab07Publish.js","components/Tab08Validation.js","components/Tab09Finished.js","components/TabsPanel.js","components/Home.js"],"names":["useStyles","makeStyles","theme","paragraph","fontSize","paragraphSmall","centered","display","justifyContent","alignItems","justified","textAlign","box","boxLeft","boxRight","sup","scrollableContainer","flexDirection","marginTop","minHeight","scrollable","height","overflowY","paddingLeft","paddingRight","attention","backgroundColor","palette","main","color","fontWeight","TabContainer","React","memo","props","children","defaultProps","TabBodyScrollable","classes","size","useState","width","window","innerWidth","innerHeight","windowSize","setWindowSize","useEffect","handleResize","addEventListener","removeEventListener","useWindowSize","className","style","margin","Math","max","TabTitle","TabParagraph","Box","mb","Typography","component","small","class","TabResetButton","m","reset","Button","variant","title","onClick","disabled","isDisabled","TabPrevButton","onPrev","prevIsEnabled","TabNextButton","onNext","nextIsEnabled","TabTooltip","Tooltip","placement","anchor","FlexibleDialog","contentText","actions","onBackdropClick","onClose","event","reason","map","action","index","callback","closeModal","autoFocus","textTransform","text","get","a","TokenService","getUser","api","JobService","set","job","put","upload","file","formData","FormData","append","post","headers","transformXls2Xml","filePath","validateXml","transform","outcomeCheck","anno","codiceFiscaleAmministrazione","outcomeFailureDetails","urlExistenceAndMatch","url","fileToMatch","console","log","getPlans","Tab01Start","t","useTranslation","href","target","goto","Tab02DownloadTemplate","history","useHistory","downloadTemplate","setNextIsEnabled","showModal","useModal","userIsAuthenticated","AuthService","getCurrentUser","openDialog","tabId","push","downloadLocalUrl","config","data","templateDownloadUrl","setJob","template","downloaded","Grid","container","item","xs","ul","paddingHorizontal","Tab03FillData","baseStyle","flex","padding","borderWidth","borderRadius","borderColor","borderStyle","outline","transition","focusedStyle","acceptStyle","rejectStyle","disabledStyle","fontStyle","DragNDrop","drop","accept","useDropzone","onDrop","getRootProps","isFocused","isDragAccept","isDragReject","isDragActive","useMemo","getRootPropsDisabled","onBlur","onDragEnter","onDragLeave","onDragOver","onFocus","onKeyDown","getRootPropsActual","Tab04Upload","userIsAuthenticatedCallback","useCallback","fileSet","fileReset","fileValidate","type","split","match","fileType","fileUpload","then","result","error","errorMessage","toast","fileSelect","selectedFile","acceptedFiles","originalname","_fontSize","accordionRoot","_height","_padding","_margin","danger","dark","Tab05Produce","user","statusLocal","setStatusLocal","info","setInfo","results","setResults","code","truncatedDueToPlanLimit","planUpgradeDeclined","planName","plan","name","cigCount","planRequired","tabValue","cigNumberAllowed","loading","state","path","response","message","success","massageTransformationResults","errorsFromResults","length","massageValidateXmlResults","massageInfo","s","warnings","warning","header","content","concat","errors","pattern","shift","replace","metadati","titolo","abstract","dataPubblicazioneDataset","dataUltimoAggiornamentoDataset","entePubblicatore","annoRiferimento","urlFile","rownum","importoAggiudicazioneTotale","currency","default","importoSommeLiquidateTotale","warningsFromResults","filter","row","align","cigs","outputFile","sx","maxHeight","spacing","direction","justify","Card","CardContent","Object","keys","key","Accordion","disableGutters","root","AccordionSummary","expandIcon","id","AccordionDetails","borderTop","paddingTop","Tab06DownloadDataset","downloadDataset","outputUrl","downloadRemoteUrl","Tab07Publish","undefined","forceVerifyPublished","setForceVerifyPublished","publishUrlFile","datasetIsPublished","Error","published","datasetIsPublishedAsIs","publishedAsIs","outcome","Tab08Validation","esitoUltimoTentativoAccessoUrl","forceCheckValidated","setForceCheckValidated","codiceFiscaleStrutturaProponente","tentativiAccessoUrlLast","tentativiAccessoUrl","listaAccessoRisorsaLast","listaAccessoRisorsa","marginLeft","dataUltimoTentativoAccessoUrl","dateToLocaleDate","esitoComunicazione","codice","descrizione","dettaglio","esito","xmlValido","dettaglioValidazioneXml","esitoAccessoRisorsa","Tab09Finished","appTitle","year","TabPanel","value","other","role","hidden","p","a11yProps","StyledTab","withStyles","opacity","Tab","flexGrow","tab","secondary","light","tabIndicator","TabsPanel","getJob","changeTab","where","toLowerCase","redirect","remove","AppBar","elevation","position","top","Paper","square","Tabs","scrollButtons","onChange","ui","userCanForceTabChange","indicator","label","home","Home"],"mappings":"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","file":"static/js/16.af414b54.chunk.js","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@mui/styles\";\nimport Typography from \"@mui/material/Typography\";\nimport Box from \"@mui/material/Box\";\nimport Button from \"@mui/material/Button\";\nimport Tooltip from \"@mui/material/Tooltip\";\nimport useWindowSize from \"../hooks/useWindowSize\";\n\n// const height = window.innerHeight;\n// const width = window.innerWidth;\n// const heightScrollable = (\n//   (height >= width) ?\n//     //height - (height *.12) - (height *.12) - (height *.12) // portrait\n//     height * .64 // portrait\n//   :\n//     //height - (height *.16) - (height *.16) - (height*.16) // landscape\n//     height * .52 // landscape\n//   );\n\n//console.log(\"height, width, heightScrollable:\", height, width, heightScrollable);\nconst useStyles = makeStyles(theme => ({\n\tparagraph: {\n    fontSize: \"1.1em\",\n\t},\n\tparagraphSmall: {\n    fontSize: \"0.8em\",\n\t},\n  centered: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  justified: {\n    textAlign: \"justify\",\n  },\n  box: {\n    display: \"flex\",\n  },\n  boxLeft: {\n    justifyContent: \"flex-start\",\n  },\n  boxRight: {\n    justifyContent: \"flex-end\",\n  },\n  sup: {\n    fontSize: \"0.8em\",\n  },\n  scrollableContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginTop: \"1em\",\n    minHeight: \"5em\",\n    //maxHeight: heightScrollable,\n  },\n  scrollable: {\n    height: \"100%\",\n    overflowY: \"auto\",\n    paddingLeft: 10,\n    paddingRight: 10,\n    minHeight: \"3em\",\n  },\n  attention: {\n    backgroundColor: theme.palette.attention.main,\n    color: \"white\",\n    fontWeight: \"bold\",\n  }\n}));\n\nconst TabContainer = React.memo(props => {\n  return (\n    <div>\n      {props.children}\n    </div>\n  );\n});\nTabContainer.propTypes = {\n};\nTabContainer.defaultProps = {\n};\n\nconst TabBodyScrollable = React.memo(props => {\n  const classes = useStyles();\n\n  /**\n   * Note: here we assume fixed sections height...\n   * this is a bad hack to have a scrollable body\n   * and avoid a scrollable container for any\n   * window height and consistent after a resize\n   */\n  const toolbarHeight = 90; // toolbar height\n  const tabbarHeight = 100; // tabbbar height\n  const footerHeight = 90; // footer height (TODO: put this in config.ui. ... ?)\n  const size = useWindowSize();\n\n  return (\n    <div className={classes.scrollableContainer}>\n      <div className={classes.scrollable} style={{margin: \"auto\", width: \"90%\", height: Math.max(120, size.height - toolbarHeight - tabbarHeight - /*titleHeight - */footerHeight)}}>\n        {props.children}\n      </div>\n    </div>\n  );\n});\nTabBodyScrollable.propTypes = {\n};\nTabBodyScrollable.defaultProps = {\n};\n\nconst TabTitle = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <div className={classes.centered}>\n      <h2>{props.children}</h2>\n    </div>\n  );\n});\nTabTitle.propTypes = {\n};\nTabTitle.defaultProps = {\n};\n\nconst TabParagraph = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Box mb={1}>\n      <Typography component=\"div\" className={`${classes.paragraph} ${classes.justified} ${props.small ? classes.paragraphSmall : null} ${props.class}`}>\n        {props.children}\n      </Typography>\n    </Box>\n  );\n});\nTabParagraph.propTypes = {\n  class: PropTypes.string,\n};\nTabParagraph.defaultProps = {\n  class: null,\n};\n\nconst TabResetButton = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Box\n      component=\"span\"\n      m={1} // margin\n      className={`${classes.reset}`}\n    >\n      <Button\n        variant=\"contained\"\n        title={props.title}\n        color=\"attention\"\n        className={classes.attention}\n        onClick={props.onClick}\n        disabled={props.isDisabled}\n      >\n        {props.children}\n      </Button>\n    </Box>\n  );\n});\nTabResetButton.propTypes = {\n  title: PropTypes.string,\n  onClick: PropTypes.func.isRequired,\n};\nTabResetButton.defaultProps = {\n  isDisabled: false,\n};\n\nconst TabPrevButton = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Box\n      component=\"span\"\n      m={1} // margin\n      className={`${classes.box} ${classes.boxLeft}`}\n    >\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={props.onPrev}\n        disabled={!props.prevIsEnabled}\n      >\n        {props.children}\n      </Button>\n    </Box>\n  );\n});\nTabPrevButton.propTypes = {\n  onPrev: PropTypes.func.isRequired,\n  prevIsEnabled: PropTypes.bool.isRequired,\n};\nTabPrevButton.defaultProps = {\n};\n\nconst TabNextButton = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Box\n      component=\"span\"\n      m={1} // margin\n      className={`${classes.box} ${classes.boxRight}`}\n    >\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={props.onNext}\n        disabled={!props.nextIsEnabled}\n      >\n        {props.children}\n      </Button>\n    </Box>\n  );\n});\nTabNextButton.propTypes = {\n  onNext: PropTypes.func.isRequired,\n  nextIsEnabled: PropTypes.bool.isRequired,\n};\nTabNextButton.defaultProps = {\n};\n\nconst TabTooltip = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Tooltip\n      title={props.title}\n      placement=\"top\"\n    >\n      <sup className={classes.sup}>{props.anchor}</sup>\n    </Tooltip>\n  );\n});\nTabTooltip.propTypes = {\n  title: PropTypes.string.isRequired,\n  anchor: PropTypes.string,\n};\nTabTooltip.defaultProps = {\n  anchor: \"*\",\n};\n\nexport {TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabResetButton, TabPrevButton, TabNextButton, TabTooltip};\n","import { useState, useEffect } from \"react\";\n\nexport default function useWindowSize() {\n  const [windowSize, setWindowSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n  useEffect(() => {\n    function handleResize() {\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n      //console.log(\"useWindowSize - height:\", window.innerHeight);\n    }\n    window.addEventListener(\"resize\", handleResize);\n    handleResize();\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n  return windowSize;\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@mui/material/Button\";\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions } from '@mui/material';\n\nconst FlexibleDialog = ({ title, contentText, actions, ...props }) => (\n  <Dialog\n    {...props}\n    onBackdropClick={() => {} /* disable modal close on backdrop click */}\n    //disableScrollLock={false}\n    //disableEnforceFocus={false}\n    aria-labelledby={title}\n    onClose={(event, reason) => { /* console.log(\"REASON:\", reason); */ }}\n  >\n    <DialogTitle>{title}</DialogTitle>\n    <DialogContent>\n      <DialogContentText>{contentText}</DialogContentText>\n    </DialogContent>\n    <DialogActions>\n      {actions.map((action, index) => (\n        <Button\n          key={index}\n          onClick={() => {\n            if (action.callback) action.callback();\n            if (action.closeModal) props.onClose();\n          }}\n          variant={action.variant === \"primary\" ? \"contained\" : action.variant === \"secondary\" ? \"outlined\" : \"contained\"}\n          autoFocus={props}\n          style={{textTransform: \"none\"}} // do not uppercase button text\n        >\n          {action.text}\n        </Button>\n      ))}\n    </DialogActions>\n  </Dialog>\n);\n\nFlexibleDialog.propTypes = {\n  title: PropTypes.string,\n  contentText: PropTypes.string,\n  actions: PropTypes.arrayOf(\n    PropTypes.shape({\n      text: PropTypes.string,\n      closeModal: PropTypes.bool,\n      callback: PropTypes.func,\n      variant: PropTypes.oneOf([\n        \"primary\", \"secondary\",\n      ]),\n      autoFocus: PropTypes.bool,\n    })\n  ),\n};\n\nFlexibleDialog.defaultProps = {\n  title: \"\",\n  contentText: \"\",\n  actions: [\n    {\n      text: \"Ok\",\n      closeModal: true,\n      callback: () => {},\n      variant: \"primary\",\n      autoFocus: false,\n    }\n  ],\n};\n\nexport default React.memo(FlexibleDialog);","import api from \"./API\";\nimport TokenService from \"./TokenService\";\n\n// get job status\nconst get = async () => {\n  // const user = TokenService.getUser();\n  // if (!user) {\n  //   return null;\n  // }\n  // return api.get(\"/job/get\", {\n  //   userId: user._id,\n  // });\n\n  //const retval = await api.get(\"/job/get\");\n\n  const user = TokenService.getUser();\n  if (!user) {\n    return null;\n  }\n  return await api.get(\"/job/get\");\n};\n\n// set job status\nconst set = (job) => {\n  const user = TokenService.getUser();\n  if (!user) {\n    return null;\n  }\n\n  return api.put(\"/job/set\", {job});\n};\n\n// upload a file\nconst upload = (file) => {\n  const formData = new FormData();\n  formData.append(\"file\", file);\n  \n  return api.post(\"/job/upload\", formData, {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n    }\n  });\n};\n\n// transform XLS to XML\nconst transformXls2Xml = (filePath) => {\n  return api.post(\"/job/transformXls2Xml/:filePath\", {\n    filePath,\n  });\n}\n\n// validate XML syntax\nconst validateXml = (transform) => {\n  return api.post(\"/job/validateXml/:transform\", {\n    transform,\n  });\n  // const retval = api.post(\"/job/validateXml/:transform\", {\n  //   transform,\n  // });\n  // console.log(\"****************** validateXml retval:\", retval);\n  // return retval;\n}\n\n// check ANAC periodic verification outcome\nconst outcomeCheck = (anno, codiceFiscaleAmministrazione) => {\n  return api.post(\"/job/outcomeCheck/:anno/:codiceFiscaleAmministrazione\",\n    {\n      anno,\n      codiceFiscaleAmministrazione,\n    }\n  );\n}\n\n// get ANAC periodic verification failed outcome details\nconst outcomeFailureDetails = (anno, codiceFiscaleAmministrazione) => {\n  return api.post(\n    \"/job/outcomeFailureDetails/anno/codiceFiscaleAmministrazione\",\n    {\n      anno,\n      codiceFiscaleAmministrazione,\n    }\n  );\n}\n\n// check url existence\nconst urlExistenceAndMatch = (url, fileToMatch) => {\nconsole.log(\"*** jobService - url,fileToMatch:\", url, fileToMatch);\n  return api.post(\n    \"/job/urlExistenceAndMatch/url/fileToMatch\",\n    {\n      url,\n      fileToMatch,\n    }\n  );\n}\n\n// // just to ignore big xml when debug printing...\n// const sanitizeJob = (job) => {\n//   if (!job?.transform?.xml) {\n//     return job;\n//   }\n//   let j = job;\n//   j.transform.xml = \"…\";\n//   return j;\n// }\n\n// get ANAC periodic verification failed outcome details\nconst getPlans = () => {\n  return api.get(\n    \"/job/getPlans\",\n  );\n}\n\nconst JobService = {\n  get,\n  set,\n  upload,\n  transformXls2Xml,\n  validateXml,\n  outcomeCheck,\n  outcomeFailureDetails,\n  urlExistenceAndMatch,\n  //sanitizeJob,\n  getPlans,\n};\n\nexport default JobService;\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabNextButton, TabTooltip } from \"./TabsComponents\";\n\nfunction Tab01Start(props) {\n  const { t } = useTranslation();\n  const [ nextIsEnabled ] = useState(true);\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Welcome!\")}\n        </TabTitle>\n        <TabParagraph>\n          {t(\"This is our proposal to fulfill the requirements of the\")} {\" \"}\n          <a href=\"https://www.anticorruzione.it/-/adempimenti-legge-190/2012-art.-1-comma-32-7\" target=\"legge190\">\n            {t(\"Legge 190\")}\n          </a>\n          {\".\"} {t(\"We hope it is clear and simple to use\")}.\n          </TabParagraph>\n        <TabParagraph>\n          {t(\"This app will walk you through the few steps you need to complete the fulfillment successfully\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"To get started you'll need to download an Excel template\")}\n          <TabTooltip\n            title={t(\"It can be in MicroSoft-Excel format, or in ODS format\") + \".\"}\n          >\n          </TabTooltip>\n          {\",\"} {t(\"which contains rules to guide you in the compilation, and minimize possible formal errors\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"Then you will have to enter, one per line, all the goods or services that your structure has contracted out in the current year\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"At the end of the year, generally by the end of January of the following year, it will be sufficient to upload the filled Excel sheet here\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"At this point our system will carry out the formal check of the entered data\")}.\n          {t(\"In the event that some anomaly is reported, you will have to correct the reported anomalies in the Excel file, and then re-upload it\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"You will then be able to download the XML document produced, which will be published on the site your structure refers to\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"At this point you will have practically completed the fulfillment\")}.\n          {t(\"If you want, you can check - again on this site - the outcome of the verification by the ANAC\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"Please note that we are always available to answer you for any doubts or uncertainties\")}.\n          {t(\"The assistance methods are different, from telephone support to email support, and also depend on the plan chosen\")}.\n          {t(\"References can be found in the menu under \\\"Support\\\"\")}.\n        </TabParagraph>\n      </TabBodyScrollable>\n\n      <div>\n        <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n          {t(\"Continue\")}\n        </TabNextButton>\n      </div>\n    </TabContainer>\n  );\n}\nTab01Start.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab01Start.defaultProps = {\n};\n\nexport default React.memo(Tab01Start);\n","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { useModal } from \"mui-modal-provider\";\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport AuthService from \"../services/AuthService\";\nimport TokenService from \"../services/TokenService\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport FlexibleDialog from \"./FlexibleDialog\";\nimport config from \"../config\";\nimport { downloadLocalUrl } from \"../libs/Misc\";\n\n\n\nfunction Tab02DownloadTemplate(props) {\n  const { t } = useTranslation();\n  const history = useHistory();\n  const [ prevIsEnabled, ] = useState(true);\n  //const [ nextIsEnabled, setNextIsEnabled ] = useState(() => props.job?.template?.downloaded ? props.job?.template?.downloaded : false);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(() => !!(props.job?.downloadTemplate));\n\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  const userIsAuthenticated = () => {\n    if (!AuthService.getCurrentUser()) { // user is not authenticated\n      openDialog({\n        title: t(\"Please log in or register\"),\n        contentText: t(\"You need to be authenticated to proceed\"),\n        actions: [\n          {\n            text: t(\"Login\"),\n            closeModal: true,\n            autoFocus: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signin\");\n            },\n          },\n          {\n            text: t(\"Register\"),\n            closeModal: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signup\");\n            },\n          },\n          {\n            text: t(\"Cancel\"),\n            closeModal: true,\n            callback: () => props.goto(\"prev\"),\n          }\n        ],\n      });\n      return false;\n    }\n    return true;\n  }\n\n  const onDownload = () => {\n    if (userIsAuthenticated()) {\n      downloadLocalUrl(config.data.templateDownloadUrl);\n      setNextIsEnabled(true);\n      props.setJob({...props.job, downloadTemplate: true, template: {...props.job?.template, downloaded: true}});\n    }\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Download\")}\n        </TabTitle>\n        <TabParagraph>\n          Scarica il modello Excel in cui potrai inserire i dati degli appalti, uno per riga.\n        </TabParagraph>\n        <TabParagraph>\n          <Button onClick={onDownload} variant=\"contained\" color=\"tertiary\">\n            {t(\"Download\")} ⬇\n          </Button>\n        </TabParagraph>\n        {/* <br />\n        <TabParagraph small>\n          <input type=\"checkbox\"></input>\n          Clicca qui se preferisci la versione ODS (Open Document Format),\n          nel caso che tu utilizzi LibreOffice anziché Microsoft Office.\n        </TabParagraph> */}\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab02DownloadTemplate.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab02DownloadTemplate.defaultProps = {\n};\n\nexport default React.memo(Tab02DownloadTemplate);\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@mui/styles\";\nimport Grid from \"@mui/material/Grid\";\nimport { useTranslation } from \"react-i18next\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\n\nconst useStyles = makeStyles(theme => ({\n  ul: {\n    paddingHorizontal: 25,\n  }\n}));\n\nfunction Tab03FillData(props) {\n  const classes = useStyles();\n  //const { auth } = useContext(AuthContext);\n  const { t } = useTranslation();\n  const [ prevIsEnabled ] = useState(true);\n  const [ nextIsEnabled ] = useState(true);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Fill your data\")}\n        </TabTitle>\n        <TabParagraph>\n          {t(\"Now you can open the downloaded template with your spreadsheet program\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"There are 2 sheets: \\\"METADATI\\\" and \\\"ELENCO GARE\\\"\")}.\n          <br />\n          {t(\"We advise you to start from the first sheet, \\\"METADATI\\\", and enter the 4 general data required:\")}\n          <ul className={classes.ul}>\n            <li><i>{\"codiceFiscaleStrutturaProponente\"}</i> {t(\"the tax code of your company\")}</li>\n            <li><i>{\"denominazioneStrutturaProponente\"}</i> {t(\"the business name of your company\")}</li>\n            <li><i>{\"annoRiferimento\"}</i> {t(\"the reference year for which you will enter contracts\")}</li>\n            <li><i>{\"urlFile\"}</i> {t(\"the URL address where the final document will be published\")}</li>\n          </ul>\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"At this point you can move on to the second sheet, \\\"ELENCO GARE\\\"\")}.<br />\n          {t(\"Each contract (or \\\"tender\\\") must be entered, one per line\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"The fields to fill in are:\")}\n          <ul className={classes.ul}>\n            <li><i>{\"CIG\"}</i> {t(\"the Tender Identification Code: a unique code that identifies each tender\")}</li>\n            <li><i>{\"OGGETTO\"}</i> {t(\"the object of the tender\")}</li>\n            <li><i>{\"SCELTA CONTRAENTE\"}</i> {t(\"the type of contractor; it must be chosen from a predefined list, available in the sheet\")}</li>\n            <li><i>{\"PARTECIPANTI / AGGREGATO o SINGOLO\"}</i> {t(\"the type of participant: aggregate (A) or individual (S)\")}</li>\n            <li><i>{\"PARTECIPANTI / COD. FISCALE o ID. ESTERO\"}</i> {t(\"the participant's tax code (or foreign ID if not Italian)\")}</li>\n            <li><i>{\"PARTECIPANTI / RAGIONE SOCIALE\"}</i> {t(\"the partecipant's business name\")}</li>\n            <li><i>{\"PARTECIPANTI / RUOLO\"}</i> {t(\"the role of the participant; it must be chosen from a predefined list, available in the sheet\")}</li>\n            <li><i>{\"AGGIUDICATARI\"}</i> {t(\"indicates whether the participant(s) are awarded the contract (S), or not (empty)\")}</li>\n            <li><i>{\"IMPORTO AGGIUDICAZIONE\"}</i> {t(\"the contract award amount\")}</li>\n            <li><i>{\"DATA INIZIO\"}</i> {t(\"the date of the award of the contract\")}</li>\n            <li><i>{\"DATA ULTIMAZIONE\"}</i> {t(\"the date of completion of the contract\")}</li>\n            <li><i>{\"IMPORTO DELLE SOMME LIQUIDATE\"}</i> {t(\"the amount of the liquidated amount\")}</li>\n          </ul>\n        </TabParagraph>\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab03FillData.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab03FillData.defaultProps = {\n};\n\nexport default React.memo(Tab03FillData);\n","import React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { useDropzone } from \"react-dropzone\";\n\nconst baseStyle = {\n  flex: 1,\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\",\n  padding: \"20px\",\n  borderWidth: 2,\n  borderRadius: 10,\n  borderColor: \"#64a36f\",\n  borderStyle: \"dashed\",\n  backgroundColor: \"#cef0b9\",\n  color: \"#353535\",\n  outline: \"none\",\n  transition: \"border .24s ease-in-out\",\n};\n\nconst focusedStyle = {\n  backgroundColor: \"#d3f6d1\",\n  borderColor: \"#a7d7c5\",\n};\n\nconst acceptStyle = {\n  backgroundColor: \"lightgreen\",\n  borderColor: \"darkgreen\",\n};\n\nconst rejectStyle = {\n  backgroundColor: \"lightred\",\n  borderColor: \"darkred\",\n};\n\nconst disabledStyle = {\n  backgroundColor: \"lightgray\",\n  borderColor: \"darkgray\",\n  fontStyle: \"italic\",\n};\n\nconst DragNDrop = ({ drop, accept, disabled }) => {\n  const { t } = useTranslation();\n  const {\n    getRootProps,\n    isFocused,\n    isDragAccept,\n    isDragReject,\n    isDragActive\n  } = useDropzone({\n    onDrop: drop,\n    accept: accept,\n  });\n\n  const style = useMemo(() => ({\n    ...baseStyle,\n    ...(disabled ? disabledStyle : isFocused ? focusedStyle : {}),\n    ...(disabled ? disabledStyle : isDragAccept ? acceptStyle : {}),\n    ...(disabled ? disabledStyle : isDragReject ? rejectStyle : {})\n  }), [\n    isFocused,\n    isDragAccept,\n    isDragReject,\n    disabled,\n  ]);\n\n  const {onClick, onBlur, onDragEnter, onDragLeave, onDragOver, onDrop, onFocus, onKeyDown, ...getRootPropsDisabled} = getRootProps({style});\n  let getRootPropsActual = {};\n  if (disabled) {\n    getRootPropsActual = getRootPropsDisabled;\n  } else {\n    getRootPropsActual = getRootProps({style});\n  } \n\n  return (\n    <div className=\"dropzone-div\" {...getRootPropsActual}>\n      <div className=\"text-center\">\n        {\n          disabled ? (\n            <p>\n              {t(\"Remove file to load a new one\")}\n            </p>\n          ) :\n          isDragActive ? (\n            <p className=\"dropzone-content\">\n              {t(\"Release to drop the files here\")}\n            </p>\n          ) : (\n            <p className=\"dropzone-content\">\n              {t(\"Drag 'n drop some files here, or click to select files\")}\n            </p>\n          )\n        }\n      </div>\n    </div>\n  );\n};\n\nDragNDrop.propTypes = {\n  drop: PropTypes.func.isRequired,\n  accept: PropTypes.array.isRequired,\n  disabled: PropTypes.bool,\n};\nDragNDrop.defaultProps = {\n  disabled: false,\n};\n\nexport default DragNDrop;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@mui/material/Grid\";\nimport { useModal } from \"mui-modal-provider\";\nimport AuthService from \"../services/AuthService\";\nimport JobService from \"../services/JobService\";\nimport TokenService from \"../services/TokenService\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabResetButton, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport { errorMessage } from \"../libs/Misc\";\nimport { toast } from \"./Toast\";\nimport DragNDrop from \"./DragNDrop\";\nimport FlexibleDialog from \"./FlexibleDialog\";\n\n\n\nfunction Tab04Upload(props) {\n  //const classes = useStyles();\n  const { t } = useTranslation();\n  const history = useHistory();\n  const [ prevIsEnabled ] = useState(true);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(!!props?.job?.file);\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  const [ accept ] = useState([\n    \".csv\",\n    \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n    \"application/vnd.ms-excel\",\n  ]);\n\n  const userIsAuthenticated = () => {\n    if (!AuthService.getCurrentUser()) { // user is not authenticated\n      openDialog({\n        title: t(\"Please log in or register\"),\n        contentText: t(\"You need to be authenticated to proceed\"),\n        actions: [\n          {\n            text: t(\"Login\"),\n            closeModal: true,\n            autoFocus: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signin\");\n            },\n          },\n          {\n            text: t(\"Register\"),\n            closeModal: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signup\");\n            },\n          },\n          {\n            text: t(\"Cancel\"),\n            closeModal: true,\n            callback: () => props.goto(\"prev\"),\n          }\n        ],\n      });\n      return false;\n    }\n    return true;\n  };\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  const userIsAuthenticatedCallback = useCallback(() => { return userIsAuthenticated() }, []);\n  \n  useEffect(() => {\n    userIsAuthenticatedCallback(); // check if user is authenticated\n  }, [userIsAuthenticatedCallback]);\n\n  const fileSet = useCallback(async(file) => {\n    props.setJob({...props.job, file});\n  }, [props]);\n\n  const fileReset = useCallback(async() => {\n    /**\n     * When file is reset, we clear the full job! (we only keep tabId)\n     */\n    let job = {};\n    job.tabId = props.job.tabId;\n    //job.file = null;\n    props.setJob(job);\n    setNextIsEnabled(false);\n  }, [props]);\n\n  const fileValidate = useCallback((file) => { // validate file type or name\n    // ods: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\n    // xls: application/vnd.ms-excel\n    if (!( // TODO: check if these tests are sufficiently general...\n      file?.type?.split(\"/\")[1]?.match(\"officedocument.spreadsheetml.sheet\") || //* TODO: ignore case... */\n      file?.type?.split(\"/\")[1]?.match(\"ms-excel\")\n    )) {\n      return t(\"Please upload a spreadsheet\") + `.` +\n        (file?.type ? ` ` + t(\"Selected file looks like {{fileType}}\", { fileType: file.type }) : \"\")\n      ;\n    }\n    return null; // validated\n  }, [t]);\n\n  const fileUpload = useCallback(async(file) => {\n    await JobService.upload(file).then(\n      result => {\n        console.log('Upload success, file path', result.data.file);\n        fileSet(result.data.file);\n        //props.setJob({...props.job, file: result.data.file});\n        // TODO: possibly save current job as historical record\n      },\n      error => {\n        console.error('Upload error:', error);\n        fileReset();\n        props.setJob({...props.job, file: {error: errorMessage(error)}}) // set upload error in job.file.error\n        toast.error(errorMessage(error));\n        return;\n      }\n    );\n  }, [props, fileSet, fileReset]);\n\n  const fileSelect = useCallback(async(selectedFile) => {\n    if (selectedFile) {\n      const error = fileValidate(selectedFile);\n      if (error) {\n        //setFile(null);\n        props.setJob({...props.job, file: null});\n        //fileSet(null);\n        setNextIsEnabled(false);\n      } else {\n        //setFile(selectedFile);\n        //fileSet(selectedFile);\n        props.setJob({...props.job, file: selectedFile});\n        await fileUpload(selectedFile);\n        setNextIsEnabled(true);\n      }\n    } else {\n      toast.error(t(\"No file selected, sorry... Please, repeat...\"));\n      //setFile(null);\n      //fileSet(null);\n      props.setJob({...props.job, file: null});\n      setNextIsEnabled(false);\n    }\n  }, [/*fileSet, */props, fileUpload, fileValidate, t]);\n\n  // on drop callback\n  const onDrop = useCallback(acceptedFiles => {\n    // this callback will be called after files get dropped, we will get the acceptedFiles;\n    // if needed, we can even access the rejected files too\n    console.log(\"accepted files:\", acceptedFiles);\n    fileSelect(acceptedFiles[0]);\n  }, [fileSelect]);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = async () => {\n    props.goto(\"next\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Upload\")}\n        </TabTitle>\n        <TabParagraph>\n          {t(\"Load filled spreadsheet\")}\n        </TabParagraph>\n\n        <div className=\"container\">\n          <DragNDrop\n            drop={onDrop}\n            accept={accept}\n            disabled={!!props?.job?.file?.originalname}\n          />\n          <br />\n          <TabParagraph>\n            {props?.job?.file?.originalname && (\n              <>\n                {t(\"Selected file\")}: <b>{props?.job?.file?.originalname}</b>\n                &emsp;\n                <TabResetButton\n                  onClick={fileReset}\n                  title={t(\"Remove uploaded file, and restart the whole process\")}>\n                  {t(\"Remove\")} 🗑\n                </TabResetButton>\n              </>\n            )}\n            </TabParagraph>\n        </div>\n\n      </TabBodyScrollable>\n\n      {/* <pre>\n        JOB: {JSON.stringify(props.job, null, 2)}\n      </pre> */}\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\n\nTab04Upload.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab04Upload.defaultProps = {\n};\n\nexport default React.memo(Tab04Upload);","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useHistory } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { useModal } from \"mui-modal-provider\";\nimport { makeStyles } from \"@mui/styles\";\nimport Grid from \"@mui/material/Grid\";\nimport Accordion from \"@mui/material/Accordion\";\nimport AccordionSummary from \"@mui/material/AccordionSummary\";\nimport AccordionDetails from \"@mui/material/AccordionDetails\";\nimport Card from \"@mui/material/Card\";\nimport CardContent from '@mui/material/CardContent';\nimport Typography from \"@mui/material/Typography\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport TokenService from \"../services/TokenService\";\nimport JobService from \"../services/JobService\";\nimport FlexibleDialog from \"./FlexibleDialog\";\nimport config from \"../config\";\n\nconst useStyles = makeStyles(theme => ({\n  '& .MuiTypography-root': {\n    _fontSize: \"0.5em\",\n  },\n  accordionRoot: {\n    _height: \"4em\",\n    _padding: 0,\n    _margin: 0,\n    fontSize: \"0.9em\",\n  },\n  danger: {\n    color: theme.palette.error.dark,\n    fontWeight: \"bold\",\n  }\n}));\n//const useStyles = makeStyles((theme) => (styles(theme)));\n\n\nfunction Tab05Produce(props) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const history = useHistory();\n  const user = TokenService.getUser();\n  const [ statusLocal, setStatusLocal ] = useState({});\n  const [ info, setInfo ] = useState([]);\n  const [ results, setResults ] = useState({});\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(props.job?.transform?.code === \"OK\");\n  const [ prevIsEnabled] = useState(true);\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  useEffect(() => {\n    if (props.job?.transform) {\n      if (props.job?.transform?.truncatedDueToPlanLimit) {\n        if (!props.job?.transform?.planUpgradeDeclined) { // TODO: when will we reset this flag?\n          openDialog({\n            title: t(\"Please upgrade your plan\"),\n            contentText: \n              t(\"You need to upgrade your plan to proceed.\") + \"\\n\" +\n              t(\"Your current plan is \\\"{{planName}}\\\".\", { planName: user?.plan?.name}) + \"\\n\" +\n              t(\"To elaborate {{cigCount}} CIGs you need at least plan \\\"{{planName}}\\\"\", { cigCount: props.job?.transform?.cigCount, planName: props.job?.transform?.planRequired?.name }),\n            actions: [\n              {\n                text: t(\"Upgrade plan\"),\n                closeModal: true,\n                autoFocus: true,\n                callback: () => {\n                  TokenService.set(\"redirect\", props.tabId);\n                  history.push(\"/profile\", { tabValue: 1 }); // redirect to /profile route, to second tab, where plan can be changed\n                },\n              },\n              {\n                text: t(\"Proceed with the first {{cigNumberAllowed}} CIGs\", { cigNumberAllowed: user?.plan?.cigNumberAllowed }),\n                closeModal: true,\n                callback: () => {\n                  props.setJob({...props.job, transform: {...props.job?.transform, planUpgradeDeclined: true}});\n                },\n              },\n            ],\n          });\n        }\n      }\n    }\n  /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job?.transform]);\n\n  useEffect(() => {\n    if (props.job.file && !props.job.transform) {\n      (async () => {\n        setStatusLocal({...statusLocal, loading: \"transform\"});\n        setStatusLocal(state => ({...state, loading: \"transform\" }));\n        await JobService.transformXls2Xml(props.job.file.path).then(\n          response => {\nconsole.log(\"JobService.transformXls2Xml response:\", response);\n            setStatusLocal(state => ({...state, loading: null }));\n            if (response.data.result.code !== \"OK\") {\n              props.setJob({...props.job, transform: response.data.result});\n              return setStatusLocal(state => ({...state, error: response.data.result.message }));\n            }\n            props.setJob({...props.job, transform: response.data.result});\n            setStatusLocal(state => ({...state, success: \"transform\" }));\n            massageTransformationResults(response.data.result);\n            setNextIsEnabled(errorsFromResults().length === 0);\n          },\n          error => {\nconsole.log(\"JobService.transformXls2Xml error:\", error);\n            props.setJob({...props.job, transform: error});\n            return setResults(state => ({...state, error}));\n          },\n        );\n      })();\n    }\n    /* eslint-disable react-hooks/exhaustive-deps */\n  }, []);\n\n  useEffect(() => {\n    if (props.job?.file && props.job?.transform && (props.job?.transform?.code === \"OK\") && !props.job?.validateXml) {\n      (async () => {\n        setStatusLocal(state => ({...state, loading: \"validateXml\"}));\n        await JobService.validateXml(props.job.transform).then(\n          response => {\n            setStatusLocal(state => ({...state, loading: null }));\n            if (response.data.result.code !== \"OK\") {\n              props.setJob({...props.job, validateXml: response.data.result});\n              return setStatusLocal(state => ({...state, error: response.data.result.message }));\n            }\n            props.setJob({...props.job, validateXml: response?.data.result});\n            setStatusLocal(state => ({...state, success: \"validateXml\"}));\n            massageValidateXmlResults(response?.data.result);\n          },\n          error => {\n            props.setJob({...props.job, validateXml: error});\n            return setResults(state => ({...state, error}));\n          },\n        );\n      })();\n    }\n    /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job.transform]);\n\n\n  useEffect(() => {\n    if (props.job.validateXml) {\n      massageInfo();\n    }\n  }, [props.job]);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  const massageTransformationResults = (transform) => {\n    // massage warnings/errors from transformation\n    const s = results ?? {};\n    s.results = s.results ? s.results : [];\n\n    // transformation warnings preparation\n    if (transform?.warnings?.length) {\n      let results = transform?.warnings.map((warning, index) => {\n        let type = \"TRANSFORM_WARNING\";\n        let header = `${t(\"transformation warning\")} ${index + 1}`;\n        let content = warning;\n        return { type, header, content };\n      });\n      s.results = s.results.concat(results);\n    }\n\n    // transformation errors preparation\n    if (transform?.errors?.length) {\n      let results = transform?.errors.map((error, index) => {\n        let type = \"TRANSFORM_ERRPR\";\n        let header = `${t(\"transformation error\")} ${index + 1}`;\n        let content = error;\n        return { type, header, content };\n      });\n      s.results = s.results.concat(results);\n    }\n    setResults(state => ({...state, results: s.results}));\n  }\n\n  const massageValidateXmlResults = (validateXml) => {\n    // massage warnings/errors from xml validation\n    const s = results ?? {};\n    s.results = s.results ? s.results : [];\n\n    if (validateXml?.message) {\n      let results = validateXml.message.split(\"\\n\");\n      let pattern = /^\\t\\[([^\\]]+)\\]\\s*([^:]*):\\s*(.*)$/;\n      results.shift(); // first line is a title\n      results = results.map(result => {\n        let type = \"VALIDATE_XML_ERROR\";\n        let header = `xml validation ${result.replace(pattern, \"$1\")}: ${result.replace(pattern, \"$2\")}`;\n        let content = result.replace(pattern, \"$3\");\n        return { type, header, content };\n      });\n      s.results = s.results.concat(results);\n    }\n    setResults(state => ({...state, results: s.results}));\n  }\n\n  const massageInfo = () => { // info preparation\n    let info = [];\n    if (props.job?.file) info[t(\"Original file name\")] = props.job.file.originalname;\n    if (props.job?.transform?.metadati?.titolo) info[t(\"Title\")] = props.job.transform.metadati.titolo;\n    if (props.job?.transform?.metadati?.abstract) info[t(\"Abstract\")] = props.job.transform.metadati.abstract;\n    if (props.job?.transform?.metadati?.dataPubblicazioneDataset) info[t(\"Dataset publish date\")] = props.job.transform.metadati.dataPubblicazioneDataset;\n    if (props.job?.transform?.metadati?.dataUltimoAggiornamentoDataset) info[t(\"Dateset last update date\")] = props.job.transform.metadati.dataUltimoAggiornamentoDataset;\n    if (props.job?.transform?.metadati?.entePubblicatore) info[t(\"Publishing body\")] = props.job.transform.metadati.entePubblicatore;\n    if (props.job?.transform?.metadati?.annoRiferimento) info[t(\"Reference year\")] = props.job.transform.metadati.annoRiferimento;\n    if (props.job?.transform?.metadati?.urlFile) info[t(\"Url file\")] = props.job.transform.metadati.urlFile;\n    if (props.job?.transform?.rownum) info[t(\"Number of source rows\")] = props.job.transform.rownum;\n    if (props.job?.transform?.cigCount) info[t(\"Number of CIGs\")] = props.job.transform?.cigCount\n    if (props.job?.transform?.importoAggiudicazioneTotale) info[t(\"Total award amount\")] = `${config.currency.default} ${props.job.transform.importoAggiudicazioneTotale}`;\n    if (props.job?.transform?.importoSommeLiquidateTotale) info[t(\"Total liquidated amount\")] = `${config.currency.default} ${props.job.transform.importoSommeLiquidateTotale}`;\n      setInfo(info);\n  }\n\n  const warningsFromResults = () => {\n    return results.results?.filter((row) => row.type === \"TRANSFORM_WARNING\" || row.type === \"VALIDATE_XML_WARNING\") ?? [];\n  }\n\n  const errorsFromResults = () => {\n    return results.results?.filter((row) => row.type === \"TRANSFORM_ERROR\" || row.type === \"VALIDATE_XML_ERROR\") ?? [];\n  }\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Produce XML dataset\")}\n        </TabTitle>\n        <TabParagraph>\n          {statusLocal && \"loading\" in statusLocal && statusLocal.loading === \"transform\" && `🟡 ${t(\"Transforming XLS to XML...\")}`}\n          {statusLocal && \"loading\" in statusLocal && statusLocal.loading === \"validateXml\" && `🟡 ${t(\"Validating...\")}`}\n          {statusLocal && \"error\" in statusLocal && `🔴 ${t(\"Errors in validation\")}: ${statusLocal.error}`}\n          {/* {statusLocal && \"success\" in statusLocal && statusLocal.success === \"validateXml\" && `🟢 ${t(\"Validation completed\")}`} */}\n        </TabParagraph>\n\n        {props.job?.transform?.truncatedDueToPlanLimit && (\n          <TabParagraph>\n            <Typography align=\"center\" className={classes.danger}>{t(\"Warning\")}: {t(\"The produced dataset has been truncated to {{cigs}} CIGs; you can proceed and downoad it, but file is not to be published\", {cigs: user?.plan?.cigNumberAllowed})}.</Typography>\n            <br />\n          </TabParagraph>\n        )}\n\n        {props.job?.transform?.outputFile && (\n          <Grid\n            container\n            sx={{ overflowY: \"auto\", maxHeight: \"300\" }}\n            spacing={0}\n            direction=\"column\"\n            alignItems=\"center\"\n            justify=\"center\"\n          >\n            <Grid item>\n              <Card sx={{backgroundColor: \"#eee\"}}>\n                <CardContent>\n                  {Object.keys(info).map((key, index) => (\n                    <Typography sx={{fontSize: \".8em\" }} color=\"text.secondary\" key={index}>{key}: {info[key]}</Typography>\n                  ))}\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n        )}\n\n        {(props.job?.transform?.outputFile &&\n          errorsFromResults().length === 0 &&\n          warningsFromResults().length === 0) && (\n          <Typography>🟢 {t(\"Validation completed successfully\")}</Typography>\n        )}\n\n        {(errorsFromResults().length > 0) && (\n          <div style={{color: \"darkred\"}}>\n            <TabParagraph>\n              <Accordion disableGutters={true} classes={{ root: classes.accordionRoot }} style={{color:\"darkred\"}}>\n                <AccordionSummary\n                  expandIcon={<ExpandMoreIcon />}\n                  aria-controls={`panel-error-content`}\n                  id={`panel-error-header`}\n                >\n                  <Typography>🔴 {`${errorsFromResults().length} ${t(\"errors\")}`}</Typography>\n                </AccordionSummary>\n                <AccordionDetails>\n                  <Typography>\n                  {errorsFromResults().map((error, index) => (\n                    <div key={index} style={{borderTop: \"1px solid #ddd\", paddingTop: 5}}>\n                      {1 + index}) {error.type}: {error.content}\n                    </div>\n                  ))}\n                  </Typography>\n                </AccordionDetails>\n              </Accordion>\n            </TabParagraph>\n          </div>\n        )}\n\n        {(warningsFromResults().length > 0) && (\n          <div style={{color: \"darkorange\"}}>\n            <TabParagraph>\n              <Accordion disableGutters={true} classes={{ root: classes.accordionRoot }} style={{color: \"orange\"}}>\n                <AccordionSummary\n                  expandIcon={<ExpandMoreIcon />}\n                  aria-controls={`panel-warning-content`}\n                  id={`panel-warning-header`}\n                >\n                  <Typography>🟠 {`${warningsFromResults().length} ${t(\"warnings\")}`}</Typography>\n                </AccordionSummary>\n                <AccordionDetails>\n                  <Typography>\n                  {warningsFromResults().map((error, index) => (\n                    <div key={index} style={{borderTop: \"1px solid #ddd\", paddingTop: 5}}>\n                      {1 + index}) {error.type}: {error.content}\n                    </div>\n                  ))}\n                  </Typography>\n                </AccordionDetails>\n              </Accordion>\n            </TabParagraph>\n          </div>\n        )}\n\n      </TabBodyScrollable>\n\n      {/* <pre>\n        JOB: {JSON.stringify(props.job, null, 2)}\n      </pre> */}\n\n      <Grid container className={classes.root}>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\n\nTab05Produce.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab05Produce.defaultProps = {\n};\n\nexport default React.memo(Tab05Produce);\n","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { useModal } from \"mui-modal-provider\";\nimport { makeStyles } from \"@mui/styles\";\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport Typography from \"@mui/material/Typography\";\nimport AuthService from \"../services/AuthService\";\nimport TokenService from \"../services/TokenService\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport { downloadRemoteUrl } from \"../libs/Misc\";\nimport FlexibleDialog from \"./FlexibleDialog\";\n\n\n\nconst useStyles = makeStyles(theme => ({\n  danger: {\n    color: theme.palette.error.dark,\n    fontWeight: \"bold\",\n  }\n}));\n\nfunction Tab06DownloadDataset(props) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const history = useHistory();\n  const user = TokenService.getUser();\n  const [ prevIsEnabled, ] = useState(true);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(() => !!(props.job?.downloadDataset && !props.job?.transform?.truncatedDueToPlanLimit));\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  const userIsAuthenticated = () => {\n    if (!AuthService.getCurrentUser()) { // user is not authenticated\n      openDialog({\n        title: t(\"Please log in or register\"),\n        contentText: t(\"You need to be authenticated to proceed\"),\n        actions: [\n          {\n            text: t(\"Login\"),\n            closeModal: true,\n            autoFocus: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signin\");\n            },\n          },\n          {\n            text: t(\"Register\"),\n            closeModal: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signup\");\n            },\n          },\n          {\n            text: t(\"Cancel\"),\n            closeModal: true,\n            callback: () => props.goto(\"prev\"),\n          }\n        ],\n      });\n      return false;\n    }\n    return true;\n  }\n\n  const onDownloadDataset = () => {\n    if (userIsAuthenticated()) {\n      //let url = config.service.endpoint + \"marco/dataset-2022.xml\";\n      let url = props.job.transform.outputUrl;\nconsole.log(\"job:\", props.job);\nconsole.log(\"url:\", url);\n      downloadRemoteUrl(url);\n      setNextIsEnabled(!props.job?.transform?.truncatedDueToPlanLimit);\n      props.setJob({...props.job, downloadDataset: true});\n    }\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Download produced dataset\")}\n        </TabTitle>\n\n        {props.job?.transform?.truncatedDueToPlanLimit && (\n          <TabParagraph>\n            <Typography align=\"center\" className={classes.danger}>{t(\"Warning\")}: {t(\"The produced dataset has been truncated to {{cigs}} CIGs; you can proceed and downoad it, but file is not to be published\", {cigs: user?.plan?.cigNumberAllowed})}.</Typography>\n            <br />\n          </TabParagraph>\n        )}\n\n        {props.job?.transform?.outputFile && (\n          <>\n            <TabParagraph>\n                {t(\"Download dataset\")}.\n            </TabParagraph>\n            <TabParagraph>\n              <Button onClick={onDownloadDataset} variant=\"contained\" color=\"tertiary\">\n                {t(\"Download\")} ⤵\n              </Button>\n            </TabParagraph>\n          </>\n        )}\n\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\n\nTab06DownloadDataset.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab06DownloadDataset.defaultProps = {\n};\n\nexport default React.memo(Tab06DownloadDataset);\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport { toast } from \"./Toast\";\nimport { errorMessage } from \"../libs/Misc\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport JobService from \"../services/JobService\";\n\n\n\nfunction Tab07Publish(props) {\n  const { t } = useTranslation();\n  const [ statusLocal, setStatusLocal ] = useState({});\n  const [ prevIsEnabled, ] = useState(true);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(() => props.job?.downloadDataset !== undefined ? props.job.downloadDataset : false);\n  const [ forceVerifyPublished, setForceVerifyPublished ] = useState(false);\n  const publishUrlFile = props.job?.transform?.metadati?.urlFile;\n  const fileToMatch = props.job?.transform?.outputFile;\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  async function onVerifyPublished() {\n    setForceVerifyPublished(true);\n  };\n\n  useEffect(() => {\n    if (props.job && props.job.transform) {\n      if (!props.job?.datasetIsPublished || forceVerifyPublished) {\n      (async () => {\n        setStatusLocal({loading: true});\n        setForceVerifyPublished(false);\n        await JobService.urlExistenceAndMatch(publishUrlFile, fileToMatch).then(\n          result => {\n            if (result instanceof Error) {\n              toast.error(errorMessage(result));\n              return setStatusLocal({loading: false, error: errorMessage(result)});\n            }\n            props.setJob({...props.job, datasetIsPublished: result.data.published, datasetIsPublishedAsIs: result.data.publishedAsIs});\n            setStatusLocal({loading: false, success: true});\nconsole.log(\"+++ result?.data:\", result?.data)\n            setNextIsEnabled(result?.data?.published && result?.data?.publishedAsIs);\n          },\n          error => {\n            toast.error(errorMessage(error));\n            props.setJob({...props.job, outcome: error.response.data.message});\n            return setStatusLocal({ error: errorMessage(error)});\n          }\n        );\n      })();\n    }\n  }\n  /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job.transform, props.job.outcome, forceVerifyPublished]);\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Publish downloaded dataset\")}\n        </TabTitle>\n        {props.job?.transform?.outputFile && (\n          <>\n            <TabParagraph>\n              {(statusLocal.loading) && (\n                `${t(\"Checking\")}...`\n              )}\n              {!(statusLocal.loading) && (!props.job.datasetIsPublished ) && (\n                `🔴 ${t(`Dataset is not published yet at address {{publishUrlFile}}`, {publishUrlFile})}`\n              )}\n              {!(statusLocal.loading) && props.job.datasetIsPublished && !props.job.datasetIsPublishedAsIs && (\n                `🔴 ${t(`Dataset is published at address {{publishUrlFile}}, but differs from produced dataset`, {publishUrlFile})}`\n              )}\n              {!(statusLocal.loading) && props.job.datasetIsPublished && props.job.datasetIsPublishedAsIs && (\n                `🟢 ${t(`Dataset is correctly published at address {{publishUrlFile}}`, {publishUrlFile})}`\n              )}\n            </TabParagraph>\n            <TabParagraph>\n              {!(statusLocal.loading) && (\n                <>\n                  <br />\n                  <Button onClick={onVerifyPublished} variant=\"contained\" color=\"tertiary\">\n                    {t(\"Verify publication now\")} 🌍\n                  </Button>\n                </>\n              )}\n            </TabParagraph>\n\n            {/*<pre>\n              JOB: {JSON.stringify(props.job, null, 2)}\n              </pre>*/}\n\n          </>\n        )}\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab07Publish.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab07Publish.defaultProps = {\n};\n\nexport default React.memo(Tab07Publish);\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { Grid, Button } from \"@mui/material\";\nimport { toast } from \"./Toast\";\nimport { errorMessage, dateToLocaleDate } from \"../libs/Misc\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport JobService from \"../services/JobService\";\n\n\n\nfunction Tab08Validation(props) {\n  const { t } = useTranslation();\n  const [ statusLocal, setStatusLocal ] = useState({});\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(false);\n  const [ prevIsEnabled ] = useState(true);\n  const [ forceCheckValidated, setForceCheckValidated ] = useState(!props.job?.outcome?.esitoUltimoTentativoAccessoUrl);\n\n  async function onCheckValidated() {\n    setForceCheckValidated(true);\n  };\n\n  useEffect(() => {\n    if (props.job?.transform) {\n      if (props.job?.outcome?.esitoUltimoTentativoAccessoUrl) {\n        setNextIsEnabled(props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"successo\");\n        setStatusLocal({});\n      }\n      if (forceCheckValidated) {\n        (async () => {\n          setStatusLocal({loading: true});\n          await JobService.outcomeCheck(\n            props.job?.transform?.metadati?.annoRiferimento,\n            props.job?.transform?.header?.codiceFiscaleStrutturaProponente\n          ).then(\n            result => {\n              setForceCheckValidated(false);\n              if (result instanceof Error) {\n                toast.error(errorMessage(result));\n                return setStatusLocal({ error: errorMessage(result)});\n              }\nconsole.log(\"OUTCOMECHECK result:\", result.data.result);\n              props.setJob({...props.job, outcome: result.data.result});\n              setStatusLocal({});\n              setNextIsEnabled(props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"successo\");\n            },\n            error => {\n              toast.error(errorMessage(error));\n              props.setJob({...props.job, outcome: error.response.data.message});\n              return setStatusLocal({ error: errorMessage(error)});\n            }\n          );\n        })();\n      }\n    }\n  /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job.transform, forceCheckValidated]);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\nconsole.log(\"statusLocal:\", statusLocal);\nconsole.log(\"props.job?.outcome:\", props.job?.outcome);\n  const tentativiAccessoUrlLast = props.job?.outcome?.tentativiAccessoUrl?.length - 1;\n  const listaAccessoRisorsaLast = (tentativiAccessoUrlLast >= 0 ? props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa?.length - 1 : -1);\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Check ANAC validation\")}\n        </TabTitle>\n        <TabParagraph>\n          {statusLocal && \"loading\" in statusLocal && (\n            `${t(\"Checking\")}...`\n          )}\n          {statusLocal && !(\"loading\" in statusLocal) && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"in corso\") && (\n            `🟡 ${t(\"attempt in progress\")}...`\n          )}\n          {statusLocal && !(\"loading\" in statusLocal) && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"successo\") && (\n            `🟢 ${t(\"last attempt succeeded\")}`\n          )}\n          {statusLocal && !(\"loading\" in statusLocal) && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"fallito\") && (\n            `🔴 ${t(\"last attempt failed\")}`\n          )}\n        </TabParagraph>\n        {statusLocal && !(\"loading\" in statusLocal) && (\n          <div style={{fontSize: \"0.8em\", marginLeft: \"3em\"}}>\n            <TabParagraph>\n              <i>{t(\"last verification date\")}:</i> {props.job?.outcome?.dataUltimoTentativoAccessoUrl ? dateToLocaleDate(props.job?.outcome?.dataUltimoTentativoAccessoUrl) : t(\"never\")}\n            </TabParagraph>\n          </div>\n        )} \n        {statusLocal && !(\"loading\" in statusLocal) && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"fallito\") && (\n          <div style={{fontSize: \"0.8em\", marginLeft: \"3em\"}}>\n            <TabParagraph>\n              <i>{t(\"outcome code\")}:</i> {props.job?.outcome?.esitoComunicazione?.codice ?? \"?\"}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"outcome description\")}:</i> {props.job?.outcome?.esitoComunicazione?.descrizione ?? \"?\"}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"outcome detail\")}:</i> {props.job?.outcome?.esitoComunicazione?.dettaglio ?? \"?\"}\n            </TabParagraph>\n          </div>\n        )}\n        {statusLocal && !(\"loading\" in statusLocal) && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"fallito\") && (tentativiAccessoUrlLast >= 0) && (\n          <div style={{fontSize: \"0.8em\", marginLeft: \"3em\"}}>\n            <TabParagraph>\n              <i>{t(\"last attempt to access url outcome code\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.esito?.codice ?? \"?\"}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"last attempt to access url outcome description\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.esito?.descrizione ?? \"?\"}\n            </TabParagraph>\n          </div>\n        )}\n        {statusLocal && !(\"loading\" in statusLocal) && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"fallito\") && (tentativiAccessoUrlLast >= 0) && (listaAccessoRisorsaLast >= 0) && (\n          <div style={{fontSize: \"0.8em\", marginLeft: \"3em\"}}>\n            <TabParagraph>\n              <i>{t(\"last attempt to access resource\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa[listaAccessoRisorsaLast]?.url ?? \"?\"}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"last attempt to access resource xml valid\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa[listaAccessoRisorsaLast]?.xmlValido ? t(\"yes\") : t(\"no\")}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"last attempt to access resource xml validation\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa[listaAccessoRisorsaLast]?.dettaglioValidazioneXml ?? t(\"(empty)\")}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"last attempt to access resource code\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa[listaAccessoRisorsaLast]?.esitoAccessoRisorsa?.codice ?? \"?\"}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"last attempt to access resource description\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa[listaAccessoRisorsaLast]?.esitoAccessoRisorsa?.descrizione ?? \"?\"}\n            </TabParagraph>\n          </div>\n        )}\n        <br />\n        <TabParagraph>\n          {props.job.datasetIsPublished && !(props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"successo\") && (\n            <Button onClick={onCheckValidated} variant=\"contained\" color=\"tertiary\">\n              {t(\"Check validation now\")} 🎯\n            </Button>\n          )}\n        </TabParagraph>\n        \n        {/* <pre>\n          JOB: {JSON.stringify(props.job, null, 2)}\n        </pre> */}\n\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab08Validation.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab08Validation.defaultProps = {\n};\n\nexport default React.memo(Tab08Validation);\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@mui/material/Grid\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton } from \"./TabsComponents\";\nimport config from \"../config\";\n\nfunction Tab09Finished(props) {\n  const { t } = useTranslation();\n  const [ prevIsEnabled ] = useState(true);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Finished\")}!\n        </TabTitle>\n        {props.job?.transform?.outputFile && (\n          <>\n            <TabParagraph>\n              <div style={{fontSize: 128, textAlign: \"center\"}}>\n                🏁\n              </div>\n            </TabParagraph>\n            <TabParagraph>\n              <div style={{textAlign: \"center\"}}>\n                {t(\"Compliments, you did comply successfully to {{appTitle}} fulfillments for year {{year}}\", {appTitle: config.appTitle, year: props.job?.transform?.metadati?.annoRiferimento})}\n              </div>\n            </TabParagraph>\n          </>\n        )}\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab09Finished.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab09Finished.defaultProps = {\n};\n\nexport default React.memo(Tab09Finished);\n","import React, { useState, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport PropTypes from \"prop-types\";\nimport makeStyles from '@mui/styles/makeStyles';\nimport withStyles from '@mui/styles/withStyles';\nimport AppBar from '@mui/material/AppBar';\nimport Paper from '@mui/material/Paper';\nimport Tabs from \"@mui/material/Tabs\";\nimport Tab from \"@mui/material/Tab\";\nimport Typography from \"@mui/material/Typography\";\nimport Box from \"@mui/material/Box\";\nimport TokenService from \"../services/TokenService\";\nimport JobService from \"../services/JobService\";\nimport Tab01Start from \"./Tab01Start\";\nimport Tab02DownloadTemplate from \"./Tab02DownloadTemplate\";\nimport Tab03FillData from \"./Tab03FillData\";\nimport Tab04Upload from \"./Tab04Upload\";\nimport Tab05Produce from \"./Tab05Produce\";\nimport Tab06DownloadDataset from \"./Tab06DownloadDataset\";\nimport Tab07Publish from \"./Tab07Publish\";\nimport Tab08Validation from \"./Tab08Validation\";\nimport Tab09Finished from \"./Tab09Finished\";\nimport config from \"../config\";\n\n\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`nav-tab-${index}`}\n      {...other}\n    >\n      <Box p={3}>\n        {children}\n      </Box>\n    </Typography>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\nconst a11yProps = (index) => {\n  return {\n    id: `nav-tab-${index}`,\n    \"aria-controls\": `nav-tabpanel-${index}`\n  };\n}\n\nconst StyledTab = withStyles((theme) => ({\n  root: {\n    opacity: 0.8,\n  },\n}))(props => {\n  return (\n    <Tab {...props} />\n  );\n});\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    //backgroundColor: theme.palette.background.paper,\n  },\n  // tabs: {\n  //   \"& .MuiTabs-indicator\": {\n  //     //display: \"none\",\n  //     backgroundColor: \"orange\",\n  //   }\n  // }\n  tab: {\n    backgroundColor: theme.palette.secondary.light,\n  },\n  tabIndicator: {\n    backgroundColor: \"MediumSeaGreen\", //theme.palette.secondary.dark,\n    height: 3,\n  }\n\n}));\n\nconst TabsPanel = () => {\n  const classes = useStyles();\n  const [ job, setJob ] = useState(() => TokenService.getJob());\n  //const { job, setJob } = useContext(JobContext);\n  //const [ job, setJob ] = useState(JobService.get());\n  //const [ job, setJob ] = useState(TokenService.getJob());\n  //const redirect = TokenService.getRedirect();\n  //const [ tabId, setTabId ] = useState(TokenService.getJob());\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const redirect = TokenService.get(\"redirect\");\n    if (redirect) {\n      setJob({...job, tabId: redirect });\n      TokenService.remove(\"redirect\");\n    }\n  }, [job]);\n  \n  useEffect(() => { // to serialize job\n    TokenService.setJob(job); // serialize locally, on local storage\n    JobService.set(job); // serialize remotely, on server db\n  }, [job]);\n\n  function changeTab(id) {\n    setJob({...job, tabId: id });\n  }\n\n  function forceTab(event, id) {\n    if (config.ui.userCanForceTabChange) { // user can force tab change by clicking on app bar titles\n      changeTab(id);\n    }\n  }\n  \n  function goto(where) {\n    let id = where;\n    if (typeof where === \"string\") {\n      switch (where.toLowerCase()) {\n        case \"start\":\n          break;\n        case \"download template\":\n          break;\n        case \"fill your data\":\n          break;\n        case \"upload\":\n          break;\n        case \"produce\":\n          break;\n        case \"download dataset\":\n          break;\n        case \"publish\":\n          break;\n        case \"wait for validation\":\n          break;\n        case \"finish!\":\n          break;\n        case \"next\":\n          id = job ? job.tabId + 1 : 0;\n          break;\n        case \"prev\":\n          id = job ? job.tabId - 1 : 0;\n          break;\n        default:\n          console.error(`Unforeseen where specification in goto: ${where}`);\n          return;\n      }\n    }\n    changeTab(id);\n  }\n\n  if (!job?.tabId) job.tabId = 0;\n  return (\n    <div className={classes.root}>\n      <AppBar elevation={0} position=\"fixed\" style={{/*backgroundColor: \"transparent\",*/ top: 50}}>\n        {/* <Tabs\n          value={job.tabId}\n          onChange={forceTab}\n          indicatorColor=\"primary\"\n          // textColor=\"primary\"\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          aria-label=\"scrollable auto tabs\"\n          className={classes.tabs}\n        > */}\n        <Paper elevation={1} square>\n          <Tabs\n            value={job?.tabId}\n            //indicatorColor=\"secondary\"\n            //textColor=\"secondary\"\n            variant=\"scrollable\"\n            scrollButtons=\"auto\"\n            onChange={forceTab}\n            aria-label=\"current section\"\n            classes={{\n              indicator: classes.tabIndicator\n            }}\n            className={classes.tab}\n          >\n            <StyledTab label={`${t(\"Start\")} 🪄`} {...a11yProps(0)} />\n            <StyledTab label={`${t(\"Download template\")} ▼`} {...a11yProps(1)} />\n            <StyledTab label={`${t(\"Fill your data\")} 🖋`} {...a11yProps(2)} />\n            <StyledTab label={`${t(\"Upload\")} ▲`} {...a11yProps(3)} />\n            <StyledTab label={`${t(\"Produce\")} 🛠️`} {...a11yProps(4)} />\n            <StyledTab label={`${t(\"Download dataset\")} ⤵`} {...a11yProps(5)} />\n            <StyledTab label={`${t(\"Publish\")} 🌍`} {...a11yProps(6)} />\n            <StyledTab label={`${t(\"Wait for validation\")} 🎯`} {...a11yProps(7)} />\n            <StyledTab label={`${t(\"Finish!\")} 🏁`} {...a11yProps(8)} />\n          </Tabs>\n        </Paper>\n      </AppBar>\n\n      <>\n        {(job?.tabId === 0) && (\n          <TabPanel index={0} value={job.tabId}>\n            <Tab01Start goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 1) && (\n          <TabPanel index={1} value={job.tabId}>\n            <Tab02DownloadTemplate goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 2) && (\n          <TabPanel index={2} value={job.tabId}>\n            <Tab03FillData goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 3) && (\n          <TabPanel index={3} value={job.tabId}>\n            <Tab04Upload goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 4) && (\n          <TabPanel index={4} value={job.tabId}>\n            <Tab05Produce goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 5) && (\n          <TabPanel index={5} value={job.tabId}>\n            <Tab06DownloadDataset goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 6) && (\n          <TabPanel index={6} value={job.tabId}>\n            <Tab07Publish goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 7) && (\n          <TabPanel index={7} value={job.tabId}>\n            <Tab08Validation goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 8) && (\n          <TabPanel index={8} value={job.tabId}>\n            <Tab09Finished goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n      </>\n    </div>\n  );\n}\n\nexport { TabsPanel };","import React from \"react\";\n// import { useContext } from \"react\";\nimport { makeStyles } from \"@mui/styles\";\n// import { useTranslation } from \"react-i18next\";\n// import { AuthContext } from \"../providers/AuthProvider\";\nimport { TabsPanel } from \"./TabsPanel\";\n\nconst useStyles = makeStyles(theme => ({\n\thome: {\n    fontSize: \"1.5em\",\n\t},\n}));\n\nfunction Home() {\n\tconst classes = useStyles();\n  // const { auth } = useContext(AuthContext);\n  // const { t } = useTranslation();\n\n  return (\n    <div className={classes.home}>\n      {/* {(typeof auth.user !== \"undefined\") && // if auth.user is undefined, we don't know yet about user authentication...\n        ${t(\"Home\")} ${t(\"for\")} ${auth.user ? t(\"authenticated user\") : t(\"guest user\")} ${auth.user ? auth.user.email : \"\"}\n      } */}\n      <TabsPanel />\n    </div>\n  );\n}\n\nexport default React.memo(Home);"],"sourceRoot":""}