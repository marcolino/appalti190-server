(this["webpackJsonpappalti190-client"]=this["webpackJsonpappalti190-client"]||[]).push([[15],{308:function(e,t,n){"use strict";var a=n(21),r=n(311),o=n(0),c=n.n(o),s=n(293),i=n(417),l=n(384),d=n(418),u=n(419),b=n(420),j=n(1),m=["title","contentText","actions"],f=function(e){var t=e.title,n=e.contentText,o=e.actions,c=Object(r.a)(e,m);return Object(j.jsxs)(i.a,Object(a.a)(Object(a.a)({},c),{},{onBackdropClick:function(){},"aria-labelledby":t,onClose:function(e,t){},children:[Object(j.jsx)(l.a,{children:t}),Object(j.jsx)(d.a,{children:Object(j.jsx)(u.a,{children:n})}),Object(j.jsx)(b.a,{children:o.map((function(e,t){return Object(j.jsx)(s.a,{onClick:function(){e.callback&&e.callback(),e.closeModal&&c.onClose()},variant:"primary"===e.variant?"contained":"secondary"===e.variant?"outlined":"contained",autoFocus:c,style:{textTransform:"none"},children:e.text},t)}))})]}))};f.defaultProps={title:"",contentText:"",actions:[{text:"Ok",closeModal:!0,callback:function(){},variant:"primary",autoFocus:!1}]},t.a=c.a.memo(f)},315:function(e,t,n){"use strict";var a=n(105),r=n(88),o=n.n(r),c=n(31),s=n(45),i=function(){var e=Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.a.getUser()){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,c.a.get("/job/get");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l={get:i,set:function(e){return s.a.getUser()?c.a.put("/job/set",{job:e}):null},upload:function(e){var t=new FormData;return t.append("file",e),c.a.post("/job/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},transformXls2Xml:function(e){return c.a.post("/job/transformXls2Xml/:filePath",{filePath:e})},validateXml:function(e){return c.a.post("/job/validateXml/:transform",{transform:e})},outcomeCheck:function(e,t){return c.a.post("/job/outcomeCheck/:anno/:codiceFiscaleAmministrazione",{anno:e,codiceFiscaleAmministrazione:t})},outcomeFailureDetails:function(e,t){return c.a.post("/job/outcomeFailureDetails/anno/codiceFiscaleAmministrazione",{anno:e,codiceFiscaleAmministrazione:t})},urlExistenceAndMatch:function(e,t){return console.log("*** jobService - url,fileToMatch:",e,t),c.a.post("/job/urlExistenceAndMatch/url/fileToMatch",{url:e,fileToMatch:t})},getPlans:function(){return c.a.get("/job/getPlans")}};t.a=l},317:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return O})),n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return v}));var a=n(21),r=n(0),o=n.n(r),c=n(293),s=n(470),i=n(479),l=n(466),d=n(296),u=n(297),b=n(286),j=n(367),m=function(e,t){return"#"+e.replace(/^#/,"").replace(/../g,(function(e){return("0"+Math.min(255,Math.max(0,parseInt(e,16)+t)).toString(16)).substr(-2)}))},f=n(76),p=n(1),h=o.a.memo((function(e){var t=Object(b.a)((function(e){return{startAdornment:{backgroundColor:"#efefff",height:"2.5rem",maxHeight:"3rem",marginLeft:-15,marginRight:5,paddingLeft:10,paddingRight:10,borderRight:"1px solid #c5c5c5"},endAdornment:{backgroundColor:"#efefff",height:"2.5rem",maxHeight:"3rem",marginLeft:5,marginRight:-15,paddingLeft:10,paddingRight:10,borderLeft:"1px solid #c5c5c5"},textField:{backgroundColor:"#efefff"}}}))();return Object(p.jsx)(s.a,{id:e.id,type:e.type,value:e.value,required:e.required,autoFocus:e.autoFocus,autoComplete:e.autoComplete.toString(),variant:e.variant,fullWidth:e.fullWidth,label:e.label,size:e.size,margin:e.margin,className:e.className?e.className:t.textField,placeholder:e.placeholder,onChange:function(t){return e.onChange(t.target.value)},disabled:e.disabled,error:!Object(f.j)(e.error),InputProps:{startAdornment:e.startAdornmentIcon?Object(p.jsx)(j.a,{className:e.startAdornmentClass?e.startAdornmentClass:t.startAdornment,position:"start",children:e.startAdornmentIcon}):Object(p.jsx)(p.Fragment,{}),endAdornment:e.endAdornmentIcon?Object(p.jsx)(j.a,{className:e.endAdornmentClass?e.endAdornmentClass:t.endAdornment,position:"end",children:e.endAdornmentIcon}):Object(p.jsx)(p.Fragment,{}),className:t.input}})}));h.defaultProps={type:"text",required:!1,autoFocus:!1,autoComplete:!1,variant:"outlined",fullWidth:!0,label:"",size:"small",margin:"dense",className:null,placeholder:"",startAdornmentClass:null,endAdornmentClass:null,disabled:!1,error:""};var g=o.a.memo((function(e){var t=Object(b.a)((function(e){return function(e){return{button:{margin:e.spacing(1,0,0,0),textTransform:"none",fontSize:"1.3em",color:"white",backgroundColor:e.palette.success.main,"&:hover":{backgroundColor:m(e.palette.success.main,-25)}},buttonSecondary:{margin:e.spacing(1,0,0,0),textTransform:"none",fontSize:"1em !important",color:"white",backgroundColor:e.palette.secondary.dark+" !important","&:hover":{backgroundColor:m(e.palette.secondary.dark,-25)+" !important"}},buttonFederated:{margin:e.spacing(1,0,0,0),justifyContent:"flex-start",paddingLeft:e.spacing(5),fontSize:"1.3em"},buttonFederatedFacebook:{backgroundColor:e.palette.socialButtons.facebook.backgroundColor,"&:hover":{backgroundColor:m(e.palette.socialButtons.facebook.backgroundColor,-25)}},buttonFederatedGoogle:{backgroundColor:e.palette.socialButtons.google.backgroundColor,"&:hover":{backgroundColor:m(e.palette.socialButtons.google.backgroundColor,-25)}}}}(e)}))();return Object(p.jsx)(c.a,{fullWidth:e.fullWidth,variant:e.variant,color:e.color,size:e.size,className:"".concat(t.button," ").concat(e.social?t.buttonFederated:""," ").concat(e.social?t["buttonFederated"+Object(f.a)(e.social)]:""," ").concat(t[e.className]),startIcon:e.startIcon,onClick:e.onClick,disabled:e.disabled,children:e.children})}));g.defaultProps={fullWidth:!0,variant:"contained",color:"primary",social:null},o.a.memo((function(e){var t=Object(b.a)((function(e){return{disabled:{color:"grey",cursor:"default","&:hover":{textDecoration:"none"}}}}))(),n=e.disabled?t.disabled:"";return Object(p.jsx)(i.a,{control:Object(p.jsx)(l.a,{checked:e.checked,onChange:function(t){return e.onChange(t.target.checked)},className:"".concat(e.className," ").concat(n),color:e.color,size:e.size,disabled:e.disabled}),label:Object(p.jsx)(O,{className:"".concat(e.className," ").concat(n),children:e.children})})})).defaultProps={checked:!1,color:"primary",size:"small"};var O=o.a.memo((function(e){return Object(p.jsx)(u.a,Object(a.a)(Object(a.a)({component:e.component,variant:e.variant,color:e.color,align:e.align},e),{},{children:e.children}))}));O.defaultProps={component:"h1",variant:"body2",color:"textPrimary"};var x=o.a.memo((function(e){var t=Object(b.a)((function(t){return{normal:{cursor:"pointer",textDecoration:e.decoration?e.decoration:"none"},disabled:{color:"grey",cursor:"default","&:hover":{textDecoration:"none",color:"grey"}}}}))(),n=e.disabled?t.disabled:t.normal;return Object(p.jsx)(d.a,Object(a.a)(Object(a.a)({href:e.href,className:"".concat(e.className," ").concat(n),color:e.color},e),{},{children:e.children}))}));x.defaultProps={color:"textPrimary"};var v=o.a.memo((function(e){var t=Object(b.a)((function(t){return function(t){return{container:{display:"flex",alignItems:"center",marginTop:t.spacing(e.marginVertical),marginBottom:t.spacing(e.marginVertical)},divider:{width:"100%",borderBottom:"1px solid "+(e.color?e.color:t.palette.primary.dark),paddingLeft:t.spacing(1)},text:{paddingLeft:t.spacing(e.paddingHorizontal),paddingRight:t.spacing(e.paddingHorizontal)}}}(t)}))();return Object(p.jsxs)("div",{className:t.container,children:[Object(p.jsx)("div",{className:t.divider}),e.children&&Object(p.jsx)("span",{className:t.text,children:e.children}),Object(p.jsx)("div",{className:t.divider})]})}));v.defaultProps={marginVertical:1,paddingHorizontal:1}},326:function(e,t,n){"use strict";var a=n(31),r={getProfile:function(){return a.a.get("/user/getProfile").then((function(e){return e.data}),(function(e){return e}))},updateProfile:function(e){var t=e.email,n=e.password,r=e.firstName,o=e.lastName,c=e.address,s=e.fiscalCode,i=e.businessName;return a.a.post("/user/updateProfile",{email:t,password:n,firstName:r,lastName:o,address:c,fiscalCode:s,businessName:i}).then((function(e){return e.data}),(function(e){return e}))},updateUserProperty:function(e){var t=e.userId,n=e.propertyName,r=e.propertyValue;return a.a.post("/user/updateUserProperty",{userId:t,propertyName:n,propertyValue:r}).then((function(e){return e.data}),(function(e){return e}))},updatePlan:function(e){return console.log("updatePlan - plan:",e),a.a.post("/user/updatePlan",e).then((function(e){return e.data}),(function(e){return e}))},getRoles:function(e){return a.a.get("/user/getRoles").then((function(e){return e.data}),(function(e){return e}))},updateRoles:function(e){return a.a.post("/user/updateRoles",e).then((function(e){return e.data}),(function(e){return e}))},getPublicContent:function(){return a.a.get("/test/all")},getUserBoard:function(){return a.a.get("/test/user")},getModeratorBoard:function(){return a.a.get("/test/mod")},getAdminBoard:function(){return a.a.get("/test/admin")},getAdminPanel:function(){return a.a.get("/admin/getAdminPanel").then((function(e){return e.data}),(function(e){return e}))}};t.a=r},463:function(e,t,n){"use strict";n.r(t);var a=n(14),r=n(21),o=n(311),c=n(0),s=n.n(c),i=n(18),l=n(295),d=n(338),u=n(286),b=n(298),j=n(462),m=n(473),f=n(297),p=n(474),h=n(469),g=n(464),O=n(288),x=n(413),v=n(291),C=n(301),y=n(366),S=n(394),N=n.n(S),k=n(325),P=n.n(k),A=n(336),F=n.n(A),w=n(395),I=n.n(w),R=n(396),E=n.n(R),z=n(397),T=n.n(z),U=n(398),L=n.n(U),M=n(399),W=n.n(M),B=n(400),D=n.n(B),H=n(401),V=n.n(H),X=n(402),G=n.n(X),Y=n(108),q=n(414),Z=n(415),J=n(416),_=n(293),K=n(296),Q=n(393),$=n(308),ee=n(40),te=n.p+"static/media/SelectedPlan-en.85b85fc0.png",ne=n.p+"static/media/SelectedPlan-it.a09948bf.png",ae=n.p+"static/media/SelectedPlan-fr.749a5b1e.png",re=n(315),oe=n(56),ce=n(76),se=n(1),ie=Object(u.a)((function(e){return{section:{},cardHeader:{paddingTop:e.spacing(3)},cardHeaderActive:{},cardHeaderTest:{paddingBottom:0},cardTest:{color:"#bb571f",backgroundColor:"#ffde92",borderRadius:5,fontSize:14,fontWeight:"bold",padding:2,paddingLeft:7,paddingRight:7},card:{transition:"box-shadow .3s",borderRadius:10,border:"1px solid #ccc","&:hover":{boxShadow:"10px 10px 30px rgba(32, 32, 132, .5)"}},cardActive:{backgroundColor:"#e0e8ff"},cardActiveImage:{position:"absolute",marginLeft:50,marginTop:-20,maxWidth:80,transform:"rotate(15deg)",opacity:.6,zIndex:999},cardHr:{border:"1px solid #eee"}}})),le=function(e){var t,n;console.log("Pricing - props:",e);var r=ie(),o=Object(l.a)().t,i=Object(Y.b)().showModal,d=s.a.useState(!1),u=Object(a.a)(d,2),b=u[0],j=u[1],m=Object(c.useState)([]),p=Object(a.a)(m,2),h=p[0],g=p[1];Object(c.useEffect)((function(){re.a.getPlans().then((function(e){e instanceof Error?console.error("getPlans error:",e):(console.log("getPlans got successfully:",e.data),g(e.data))}))}),[g]);var O=function(t){return e.currentPlanName===t.name},x=Object(c.useState)(Object(oe.a)(ee.a)),S=Object(a.a)(x,1)[0],N=null;switch(S){case"en":default:N=te;break;case"it":N=ne;break;case"fr":N=ae}return Object(se.jsx)("section",{className:r.section,children:Object(se.jsx)(C.a,{children:Object(se.jsxs)(y.a,{py:0,textAlign:"center",children:[Object(se.jsx)(y.a,{mb:0,children:Object(se.jsxs)(C.a,{maxWidth:"lg",children:[Object(se.jsx)(f.a,{variant:"h3",component:"h2",gutterBottom:!0,children:Object(se.jsx)(f.a,{variant:"h6",component:"span",color:"primary",children:o("Choose the plan which best suits your needs")})}),"undefined"!==typeof(null===(t=h[0])||void 0===t?void 0:t.pricePerMonth)&&"undefined"!==typeof(null===(n=h[0])||void 0===n?void 0:n.pricePerYear)&&Object(se.jsxs)("div",{children:[Object(se.jsx)(f.a,{variant:"subtitle1",component:"span",children:o("per year")}),Object(se.jsxs)("span",{children:["\xa0",Object(se.jsx)(Q.a,{name:"checkbox",color:"primary",checked:b,onChange:function(e){j(e.target.checked)}}),"\xa0"]}),Object(se.jsx)(f.a,{variant:"subtitle1",component:"span",children:o("per month")})]})]})}),Object(se.jsx)(v.a,{container:!0,spacing:3,children:h.map((function(t,n){return Object(se.jsxs)(v.a,{item:!0,xs:12,md:parseInt(h.length?12/h.length:12),children:[O(t)&&Object(se.jsx)("img",{className:r.cardActiveImage,src:N,alt:o("Selected plan stamp")}),Object(se.jsxs)(q.a,{variant:"outlined",className:[r.card,O(t)?r.cardActive:null].join(" "),children:[Object(se.jsx)(J.a,{title:Object(ce.a)(o(t.name)),className:[r.cardHeader,O(t)?r.cardHeaderActive:null].join(" "),titleTypographyProps:(O(t),{})}),"live"!==e.paymentMode?Object(se.jsx)("span",{className:r.cardTest,children:" TEST "}):Object(se.jsx)(se.Fragment,{}),Object(se.jsx)("hr",{className:r.cardHr}),Object(se.jsxs)(Z.a,{children:[Object(se.jsxs)(y.a,{px:1,children:[Object(se.jsxs)(f.a,{variant:"h4",component:"h2",gutterBottom:!0,style:{fontWeight:"bold"},children:[Object(ce.b)(t.priceCurrency),b?t.pricePerMonth:t.pricePerYear,Object(se.jsxs)(f.a,{variant:"h6",color:"textSecondary",component:"span",children:[" / ",o(b?"month":"year")]})]}),Object(se.jsx)(f.a,{color:"textSecondary",variant:"subtitle1",component:"p",children:t.cigNumberAllowed===Number.MAX_SAFE_INTEGER?o("Unlimited CIG's"):o("Up to {{cigs}} CIG's",{cigs:t.cigNumberAllowed})}),Object(se.jsx)(f.a,{color:"textSecondary",variant:"subtitle1",component:"div",children:t.supportTypes.map((function(e,t){return Object(se.jsx)("div",{children:o("Support")+" "+o("by")+" "+o(e)},t)}))}),Object(se.jsx)("br",{})]}),Object(se.jsx)(_.a,{variant:"contained",color:"secondary",onClick:function(n){!function(e){i($.a,e)}({title:o("Sure to buy this plan?"),contentText:o("It allows processing of up to {{cigs}} CIGs",{cigs:t.cigNumberAllowed}),actions:[{callback:function(){console.log("Clicked first action button"),e.onPlanSelected(n,t.name)},text:o("Ok"),closeModal:!0},{callback:function(){console.log("Clicked second action button")},text:o("Cancel"),closeModal:!0}]})},disabled:O(t),children:O(t)?o("Active plan"):o("Select plan")}),e.canForcePlan&&Object(se.jsxs)(se.Fragment,{children:[Object(se.jsx)(y.a,{mt:1}),Object(se.jsx)(_.a,{variant:"contained",color:"tertiary",onClick:function(n){e.onPlanForced(n,t.name)},disabled:O(t),children:o("Force plan")})]}),Object(se.jsx)(y.a,{mt:2,children:Object(se.jsx)(K.a,{href:"#",color:"primary",children:Object(se.jsx)("small",{children:o("Learn more")})})})]})]})]},n)}))})]})})})};le.defaultProps={currentPlanName:"",onPlanSelected:function(e){return console.log("Selected plan:",e)},canForcePlan:!1,onPlanForced:function(e){return console.log("Forced plan:",e)}};var de=s.a.memo(le),ue=n(326),be=n(45),je=n(105),me=n(88),fe=n.n(me),pe=n(31),he=function(){var e=Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.a.get("/payment/mode").then((function(e){return e.data}),(function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(je.a)(fe.a.mark((function e(t){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.product,e.next=3,pe.a.post("/payment/create-checkout-session",{product:n}).then((function(e){return console.log("CCS - res:",e),e.data}),(function(e){return console.log("CCS - err:",e),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe={mode:he,createCheckoutSession:ge},xe=n(49),ve=n(77),Ce=n(317),ye=n(20),Se=n.n(ye),Ne=["children","value","index"],ke=Object(u.a)((function(e){return function(e){return{root:{flexGrow:1},avatar:{backgroundColor:e.palette.success.main},columnLeft:{marginLeft:e.spacing(.2)},columnRight:{marginLeft:"auto",marginRight:e.spacing(.2)},form:{},fieldset:{border:0},fieldsetPersonalData:{color:"#758c75",fontSize:13,border:1,borderStyle:"solid",borderColor:"#758c75",borderRadius:5},fieldsetCompanyData:{color:"#7a7aa5",fontSize:13,border:1,borderStyle:"solid",borderColor:"#7a7aa5",borderRadius:5},fieldsetAddress:{color:"#aaa",fontSize:13,border:1,borderStyle:"solid",borderColor:"#aaa",borderRadius:5},formControlSelectPlan:{minWidth:200},formControlSelectRole:{minWidth:200},tab:{backgroundColor:e.palette.secondary.light},tabIndicator:{backgroundColor:e.palette.secondary.dark,height:1}}}(e)}));function Pe(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function Ae(e){var t=e.children,n=e.value,a=e.index,c=Object(o.a)(e,Ne);return Object(se.jsx)(f.a,Object(r.a)(Object(r.a)({component:"div",role:"tabpanel",hidden:n!==a,id:"scrollable-auto-tabpanel-".concat(a),"aria-labelledby":"nav-tab-".concat(a)},c),{},{children:Object(se.jsx)(y.a,{p:3,children:t})}))}function Fe(e){var t,n,o,u,f=ke(),S=Object(i.f)(),k=Object(c.useState)(be.a.getUser()),A=Object(a.a)(k,2),w=A[0],R=A[1],z=Object(c.useState)(!1),U=Object(a.a)(z,2),M=U[0],B=U[1],H=Object(c.useState)(""),X=Object(a.a)(H,2),Y=X[0],q=X[1],Z=Object(c.useState)(""),J=Object(a.a)(Z,2),_=J[0],K=J[1],Q=Object(c.useState)(""),$=Object(a.a)(Q,2),ee=$[0],te=$[1],ne=Object(c.useState)(""),ae=Object(a.a)(ne,2),re=ae[0],oe=ae[1],ie=Object(c.useState)(""),le=Object(a.a)(ie,2),je=le[0],me=le[1],fe=Object(c.useState)({}),pe=Object(a.a)(fe,2),he=pe[0],ge=pe[1],ye=Object(c.useState)(""),Ne=Object(a.a)(ye,2),Fe=Ne[0],we=Ne[1],Ie=Object(c.useState)(""),Re=Object(a.a)(Ie,2),Ee=Re[0],ze=Re[1],Te=Object(c.useState)(""),Ue=Object(a.a)(Te,2),Le=Ue[0],Me=Ue[1],We=Object(c.useState)(""),Be=Object(a.a)(We,2),De=Be[0],He=Be[1],Ve=Object(c.useState)(""),Xe=Object(a.a)(Ve,2),Ge=Xe[0],Ye=Xe[1],qe=Object(c.useState)(""),Ze=Object(a.a)(qe,2),Je=Ze[0],_e=Ze[1],Ke=Object(c.useState)(""),Qe=Object(a.a)(Ke,2),$e=Qe[0],et=Qe[1],tt=Object(c.useState)(null),nt=Object(a.a)(tt,2),at=nt[0],rt=nt[1],ot=Object(c.useState)([]),ct=Object(a.a)(ot,2),st=ct[0],it=ct[1],lt=Object(c.useState)([]),dt=Object(a.a)(lt,2),ut=dt[0],bt=dt[1],jt=Object(c.useState)({}),mt=Object(a.a)(jt,2),ft=mt[0],pt=mt[1],ht=Object(l.a)().t,gt=s.a.useState(null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&null!==(n=t.state)&&void 0!==n&&n.tabValue?null===e||void 0===e||null===(o=e.location)||void 0===o||null===(u=o.state)||void 0===u?void 0:u.tabValue:0),Ot=Object(a.a)(gt,2),xt=Ot[0],vt=Ot[1],Ct=s.a.useState(!1),yt=Object(a.a)(Ct,2),St=yt[0],Nt=yt[1],kt=s.a.useState(!1),Pt=Object(a.a)(kt,2),At=Pt[0],Ft=Pt[1];Object(d.a)((function(e){(St||At)&&e.preventDefault()})),Object(c.useEffect)((function(){console.log("useeffect block");var e=S.block((function(e,t){return!St&&!At||window.confirm(ht("Are you sure to ignore unsaved data?"))}));return function(){e()}}),[St,At,S,ht]),Object(c.useEffect)((function(){console.log("useeffect profile"),M&&(q(M.email?M.email:""),K(M.firstName?M.firstName:""),te(M.lastName?M.lastName:""),oe(M.fiscalCode?M.fiscalCode:""),me(M.businessName?M.businessName:""),we(M.address.street?M.address.street:""),ze(M.address.streetNo?M.address.streetNo:""),Me(M.address.city?M.address.city:""),He(M.address.province?M.address.province:""),Ye(M.address.zip?M.address.zip:""),_e(M.address.country?M.address.country:""),rt(M.plan?M.plan.name:""),it(M.roles?M.roles.map((function(e){return e.name})):[]),Nt(!1),Ft(!1))}),[M]),Object(c.useEffect)((function(){console.log("useeffect user.id"),null!==w&&void 0!==w&&w.id||(ve.b.error(ht("User must be authenticated")),S.goBack())}),[null===w||void 0===w?void 0:w.id,S,ht]),Object(c.useEffect)((function(){console.log("useeffect getProfile"),ue.a.getProfile().then((function(e){if(e instanceof Error)return console.error("getProfile error:",e),pt({code:e.message});B(e.user)})),console.log("useeffect getRoles"),ue.a.getRoles().then((function(e){if(e instanceof Error)return console.error("getRoles error:",e),pt({code:e.message});console.log("roles got successfully:",e),bt(e.map((function(e){return e.name})))})),Oe.mode().then((function(e){if(e instanceof Error)return console.error("mode error:",e),pt({code:e.message});console.log("mode:",e),et(e.mode)}))}),[null===w||void 0===w?void 0:w.id]),Object(c.useEffect)((function(){console.log("useeffect setAddress"),ge({street:Fe,streetNo:Ee,city:Le,province:De,zip:Ge,country:Je})}),[Fe,Ee,Le,De,Ge,Je]);var wt=function(){var e;return null===w||void 0===w||null===(e=w.roles)||void 0===e?void 0:e.includes("admin")},It=function(){var e;return null===w||void 0===w||null===(e=w.roles)||void 0===e?void 0:e.includes("admin")};return Object(se.jsxs)("div",{className:f.root,children:[Object(se.jsxs)(C.a,{maxWidth:"sm",children:[Object(se.jsx)(y.a,{m:1}),Object(se.jsx)(v.a,{container:!0,justifyContent:"center",children:Object(se.jsx)(x.a,{className:f.avatar,children:Object(se.jsx)(N.a,{})})}),Object(se.jsx)(y.a,{m:3}),Object(se.jsx)(b.a,{position:"static",children:Object(se.jsxs)(j.a,{value:xt,onChange:function(e,t){vt(t)},variant:"standard","aria-label":"tabs for user's personal profile",classes:{indicator:f.tabIndicator},className:f.tab,children:[Object(se.jsx)(m.a,Object(r.a)({label:ht("Your profile")},Pe(0))),Object(se.jsx)(m.a,Object(r.a)({label:ht("Your plan")},Pe(1))),Object(se.jsx)(m.a,Object(r.a)({label:ht("Your role(s)")},Pe(2)))]})})]}),Object(se.jsxs)(C.a,{maxWidth:1===xt?"md":"sm",children:[0===xt&&Object(se.jsx)(Ae,{value:xt,index:0,children:Object(se.jsx)("form",{name:"form",className:f.form,noValidate:!0,autoComplete:"off",children:Object(se.jsxs)("fieldset",{className:f.fieldset,children:[Object(se.jsx)(y.a,{m:3}),Object(se.jsxs)("fieldset",{className:f.fieldsetPersonalData,children:[Object(se.jsx)("legend",{children:ht("Personal data")}),Object(se.jsx)(v.a,{item:!0,xs:12,children:Object(se.jsx)(Ce.c,{id:"email",value:Y,onChange:function(e){Nt(!0),q(e)},placeholder:ht("Email"),startAdornmentIcon:Object(se.jsx)(F.a,{}),error:ft.email,autoFocus:!0})}),Object(se.jsxs)(v.a,{container:!0,direction:"row",columnSpacing:{xs:1,sm:2,md:3,lg:4},rowSpacing:0,children:[Object(se.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(se.jsx)(Ce.c,{id:"firstName",value:_,onChange:function(e){Nt(!0),K(e)},placeholder:ht("First Name"),startAdornmentIcon:Object(se.jsx)(P.a,{}),error:ft.firstName})}),Object(se.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(se.jsx)(Ce.c,{id:"lastName",value:ee,onChange:function(e){Nt(!0),te(e)},placeholder:ht("Last Name"),startAdornmentIcon:Object(se.jsx)(P.a,{}),error:ft.lastName})})]})]}),Object(se.jsx)(y.a,{m:1}),Object(se.jsxs)("fieldset",{className:f.fieldsetCompanyData,children:[Object(se.jsx)("legend",{children:ht("Company data")}),Object(se.jsxs)(v.a,{container:!0,direction:"row",columnSpacing:{xs:1,sm:2,md:3,lg:4},rowSpacing:0,children:[Object(se.jsx)(v.a,{item:!0,xs:12,children:Object(se.jsx)(Ce.c,{id:"fiscalCode",value:re,onChange:function(e){Nt(!0),oe(e)},placeholder:ht("Company fiscal code"),startAdornmentIcon:Object(se.jsx)(I.a,{}),error:ft.fiscalCode})}),Object(se.jsx)(v.a,{item:!0,xs:12,children:Object(se.jsx)(Ce.c,{id:"businessName",value:je,onChange:function(e){Nt(!0),me(e)},placeholder:ht("Company business name"),startAdornmentIcon:Object(se.jsx)(E.a,{}),error:ft.businessName})})]}),Object(se.jsx)(y.a,{m:1}),Object(se.jsxs)("fieldset",{className:f.fieldsetAddress,children:[Object(se.jsx)("legend",{children:ht("Address")}),Object(se.jsxs)(v.a,{container:!0,direction:"row",columnSpacing:{xs:1,sm:2,md:3,lg:4},rowSpacing:0,children:[Object(se.jsx)(v.a,{item:!0,xs:12,sm:8,children:Object(se.jsx)(Ce.c,{id:"addressStreet",value:Fe,onChange:function(e){Nt(!0),we(e)},placeholder:ht("Street"),startAdornmentIcon:Object(se.jsx)(T.a,{}),error:ft.addressStreet})}),Object(se.jsx)(v.a,{item:!0,xs:12,sm:4,children:Object(se.jsx)(Ce.c,{id:"addressStreetNo",value:Ee,onChange:function(e){Nt(!0),ze(e)},placeholder:ht("N\xb0"),startAdornmentIcon:Object(se.jsx)(L.a,{}),error:ft.addressStreetNo})}),Object(se.jsx)(v.a,{item:!0,xs:12,children:Object(se.jsx)(Ce.c,{id:"addressCity",value:Le,onChange:function(e){Nt(!0),Me(e)},placeholder:ht("City"),startAdornmentIcon:Object(se.jsx)(W.a,{}),error:ft.addressCity})}),Object(se.jsx)(v.a,{item:!0,xs:12,sm:7,children:Object(se.jsx)(Ce.c,{id:"addressProvince",value:De,onChange:function(e){Nt(!0),He(e)},placeholder:ht("Province"),startAdornmentIcon:Object(se.jsx)(D.a,{}),error:ft.addressProvince})}),Object(se.jsx)(v.a,{item:!0,xs:12,sm:5,children:Object(se.jsx)(Ce.c,{id:"addressZip",value:Ge,onChange:function(e){Nt(!0),Ye(e)},placeholder:ht("ZIP"),startAdornmentIcon:Object(se.jsx)(V.a,{}),error:ft.addressZip})}),Object(se.jsx)(v.a,{item:!0,xs:12,children:Object(se.jsx)(Ce.c,{id:"addressCountry",value:Je,onChange:function(e){Nt(!0),_e(e)},placeholder:ht("Country"),startAdornmentIcon:Object(se.jsx)(G.a,{}),error:ft.addressCountry})})]})]})]})]})})}),1===xt&&Object(se.jsx)(Ae,{value:xt,index:1,children:Object(se.jsx)("form",{className:f.form,noValidate:!0,autoComplete:"off",children:Object(se.jsx)("fieldset",{className:f.fieldset,children:Object(se.jsx)(de,{currentPlanName:at,onPlanSelected:function(e,t){var n;n=t,Oe.createCheckoutSession({product:n}).then((function(e){var t;return e instanceof Error?(console.error("createCheckoutSession error:",e),ve.b.error(Object(ce.g)(e))):(console.log("createCheckoutSession got successfully:",e),null!==e&&void 0!==e&&null!==(t=e.session)&&void 0!==t&&t.url?void(window.location=e.session.url):ve.b.error(ht("Sorry, could not get the payment page")))}))},canForcePlan:It(),onPlanForced:function(e,t){It()&&(be.a.setUser(w),ue.a.updatePlan({plan:t}).then((function(e){if(e instanceof Error)return console.error("profileUpdate error:",e),ve.b.error(Object(ce.g)(e)),pt({code:e.message});rt(t),ve.b.success(ht("Plan forced successfully"))})))},paymentMode:$e})})})}),2===xt&&Object(se.jsx)(Ae,{value:xt,index:2,children:Object(se.jsx)("form",{className:f.form,noValidate:!0,autoComplete:"off",children:Object(se.jsxs)("fieldset",{className:f.fieldset,children:[Object(se.jsx)(y.a,{m:3}),Object(se.jsx)(v.a,{item:!0,xs:12,children:Object(se.jsxs)(p.a,{variant:"outlined",className:f.formControlSelectRole,children:[Object(se.jsx)(h.a,{id:"roles-label",children:ht("Role(s)")}),Object(se.jsx)(g.a,{labelId:"roles-label",id:"roles",multiple:!0,value:st,onChange:function(e){Ft(!0),it(e.target.value)},label:ht("Role(s)"),disabled:!wt(),children:ut.map((function(e,t){return Object(se.jsx)(O.a,{value:e,children:e},t)}))})]})})]})})})]}),0===xt&&Object(se.jsx)(v.a,{container:!0,justifyContent:"center",children:Object(se.jsx)(Ce.a,{fullWidth:!1,className:"buttonSecondary",autoFocus:!0,onClick:function(e){e.preventDefault(),pt({}),ue.a.updateProfile({email:Y,firstName:_,lastName:ee,fiscalCode:re,businessName:je,address:he,roles:st}).then((function(e){if(e instanceof Error)return console.error("profileUpdate error:",e),ve.b.warn(Object(ce.g)(e)),pt({code:e.message});Nt(!1),ve.b.success(ht("Profile updated successfully"))}))},children:ht("Update")})}),2===xt&&wt()&&Object(se.jsx)(v.a,{container:!0,justifyContent:"center",children:Object(se.jsx)(Ce.a,{fullWidth:!1,className:"buttonSecondary",autoFocus:!0,onClick:function(e){w.roles=String(st).split(","),console.log("USER.ROLES:",w.roles,typeof w.roles),w.roles&&w.roles.length&&!w.roles.every((function(e){return""===e}))||(w.roles=Se.a.api.rolesNamesDefault,it(w.roles),console.log("USER.ROLES DEFAULTS TO:",w.roles,typeof w.roles)),console.log("*** USER:",w),R(w),be.a.setUser(w),ue.a.updateRoles({roles:w.roles}).then((function(e){if(e instanceof Error)return console.error("profileUpdate error:",e),ve.b.error(Object(ce.g)(e)),pt({code:e.message});it(w.roles),Ft(!1),xe.a.dispatch("roles-change"),ve.b.success(ht("Roles updated successfully"))}))},children:ht("Update")})}),Object(se.jsx)(y.a,{m:1})]})}Fe.defaultProps={tabValue:0};t.default=s.a.memo(Fe)}}]);
//# sourceMappingURL=15.fcc1ce05.chunk.js.map