(this["webpackJsonpappalti190-client"]=this["webpackJsonpappalti190-client"]||[]).push([[14],{309:function(e,t,n){"use strict";var a=n(21),r=n(312),o=n(0),c=n.n(o),s=n(294),l=n(370),i=n(352),d=n(371),u=n(372),b=n(373),j=n(1),f=["title","contentText","actions"],m=function(e){var t=e.title,n=e.contentText,o=e.actions,c=Object(r.a)(e,f);return Object(j.jsxs)(l.a,Object(a.a)(Object(a.a)({},c),{},{onBackdropClick:function(){},"aria-labelledby":t,onClose:function(e,t){},children:[Object(j.jsx)(i.a,{children:t}),Object(j.jsx)(d.a,{children:Object(j.jsx)(u.a,{children:n})}),Object(j.jsx)(b.a,{children:o.map((function(e,t){return Object(j.jsx)(s.a,{onClick:function(){e.callback&&e.callback(),e.closeModal&&c.onClose()},variant:"primary"===e.variant?"contained":"secondary"===e.variant?"outlined":"contained",autoFocus:c,style:{textTransform:"none"},children:e.text},t)}))})]}))};m.defaultProps={title:"",contentText:"",actions:[{text:"Ok",closeModal:!0,callback:function(){},variant:"primary",autoFocus:!1}]},t.a=c.a.memo(m)},319:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return O})),n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return v}));var a=n(21),r=n(0),o=n.n(r),c=n(294),s=n(470),l=n(479),i=n(466),d=n(297),u=n(298),b=n(287),j=n(374),f=function(e,t){return"#"+e.replace(/^#/,"").replace(/../g,(function(e){return("0"+Math.min(255,Math.max(0,parseInt(e,16)+t)).toString(16)).substr(-2)}))},m=n(76),p=n(1),h=o.a.memo((function(e){var t=Object(b.a)((function(e){return{startAdornment:{backgroundColor:"#efefff",height:"2.5rem",maxHeight:"3rem",marginLeft:-15,marginRight:5,paddingLeft:10,paddingRight:10,borderRight:"1px solid #c5c5c5"},endAdornment:{backgroundColor:"#efefff",height:"2.5rem",maxHeight:"3rem",marginLeft:5,marginRight:-15,paddingLeft:10,paddingRight:10,borderLeft:"1px solid #c5c5c5"},textField:{backgroundColor:"#efefff"}}}))();return Object(p.jsx)(s.a,{id:e.id,type:e.type,value:e.value,required:e.required,autoFocus:e.autoFocus,autoComplete:e.autoComplete.toString(),variant:e.variant,fullWidth:e.fullWidth,label:e.label,size:e.size,margin:e.margin,className:e.className?e.className:t.textField,placeholder:e.placeholder,onChange:function(t){return e.onChange(t.target.value)},disabled:e.disabled,error:!Object(m.j)(e.error),InputProps:{startAdornment:e.startAdornmentIcon?Object(p.jsx)(j.a,{className:e.startAdornmentClass?e.startAdornmentClass:t.startAdornment,position:"start",children:e.startAdornmentIcon}):Object(p.jsx)(p.Fragment,{}),endAdornment:e.endAdornmentIcon?Object(p.jsx)(j.a,{className:e.endAdornmentClass?e.endAdornmentClass:t.endAdornment,position:"end",children:e.endAdornmentIcon}):Object(p.jsx)(p.Fragment,{}),className:t.input}})}));h.defaultProps={type:"text",required:!1,autoFocus:!1,autoComplete:!1,variant:"outlined",fullWidth:!0,label:"",size:"small",margin:"dense",className:null,placeholder:"",startAdornmentClass:null,endAdornmentClass:null,disabled:!1,error:""};var g=o.a.memo((function(e){var t=Object(b.a)((function(e){return function(e){return{button:{margin:e.spacing(1,0,0,0),textTransform:"none",fontSize:"1.3em",color:"white",backgroundColor:e.palette.success.main,"&:hover":{backgroundColor:f(e.palette.success.main,-25)}},buttonSecondary:{margin:e.spacing(1,0,0,0),textTransform:"none",fontSize:"1em !important",color:"white",backgroundColor:e.palette.secondary.dark+" !important","&:hover":{backgroundColor:f(e.palette.secondary.dark,-25)+" !important"}},buttonFederated:{margin:e.spacing(1,0,0,0),justifyContent:"flex-start",paddingLeft:e.spacing(5),fontSize:"1.3em"},buttonFederatedFacebook:{backgroundColor:e.palette.socialButtons.facebook.backgroundColor,"&:hover":{backgroundColor:f(e.palette.socialButtons.facebook.backgroundColor,-25)}},buttonFederatedGoogle:{backgroundColor:e.palette.socialButtons.google.backgroundColor,"&:hover":{backgroundColor:f(e.palette.socialButtons.google.backgroundColor,-25)}}}}(e)}))();return Object(p.jsx)(c.a,{fullWidth:e.fullWidth,variant:e.variant,color:e.color,size:e.size,className:"".concat(t.button," ").concat(e.social?t.buttonFederated:""," ").concat(e.social?t["buttonFederated"+Object(m.a)(e.social)]:""," ").concat(t[e.className]),startIcon:e.startIcon,onClick:e.onClick,disabled:e.disabled,children:e.children})}));g.defaultProps={fullWidth:!0,variant:"contained",color:"primary",social:null},o.a.memo((function(e){var t=Object(b.a)((function(e){return{disabled:{color:"grey",cursor:"default","&:hover":{textDecoration:"none"}}}}))(),n=e.disabled?t.disabled:"";return Object(p.jsx)(l.a,{control:Object(p.jsx)(i.a,{checked:e.checked,onChange:function(t){return e.onChange(t.target.checked)},className:"".concat(e.className," ").concat(n),color:e.color,size:e.size,disabled:e.disabled}),label:Object(p.jsx)(O,{className:"".concat(e.className," ").concat(n),children:e.children})})})).defaultProps={checked:!1,color:"primary",size:"small"};var O=o.a.memo((function(e){return Object(p.jsx)(u.a,Object(a.a)(Object(a.a)({component:e.component,variant:e.variant,color:e.color,align:e.align},e),{},{children:e.children}))}));O.defaultProps={component:"h1",variant:"body2",color:"textPrimary"};var x=o.a.memo((function(e){var t=Object(b.a)((function(t){return{normal:{cursor:"pointer",textDecoration:e.decoration?e.decoration:"none"},disabled:{color:"grey",cursor:"default","&:hover":{textDecoration:"none",color:"grey"}}}}))(),n=e.disabled?t.disabled:t.normal;return Object(p.jsx)(d.a,Object(a.a)(Object(a.a)({href:e.href,className:"".concat(e.className," ").concat(n),color:e.color},e),{},{children:e.children}))}));x.defaultProps={color:"textPrimary"};var v=o.a.memo((function(e){var t=Object(b.a)((function(t){return function(t){return{container:{display:"flex",alignItems:"center",marginTop:t.spacing(e.marginVertical),marginBottom:t.spacing(e.marginVertical)},divider:{width:"100%",borderBottom:"1px solid "+(e.color?e.color:t.palette.primary.dark),paddingLeft:t.spacing(1)},text:{paddingLeft:t.spacing(e.paddingHorizontal),paddingRight:t.spacing(e.paddingHorizontal)}}}(t)}))();return Object(p.jsxs)("div",{className:t.container,children:[Object(p.jsx)("div",{className:t.divider}),e.children&&Object(p.jsx)("span",{className:t.text,children:e.children}),Object(p.jsx)("div",{className:t.divider})]})}));v.defaultProps={marginVertical:1,paddingHorizontal:1}},324:function(e,t,n){"use strict";var a=n(31),r={getProfile:function(){return a.a.get("/user/getProfile").then((function(e){return e.data}),(function(e){return e}))},updateProfile:function(e){var t=e.email,n=e.password,r=e.firstName,o=e.lastName,c=e.address,s=e.fiscalCode,l=e.businessName;return a.a.post("/user/updateProfile",{email:t,password:n,firstName:r,lastName:o,address:c,fiscalCode:s,businessName:l}).then((function(e){return e.data}),(function(e){return e}))},updateUserProperty:function(e){var t=e.userId,n=e.propertyName,r=e.propertyValue;return a.a.post("/user/updateUserProperty",{userId:t,propertyName:n,propertyValue:r}).then((function(e){return e.data}),(function(e){return e}))},getAllPlans:function(e){return a.a.get("/user/getAllPlans").then((function(e){return e.data}),(function(e){return e}))},updatePlan:function(e){return console.log("updatePlan - plan:",e),a.a.post("/user/updatePlan",e).then((function(e){return e.data}),(function(e){return e}))},getAllRoles:function(e){return a.a.get("/user/getAllRoles").then((function(e){return e.data}),(function(e){return e}))},updateRoles:function(e){return a.a.post("/user/updateRoles",e).then((function(e){return e.data}),(function(e){return e}))},getPublicContent:function(){return a.a.get("/test/all")},getUserBoard:function(){return a.a.get("/test/user")},getModeratorBoard:function(){return a.a.get("/test/mod")},getAdminBoard:function(){return a.a.get("/test/admin")},getAllUsersWithFullInfo:function(){return a.a.get("/user/getAllUsersWithFullInfo").then((function(e){return e.data}),(function(e){return e}))}};t.a=r},463:function(e,t,n){"use strict";n.r(t);var a=n(14),r=n(21),o=n(312),c=n(0),s=n.n(c),l=n(18),i=n(296),d=n(338),u=n(287),b=n(299),j=n(462),f=n(473),m=n(298),p=n(474),h=n(469),g=n(464),O=n(289),x=n(419),v=n(292),C=n(302),y=n(367),S=n(400),N=n.n(S),P=n(326),k=n.n(P),A=n(336),I=n.n(A),w=n(401),F=n.n(w),R=n(402),E=n.n(R),z=n(403),T=n.n(z),U=n(404),L=n.n(U),W=n(405),B=n.n(W),M=n(406),H=n.n(M),D=n(407),V=n.n(D),G=n(408),Y=n.n(G),_=n(108),q=n(368),Z=n(369),J=n(420),X=n(294),K=n(297),Q=n(399),$=n(309),ee=n(40),te=n(77),ne=n.p+"static/media/SelectedPlan-en.85b85fc0.png",ae=n.p+"static/media/SelectedPlan-it.a09948bf.png",re=n.p+"static/media/SelectedPlan-fr.749a5b1e.png",oe=n(324),ce=n(57),se=n(76),le=n(1),ie=Object(u.a)((function(e){return{section:{},cardHeader:{paddingTop:e.spacing(3)},cardHeaderActive:{},cardHeaderTest:{paddingBottom:0},cardTest:{color:"#bb571f",backgroundColor:"#ffde92",borderRadius:5,fontSize:14,fontWeight:"bold",padding:2,paddingLeft:7,paddingRight:7},card:{transition:"box-shadow .3s",borderRadius:10,border:"1px solid #ccc","&:hover":{boxShadow:"10px 10px 30px rgba(32, 32, 132, .5)"}},cardActive:{backgroundColor:"#e0e8ff"},cardActiveImage:{position:"absolute",marginLeft:50,marginTop:-20,maxWidth:80,transform:"rotate(15deg)",opacity:.6,zIndex:999},cardHr:{border:"1px solid #eee"}}})),de=function(e){var t,n;console.log("Pricing - props:",e);var r=ie(),o=Object(i.a)().t,l=Object(_.b)().showModal,d=s.a.useState(!1),u=Object(a.a)(d,2),b=u[0],j=u[1],f=Object(c.useState)([]),p=Object(a.a)(f,2),h=p[0],g=p[1];Object(c.useEffect)((function(){oe.a.getAllPlans().then((function(e){g(e.data)}),(function(e){te.b.error(Object(se.g)(e))}))}),[g]);var O=function(t){return e.currentPlan.name===t.name},x=Object(c.useState)(Object(ce.a)(ee.a)),S=Object(a.a)(x,1)[0],N=null;switch(S){case"en":default:N=ne;break;case"it":N=ae;break;case"fr":N=re}return Object(le.jsx)("section",{className:r.section,children:Object(le.jsx)(C.a,{children:Object(le.jsxs)(y.a,{py:0,textAlign:"center",children:[Object(le.jsx)(y.a,{mb:0,children:Object(le.jsxs)(C.a,{maxWidth:"lg",children:[Object(le.jsx)(m.a,{variant:"h3",component:"h2",gutterBottom:!0,children:Object(le.jsx)(m.a,{variant:"h6",component:"span",color:"primary",children:o("Choose the plan which best suits your needs")})}),"undefined"!==typeof(null===(t=h[0])||void 0===t?void 0:t.pricePerMonth)&&"undefined"!==typeof(null===(n=h[0])||void 0===n?void 0:n.pricePerYear)&&Object(le.jsxs)("div",{children:[Object(le.jsx)(m.a,{variant:"subtitle1",component:"span",children:o("per year")}),Object(le.jsxs)("span",{children:["\xa0",Object(le.jsx)(Q.a,{name:"checkbox",color:"primary",checked:b,onChange:function(e){j(e.target.checked)}}),"\xa0"]}),Object(le.jsx)(m.a,{variant:"subtitle1",component:"span",children:o("per month")})]})]})}),Object(le.jsx)(v.a,{container:!0,spacing:3,children:h.map((function(t,n){return console.log("P:",t),Object(le.jsxs)(v.a,{item:!0,xs:12,md:parseInt(h.length?12/h.length:12),children:[O(t)&&Object(le.jsx)("img",{className:r.cardActiveImage,src:N,alt:o("Selected plan stamp")}),Object(le.jsxs)(q.a,{variant:"outlined",className:[r.card,O(t)?r.cardActive:null].join(" "),children:[Object(le.jsx)(J.a,{title:Object(se.a)(o(t.name)),className:[r.cardHeader,O(t)?r.cardHeaderActive:null].join(" "),titleTypographyProps:(O(t),{})}),"live"!==e.paymentMode?Object(le.jsx)("span",{className:r.cardTest,children:" TEST "}):Object(le.jsx)(le.Fragment,{}),Object(le.jsx)("hr",{className:r.cardHr}),Object(le.jsxs)(Z.a,{children:[Object(le.jsxs)(y.a,{px:1,children:[Object(le.jsxs)(m.a,{variant:"h4",component:"h2",gutterBottom:!0,style:{fontWeight:"bold"},children:[Object(se.b)(t.priceCurrency),b?t.pricePerMonth:t.pricePerYear,Object(le.jsxs)(m.a,{variant:"h6",color:"textSecondary",component:"span",children:[" / ",o(b?"month":"year")]})]}),Object(le.jsx)(m.a,{color:"textSecondary",variant:"subtitle1",component:"p",children:t.cigNumberAllowed===Number.MAX_SAFE_INTEGER?o("Unlimited CIG's"):o("Up to {{cigs}} CIG's",{cigs:t.cigNumberAllowed})}),Object(le.jsx)(m.a,{color:"textSecondary",variant:"subtitle1",component:"div",children:t.supportTypes.map((function(e,t){return Object(le.jsx)("div",{children:o("Support")+" "+o("by")+" "+o(e)},t)}))}),Object(le.jsx)("br",{})]}),Object(le.jsx)(X.a,{variant:"contained",color:"secondary",onClick:function(n){!function(e){l($.a,e)}({title:o("Sure to buy this plan?"),contentText:o("It allows processing of")+" "+(t.cigNumberAllowed===Number.MAX_SAFE_INTEGER?o("unlimited CIG's"):o("up to {{cigs}} CIG's",{cigs:t.cigNumberAllowed})),actions:[{callback:function(){console.log("Clicked first action button"),e.onPlanSelected(n,t)},text:o("Ok"),closeModal:!0},{callback:function(){console.log("Clicked second action button")},text:o("Cancel"),closeModal:!0}]})},disabled:O(t),children:O(t)?o("Active plan"):o("Select plan")}),e.canForcePlan&&Object(le.jsxs)(le.Fragment,{children:[Object(le.jsx)(y.a,{mt:1}),Object(le.jsx)(X.a,{variant:"contained",color:"tertiary",onClick:function(n){e.onPlanForced(n,t.name)},disabled:O(t),children:o("Force plan")})]}),Object(le.jsx)(y.a,{mt:2,children:Object(le.jsx)(K.a,{href:"#",color:"primary",children:Object(le.jsx)("small",{children:o("Learn more")})})})]})]})]},n)}))})]})})})};de.defaultProps={currentPlan:{},onPlanSelected:function(e){return console.log("Selected plan:",e)},canForcePlan:!1,onPlanForced:function(e){return console.log("Forced plan:",e)}};var ue=s.a.memo(de),be=n(45),je=n(106),fe=n(89),me=n.n(fe),pe=n(31),he=function(){var e=Object(je.a)(me.a.mark((function e(){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.a.get("/payment/mode").then((function(e){return e.data}),(function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(je.a)(me.a.mark((function e(t){var n;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.product,e.next=3,pe.a.post("/payment/createCheckoutSession",{product:n}).then((function(e){return console.log("CCS - res:",e),e.data}),(function(e){return console.log("CCS - err:",e),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe={mode:he,createCheckoutSession:ge},xe=n(47),ve=n(319),Ce=n(20),ye=n.n(Ce),Se=["children","value","index"],Ne=Object(u.a)((function(e){return function(e){return{root:{flexGrow:1},avatar:{backgroundColor:e.palette.success.main},columnLeft:{marginLeft:e.spacing(.2)},columnRight:{marginLeft:"auto",marginRight:e.spacing(.2)},form:{},fieldset:{border:0},fieldsetPersonalData:{color:"#758c75",fontSize:13,border:1,borderStyle:"solid",borderColor:"#758c75",borderRadius:5},fieldsetCompanyData:{color:"#7a7aa5",fontSize:13,border:1,borderStyle:"solid",borderColor:"#7a7aa5",borderRadius:5},fieldsetAddress:{color:"#aaa",fontSize:13,border:1,borderStyle:"solid",borderColor:"#aaa",borderRadius:5},formControlSelectPlan:{minWidth:200},formControlSelectRole:{minWidth:200},tab:{backgroundColor:e.palette.secondary.light},tabIndicator:{backgroundColor:e.palette.secondary.dark,height:1}}}(e)}));function Pe(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function ke(e){var t=e.children,n=e.value,a=e.index,c=Object(o.a)(e,Se);return Object(le.jsx)(m.a,Object(r.a)(Object(r.a)({component:"div",role:"tabpanel",hidden:n!==a,id:"scrollable-auto-tabpanel-".concat(a),"aria-labelledby":"nav-tab-".concat(a)},c),{},{children:Object(le.jsx)(y.a,{p:3,children:t})}))}function Ae(e){var t,n,o,u,m=Ne(),S=Object(l.f)(),P=Object(c.useState)(be.a.getUser()),A=Object(a.a)(P,2),w=A[0],R=A[1],z=Object(c.useState)(!1),U=Object(a.a)(z,2),W=U[0],M=U[1],D=Object(c.useState)(""),G=Object(a.a)(D,2),_=G[0],q=G[1],Z=Object(c.useState)(""),J=Object(a.a)(Z,2),X=J[0],K=J[1],Q=Object(c.useState)(""),$=Object(a.a)(Q,2),ee=$[0],ne=$[1],ae=Object(c.useState)(""),re=Object(a.a)(ae,2),ce=re[0],ie=re[1],de=Object(c.useState)(""),je=Object(a.a)(de,2),fe=je[0],me=je[1],pe=Object(c.useState)({}),he=Object(a.a)(pe,2),ge=he[0],Ce=he[1],Se=Object(c.useState)(""),Ae=Object(a.a)(Se,2),Ie=Ae[0],we=Ae[1],Fe=Object(c.useState)(""),Re=Object(a.a)(Fe,2),Ee=Re[0],ze=Re[1],Te=Object(c.useState)(""),Ue=Object(a.a)(Te,2),Le=Ue[0],We=Ue[1],Be=Object(c.useState)(""),Me=Object(a.a)(Be,2),He=Me[0],De=Me[1],Ve=Object(c.useState)(""),Ge=Object(a.a)(Ve,2),Ye=Ge[0],_e=Ge[1],qe=Object(c.useState)(""),Ze=Object(a.a)(qe,2),Je=Ze[0],Xe=Ze[1],Ke=Object(c.useState)(""),Qe=Object(a.a)(Ke,2),$e=Qe[0],et=Qe[1],tt=Object(c.useState)({}),nt=Object(a.a)(tt,2),at=nt[0],rt=nt[1],ot=Object(c.useState)([]),ct=Object(a.a)(ot,2),st=ct[0],lt=ct[1],it=Object(c.useState)([]),dt=Object(a.a)(it,2),ut=dt[0],bt=dt[1],jt=Object(c.useState)([]),ft=Object(a.a)(jt,2),mt=ft[0],pt=ft[1],ht=Object(c.useState)({}),gt=Object(a.a)(ht,2),Ot=gt[0],xt=gt[1],vt=Object(i.a)().t,Ct=s.a.useState(null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&null!==(n=t.state)&&void 0!==n&&n.tabValue?null===e||void 0===e||null===(o=e.location)||void 0===o||null===(u=o.state)||void 0===u?void 0:u.tabValue:0),yt=Object(a.a)(Ct,2),St=yt[0],Nt=yt[1],Pt=s.a.useState(!1),kt=Object(a.a)(Pt,2),At=kt[0],It=kt[1],wt=s.a.useState(!1),Ft=Object(a.a)(wt,2),Rt=Ft[0],Et=Ft[1],zt=s.a.useState(!1),Tt=Object(a.a)(zt,2),Ut=Tt[0],Lt=Tt[1];Object(d.a)((function(e){(At||Rt||Ut)&&e.preventDefault()})),Object(c.useEffect)((function(){console.log("useeffect block");var e=S.block((function(e,t){return!(At||Rt||Ut)||window.confirm(vt("Are you sure to ignore unsaved data?"))}));return function(){e()}}),[At,Rt,Ut,S,vt]),Object(c.useEffect)((function(){var e,t,n,a,r,o,c,s,l,i,d,u,b,j,f,m,p,h;(console.log("useeffect profile:",W),W)&&(q(null!==(e=W.email)&&void 0!==e?e:""),K(null!==(t=W.firstName)&&void 0!==t?t:""),ne(null!==(n=W.lastName)&&void 0!==n?n:""),ie(null!==(a=W.fiscalCode)&&void 0!==a?a:""),me(null!==(r=W.businessName)&&void 0!==r?r:""),we(null!==(o=null===(c=W.address)||void 0===c?void 0:c.street)&&void 0!==o?o:""),ze(null!==(s=null===(l=W.address)||void 0===l?void 0:l.streetNo)&&void 0!==s?s:""),We(null!==(i=null===(d=W.address)||void 0===d?void 0:d.city)&&void 0!==i?i:""),De(null!==(u=null===(b=W.address)||void 0===b?void 0:b.province)&&void 0!==u?u:""),_e(null!==(j=null===(f=W.address)||void 0===f?void 0:f.zip)&&void 0!==j?j:""),Xe(null!==(m=null===(p=W.address)||void 0===p?void 0:p.country)&&void 0!==m?m:""),rt(null!==(h=W.plan)&&void 0!==h?h:{name:"free"}),bt(W.roles?W.roles.map((function(e){return e.name})):[]),It(!1),Et(!1),Lt(!1))}),[W]),Object(c.useEffect)((function(){console.log("useeffect user.id"),null!==w&&void 0!==w&&w.id||(te.b.error(vt("User must be authenticated")),S.goBack())}),[null===w||void 0===w?void 0:w.id,S,vt]),Object(c.useEffect)((function(){console.log("useeffect getProfile"),oe.a.getProfile().then((function(e){if(e instanceof Error)return console.error("getProfile error:",e),xt({code:e.message});M(e.user)})),oe.a.getAllPlans().then((function(e){if(e instanceof Error)return console.error("getAllPlans error:",e),xt({code:e.message});console.log("plans got successfully:",e),lt(e.data)})),oe.a.getAllRoles().then((function(e){if(e instanceof Error)return console.error("getAllRoles error:",e),xt({code:e.message});console.log("roles got successfully:",e),pt(e.map((function(e){return e.name})))})),Oe.mode().then((function(e){if(e instanceof Error)return console.error("mode error:",e),xt({code:e.message});console.log("mode:",e),et(e.mode)}))}),[null===w||void 0===w?void 0:w.id]),Object(c.useEffect)((function(){Ce({street:Ie,streetNo:Ee,city:Le,province:He,zip:Ye,country:Je})}),[Ie,Ee,Le,He,Ye,Je]);var Wt=function(){var e;return null===w||void 0===w||null===(e=w.roles)||void 0===e?void 0:e.includes("admin")},Bt=function(){var e;return null===w||void 0===w||null===(e=w.roles)||void 0===e?void 0:e.includes("admin")};return Object(le.jsxs)("div",{className:m.root,children:[Object(le.jsxs)(C.a,{maxWidth:"sm",children:[Object(le.jsx)(y.a,{m:1}),Object(le.jsx)(v.a,{container:!0,justifyContent:"center",children:Object(le.jsx)(x.a,{className:m.avatar,children:Object(le.jsx)(N.a,{})})}),Object(le.jsx)(y.a,{m:3}),Object(le.jsx)(b.a,{position:"static",children:Object(le.jsxs)(j.a,{value:St,onChange:function(e,t){Nt(t)},variant:"standard","aria-label":"tabs for user's personal profile",classes:{indicator:m.tabIndicator},className:m.tab,children:[Object(le.jsx)(f.a,Object(r.a)({label:vt("Your profile")},Pe(0))),Object(le.jsx)(f.a,Object(r.a)({label:vt("Your plan")},Pe(1))),Object(le.jsx)(f.a,Object(r.a)({label:vt("Your role(s)")},Pe(2)))]})})]}),Object(le.jsxs)(C.a,{maxWidth:1===St?"md":"sm",children:[0===St&&Object(le.jsx)(ke,{value:St,index:0,children:Object(le.jsx)("form",{name:"form",className:m.form,noValidate:!0,autoComplete:"off",children:Object(le.jsxs)("fieldset",{className:m.fieldset,children:[Object(le.jsx)(y.a,{m:3}),Object(le.jsxs)("fieldset",{className:m.fieldsetPersonalData,children:[Object(le.jsx)("legend",{children:vt("Personal data")}),Object(le.jsx)(v.a,{item:!0,xs:12,children:Object(le.jsx)(ve.c,{id:"email",value:_,onChange:function(e){It(!0),q(e)},placeholder:vt("Email"),startAdornmentIcon:Object(le.jsx)(I.a,{}),error:Ot.email,autoFocus:!0})}),Object(le.jsxs)(v.a,{container:!0,direction:"row",columnSpacing:{xs:1,sm:2,md:3,lg:4},rowSpacing:0,children:[Object(le.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(le.jsx)(ve.c,{id:"firstName",value:X,onChange:function(e){It(!0),K(e)},placeholder:vt("First Name"),startAdornmentIcon:Object(le.jsx)(k.a,{}),error:Ot.firstName})}),Object(le.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(le.jsx)(ve.c,{id:"lastName",value:ee,onChange:function(e){It(!0),ne(e)},placeholder:vt("Last Name"),startAdornmentIcon:Object(le.jsx)(k.a,{}),error:Ot.lastName})})]})]}),Object(le.jsx)(y.a,{m:1}),Object(le.jsxs)("fieldset",{className:m.fieldsetCompanyData,children:[Object(le.jsx)("legend",{children:vt("Company data")}),Object(le.jsxs)(v.a,{container:!0,direction:"row",columnSpacing:{xs:1,sm:2,md:3,lg:4},rowSpacing:0,children:[Object(le.jsx)(v.a,{item:!0,xs:12,children:Object(le.jsx)(ve.c,{id:"fiscalCode",value:ce,onChange:function(e){It(!0),ie(e)},placeholder:vt("Company fiscal code"),startAdornmentIcon:Object(le.jsx)(F.a,{}),error:Ot.fiscalCode})}),Object(le.jsx)(v.a,{item:!0,xs:12,children:Object(le.jsx)(ve.c,{id:"businessName",value:fe,onChange:function(e){It(!0),me(e)},placeholder:vt("Company business name"),startAdornmentIcon:Object(le.jsx)(E.a,{}),error:Ot.businessName})})]}),Object(le.jsx)(y.a,{m:1}),Object(le.jsxs)("fieldset",{className:m.fieldsetAddress,children:[Object(le.jsx)("legend",{children:vt("Address")}),Object(le.jsxs)(v.a,{container:!0,direction:"row",columnSpacing:{xs:1,sm:2,md:3,lg:4},rowSpacing:0,children:[Object(le.jsx)(v.a,{item:!0,xs:12,sm:8,children:Object(le.jsx)(ve.c,{id:"addressStreet",value:Ie,onChange:function(e){It(!0),we(e)},placeholder:vt("Street"),startAdornmentIcon:Object(le.jsx)(T.a,{}),error:Ot.addressStreet})}),Object(le.jsx)(v.a,{item:!0,xs:12,sm:4,children:Object(le.jsx)(ve.c,{id:"addressStreetNo",value:Ee,onChange:function(e){It(!0),ze(e)},placeholder:vt("N\xb0"),startAdornmentIcon:Object(le.jsx)(L.a,{}),error:Ot.addressStreetNo})}),Object(le.jsx)(v.a,{item:!0,xs:12,children:Object(le.jsx)(ve.c,{id:"addressCity",value:Le,onChange:function(e){It(!0),We(e)},placeholder:vt("City"),startAdornmentIcon:Object(le.jsx)(B.a,{}),error:Ot.addressCity})}),Object(le.jsx)(v.a,{item:!0,xs:12,sm:7,children:Object(le.jsx)(ve.c,{id:"addressProvince",value:He,onChange:function(e){It(!0),De(e)},placeholder:vt("Province"),startAdornmentIcon:Object(le.jsx)(H.a,{}),error:Ot.addressProvince})}),Object(le.jsx)(v.a,{item:!0,xs:12,sm:5,children:Object(le.jsx)(ve.c,{id:"addressZip",value:Ye,onChange:function(e){It(!0),_e(e)},placeholder:vt("ZIP"),startAdornmentIcon:Object(le.jsx)(V.a,{}),error:Ot.addressZip})}),Object(le.jsx)(v.a,{item:!0,xs:12,children:Object(le.jsx)(ve.c,{id:"addressCountry",value:Je,onChange:function(e){It(!0),Xe(e)},placeholder:vt("Country"),startAdornmentIcon:Object(le.jsx)(Y.a,{}),error:Ot.addressCountry})})]})]})]})]})})}),1===St&&Object(le.jsx)(ke,{value:St,index:1,children:Object(le.jsx)("form",{className:m.form,noValidate:!0,autoComplete:"off",children:Object(le.jsx)("fieldset",{className:m.fieldset,children:Object(le.jsx)(ue,{currentPlan:at,onPlanSelected:function(e,t){var n;n=t,Oe.createCheckoutSession({product:n.name}).then((function(e){var t;if(console.log("createCheckoutSession got successfully:",e),null===e||void 0===e||null===(t=e.session)||void 0===t||!t.url)return te.b.error(vt("Sorry, could not get the payment page"));window.location=e.session.url}),(function(e){console.error("createCheckoutSession error:",e),te.b.error(Object(se.g)(e))}))},canForcePlan:Bt(),onPlanForced:function(e,t){if(Bt()){var n=st.find((function(e){return e.name===t}));w.plan=n,R(w),be.a.setUser(w),oe.a.updatePlan({plan:n.name}).then((function(e){oe.a.getAllPlans().then((function(e){console.log("*** forcePlan result OK (user?):",e),xe.a.dispatch("plan-change"),te.b.success(vt("Plan forced successfully")),console.log("useeffect getAllPlans"),console.log("plans got successfully:",e),lt(e.data);var n=e.data.find((function(e){return e.name===t}));w.plan=n,R(w),be.a.setUser(w),window.location.reload()}),(function(e){console.error("getAllPlans error:",e)}))}))}},paymentMode:$e})})})}),2===St&&Object(le.jsx)(ke,{value:St,index:2,children:Object(le.jsx)("form",{className:m.form,noValidate:!0,autoComplete:"off",children:Object(le.jsxs)("fieldset",{className:m.fieldset,children:[Object(le.jsx)(y.a,{m:3}),Object(le.jsx)(v.a,{item:!0,xs:12,children:Object(le.jsxs)(p.a,{variant:"outlined",className:m.formControlSelectRole,children:[Object(le.jsx)(h.a,{id:"roles-label",children:vt("Role(s)")}),Object(le.jsx)(g.a,{labelId:"roles-label",id:"roles",multiple:!0,value:ut,onChange:function(e){Et(!0),bt(e.target.value)},label:vt("Role(s)"),disabled:!Wt(),children:mt.map((function(e,t){return Object(le.jsx)(O.a,{value:e,children:e},t)}))})]})})]})})})]}),0===St&&Object(le.jsx)(v.a,{container:!0,justifyContent:"center",children:Object(le.jsx)(ve.a,{fullWidth:!1,className:"buttonSecondary",autoFocus:!0,onClick:function(e){e.preventDefault(),xt({}),oe.a.updateProfile({email:_,firstName:X,lastName:ee,fiscalCode:ce,businessName:fe,address:ge,roles:ut}).then((function(e){if(e instanceof Error)return console.error("profileUpdate error:",e),te.b.warn(Object(se.g)(e)),xt({code:e.message});It(!1),te.b.success(vt("Profile updated successfully"))}))},children:vt("Update")})}),2===St&&Wt()&&Object(le.jsx)(v.a,{container:!0,justifyContent:"center",children:Object(le.jsx)(ve.a,{fullWidth:!1,className:"buttonSecondary",autoFocus:!0,onClick:function(e){w.roles=String(ut).split(","),console.log("USER.ROLES:",w.roles,typeof w.roles),w.roles&&w.roles.length&&!w.roles.every((function(e){return""===e}))||(w.roles=ye.a.api.rolesNamesDefault,bt(w.roles),console.log("USER.ROLES DEFAULTS TO:",w.roles,typeof w.roles)),console.log("*** USER:",w),R(w),be.a.setUser(w),oe.a.updateRoles({roles:w.roles}).then((function(e){if(e instanceof Error)return console.error("profileUpdate error:",e),te.b.error(Object(se.g)(e)),xt({code:e.message});bt(w.roles),Et(!1),xe.a.dispatch("roles-change"),te.b.success(vt("Roles updated successfully"))}))},children:vt("Update")})}),Object(le.jsx)(y.a,{m:1})]})}Ae.defaultProps={tabValue:0};t.default=s.a.memo(Ae)}}]);
//# sourceMappingURL=14.f61dd0b7.chunk.js.map