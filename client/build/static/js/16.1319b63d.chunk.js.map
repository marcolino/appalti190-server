{"version":3,"sources":["components/TabsComponents.js","hooks/useWindowSize.js","components/FlexibleDialog.js","services/JobService.js","components/Tab01Start.js","components/Tab02DownloadTemplate.js","components/Tab03FillData.js","components/DragNDrop.js","components/Tab04Upload.js","components/Tab05Produce.js","components/Tab06DownloadDataset.js","components/Tab07Publish.js","components/Tab08Validation.js","components/Tab09Finished.js","components/TabsPanel.js","components/Home.js"],"names":["useStyles","makeStyles","theme","paragraph","fontSize","paragraphSmall","centered","display","justifyContent","alignItems","justified","textAlign","box","boxLeft","boxRight","sup","scrollableContainer","flexDirection","marginTop","minHeight","scrollable","height","overflowY","paddingLeft","paddingRight","attention","backgroundColor","palette","main","color","fontWeight","TabContainer","React","memo","props","children","defaultProps","TabBodyScrollable","classes","size","useState","width","window","innerWidth","innerHeight","windowSize","setWindowSize","useEffect","handleResize","addEventListener","removeEventListener","useWindowSize","className","style","margin","Math","max","config","ui","toolbarHeight","tabbarHeight","footerHeight","TabTitle","TabParagraph","Box","component","mb","Typography","small","class","TabBox","sx","mx","xs","md","p","border","borderColor","mode","borderRadius","TabResetButton","m","reset","Button","variant","title","onClick","disabled","isDisabled","TabPrevButton","onPrev","prevIsEnabled","TabNextButton","onNext","nextIsEnabled","TabTooltip","Tooltip","placement","anchor","FlexibleDialog","contentText","actions","onBackdropClick","onClose","event","reason","map","action","index","callback","closeModal","autoFocus","textTransform","text","get","a","TokenService","getUser","api","JobService","set","job","put","upload","file","formData","FormData","append","post","headers","transformXls2Xml","filePath","validateXml","transform","outcomeCheck","anno","codiceFiscaleAmministrazione","outcomeFailureDetails","urlExistenceAndMatch","url","fileToMatch","console","log","getPlans","Tab01Start","t","useTranslation","href","target","goto","Tab02DownloadTemplate","history","useHistory","templateDownloaded","setNextIsEnabled","showModal","useModal","userIsAuthenticated","AuthService","getCurrentUser","openDialog","tabId","push","downloadLocalUrl","data","templateDownloadUrl","setJob","Grid","container","item","ul","paddingHorizontal","Tab03FillData","baseStyle","flex","padding","borderWidth","borderStyle","outline","transition","focusedStyle","acceptStyle","rejectStyle","disabledStyle","fontStyle","DragNDrop","drop","accept","useDropzone","onDrop","getRootProps","isFocused","isDragAccept","isDragReject","isDragActive","useMemo","getRootPropsDisabled","onBlur","onDragEnter","onDragLeave","onDragOver","onFocus","onKeyDown","getRootPropsActual","Tab04Upload","userIsAuthenticatedCallback","useCallback","fileSet","fileReset","fileValidate","type","split","match","fileType","fileUpload","then","result","error","errorMessage","toast","fileSelect","selectedFile","acceptedFiles","originalname","accordionRoot","danger","dark","Tab05Produce","user","useAxiosLoader","loading","info","setInfo","code","truncatedDueToPlanLimit","planUpgradeDeclined","planName","plan","name","cigCount","planRequired","tabValue","cigsCountAllowedllowed","path","response","allErrors","length","reclaimInfo","metadati","titolo","annoRiferimento","rownum","importoAggiudicazioneTotale","currency","default","importoSommeLiquidateTotale","allWarnings","transformWarnings","warnings","validateXmlWarnings","concat","transformErrors","errors","validateXmlErrors","align","cigs","outputFile","Object","keys","maxHeight","spacing","direction","justify","Card","CardContent","key","message","Accordion","disableGutters","root","AccordionSummary","expandIcon","id","AccordionDetails","borderTop","paddingTop","warning","Tab06DownloadDataset","datasetDownloaded","outputUrl","downloadRemoteUrl","Tab07Publish","undefined","forceVerifyPublished","setForceVerifyPublished","publishUrlFile","urlFile","datasetIsPublished","published","datasetIsPublishedAsIs","publishedAsIs","outcome","Tab08Validation","esitoUltimoTentativoAccessoUrl","forceCheckValidated","setForceCheckValidated","header","codiceFiscaleStrutturaProponente","tentativiAccessoUrlLast","tentativiAccessoUrl","listaAccessoRisorsaLast","listaAccessoRisorsa","marginLeft","dataUltimoTentativoAccessoUrl","dateToLocaleDate","esitoComunicazione","codice","descrizione","dettaglio","esito","xmlValido","dettaglioValidazioneXml","esitoAccessoRisorsa","Tab09Finished","referenceLawName","year","TabPanel","value","other","role","hidden","a11yProps","StyledTab","withStyles","opacity","Tab","flexGrow","tab","secondary","light","tabIndicator","TabsPanel","getJob","changeTab","where","toLowerCase","redirect","remove","AppBar","elevation","position","top","Paper","square","Tabs","scrollButtons","onChange","userCanForceTabChange","indicator","label","home","Home"],"mappings":"shBAsBMA,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACtCC,UAAW,CACRC,SAAU,SAEbC,eAAgB,CACbD,SAAU,SAEZE,SAAU,CACRC,QAAS,OACTC,eAAgB,SAChBC,WAAY,UAEdC,UAAW,CACTC,UAAW,WAEbC,IAAK,CACHL,QAAS,QAEXM,QAAS,CACPL,eAAgB,cAElBM,SAAU,CACRN,eAAgB,YAElBO,IAAK,CACHX,SAAU,SAEZY,oBAAqB,CACnBT,QAAS,OACTU,cAAe,SACfC,UAAW,MACXC,UAAW,OAGbC,WAAY,CACVC,OAAQ,OACRC,UAAW,OACXC,YAAa,GACbC,aAAc,GACdL,UAAW,OAEbM,UAAW,CACTC,gBAAiBxB,EAAMyB,QAAQF,UAAUG,KACzCC,MAAO,QACPC,WAAY,YAIVC,EAAeC,IAAMC,MAAK,SAAAC,GAC9B,OACE,8BACGA,EAAMC,cAMbJ,EAAaK,aAAe,GAG5B,IAAMC,EAAoBL,IAAMC,MAAK,SAAAC,GACnC,IAAMI,EAAUtC,IAQVuC,ECzFO,WACb,MAAoCC,mBAAS,CAC3CC,MAAOC,OAAOC,WACdtB,OAAQqB,OAAOE,cAFjB,mBAAOC,EAAP,KAAmBC,EAAnB,KAgBA,OAZAC,qBAAU,WACR,SAASC,IACPF,EAAc,CACZL,MAAOC,OAAOC,WACdtB,OAAQqB,OAAOE,cAMnB,OAFAF,OAAOO,iBAAiB,SAAUD,GAClCA,IACO,kBAAMN,OAAOQ,oBAAoB,SAAUF,MACjD,IACIH,EDwEMM,GAEb,OACE,qBAAKC,UAAWd,EAAQtB,oBAAxB,SACE,qBAAKoC,UAAWd,EAAQlB,WAAYiC,MAAO,CAACC,OAAQ,OAAQb,MAAO,MAAOpB,OAAQkC,KAAKC,IAAI,IAAKjB,EAAKlB,OAASoC,IAAOC,GAAGC,cAAgBF,IAAOC,GAAGE,aAAeH,IAAOC,GAAGG,eAA3K,SACG3B,EAAMC,gBAOfE,EAAkBD,aAAe,GAGjC,IAAM0B,EAAW9B,IAAMC,MAAK,SAAAC,GAC1B,IAAMI,EAAUtC,IAChB,OACE,qBAAKoD,UAAWd,EAAQhC,SAAxB,SACE,6BAAK4B,EAAMC,gBAMjB2B,EAAS1B,aAAe,GAGxB,IAAM2B,EAAe/B,IAAMC,MAAK,SAAAC,GAC9B,IAAMI,EAAUtC,IAChB,OACE,cAACgE,EAAA,EAAD,CAAKC,UAAU,MAAMC,GAAI,EAAzB,SACE,cAACC,EAAA,EAAD,CAAYF,UAAU,MAAMb,UAAS,UAAKd,EAAQnC,UAAb,YAA0BmC,EAAQ5B,UAAlC,YAA+CwB,EAAMkC,MAAQ9B,EAAQjC,eAAiB,KAAtF,YAA8F6B,EAAMmC,OAAzI,SACGnC,EAAMC,gBAQf4B,EAAa3B,aAAe,CAC1BiC,MAAO,MAGT,IAAMC,EAAStC,IAAMC,MAAK,SAAAC,GAExB,OACE,cAAC8B,EAAA,EAAD,CACEO,GAAI,CACFC,GAAI,CAAEC,GAAI,KAAMC,GAAI,OACpBR,GAAI,MACJS,EAAG,EACHC,OAAQ,YACRC,YAAa,SAAC3E,GAAD,MACY,SAAvBA,EAAMyB,QAAQmD,KAAkB,WAAa,YAC/CC,aAAc,EACd3E,SAAU,MACV0B,WAAY,OACZnB,UAAW,UAXf,SAcGuB,EAAMC,cAObmC,EAAOlC,aAAe,CACpBiC,MAAO,MAGT,IAAMW,EAAiBhD,IAAMC,MAAK,SAAAC,GAChC,IAAMI,EAAUtC,IAChB,OACE,cAACgE,EAAA,EAAD,CACEC,UAAU,OACVgB,EAAG,EACH7B,UAAS,UAAKd,EAAQ4C,OAHxB,SAKE,cAACC,EAAA,EAAD,CACEC,QAAQ,YACRC,MAAOnD,EAAMmD,MACbxD,MAAM,YACNuB,UAAWd,EAAQb,UACnB6D,QAASpD,EAAMoD,QACfC,SAAUrD,EAAMsD,WANlB,SAQGtD,EAAMC,gBASf6C,EAAe5C,aAAe,CAC5BoD,YAAY,GAGd,IAAMC,EAAgBzD,IAAMC,MAAK,SAAAC,GAC/B,IAAMI,EAAUtC,IAChB,OACE,cAACgE,EAAA,EAAD,CACEC,UAAU,OACVgB,EAAG,EACH7B,UAAS,UAAKd,EAAQ1B,IAAb,YAAoB0B,EAAQzB,SAHvC,SAKE,cAACsE,EAAA,EAAD,CACEC,QAAQ,YACRvD,MAAM,YACNyD,QAASpD,EAAMwD,OACfH,UAAWrD,EAAMyD,cAJnB,SAMGzD,EAAMC,gBASfsD,EAAcrD,aAAe,GAG7B,IAAMwD,EAAgB5D,IAAMC,MAAK,SAAAC,GAC/B,IAAMI,EAAUtC,IAChB,OACE,cAACgE,EAAA,EAAD,CACEC,UAAU,OACVgB,EAAG,EACH7B,UAAS,UAAKd,EAAQ1B,IAAb,YAAoB0B,EAAQxB,UAHvC,SAKE,cAACqE,EAAA,EAAD,CACEC,QAAQ,YACRvD,MAAM,YACNyD,QAASpD,EAAM2D,OACfN,UAAWrD,EAAM4D,cAJnB,SAMG5D,EAAMC,gBASfyD,EAAcxD,aAAe,GAG7B,IAAM2D,EAAa/D,IAAMC,MAAK,SAAAC,GAC5B,IAAMI,EAAUtC,IAChB,OACE,cAACgG,EAAA,EAAD,CACEX,MAAOnD,EAAMmD,MACbY,UAAU,MAFZ,SAIE,qBAAK7C,UAAWd,EAAQvB,IAAxB,SAA8BmB,EAAMgE,cAQ1CH,EAAW3D,aAAe,CACxB8D,OAAQ,M,uKEhQJC,EAAiB,SAAC,GAAD,IAAGd,EAAH,EAAGA,MAAOe,EAAV,EAAUA,YAAaC,EAAvB,EAAuBA,QAAYnE,EAAnC,wBACrB,eAAC,IAAD,2BACMA,GADN,IAEEoE,gBAAiB,aAGjB,kBAAiBjB,EACjBkB,QAAS,SAACC,EAAOC,KANnB,UAQE,cAAC,IAAD,UAAcpB,IACd,cAAC,IAAD,UACE,cAAC,IAAD,UAAoBe,MAEtB,cAAC,IAAD,UACGC,EAAQK,KAAI,SAACC,EAAQC,GAAT,OACX,cAAC,IAAD,CAEEtB,QAAS,WACHqB,EAAOE,UAAUF,EAAOE,WACxBF,EAAOG,YAAY5E,EAAMqE,WAE/BnB,QAA4B,YAAnBuB,EAAOvB,QAAwB,YAAiC,cAAnBuB,EAAOvB,QAA0B,WAAa,YACpG2B,UAAW7E,EACXmB,MAAO,CAAC2D,cAAe,QARzB,SAUGL,EAAOM,MATHL,aAgCfT,EAAe/D,aAAe,CAC5BiD,MAAO,GACPe,YAAa,GACbC,QAAS,CACP,CACEY,KAAM,KACNH,YAAY,EACZD,SAAU,aACVzB,QAAS,UACT2B,WAAW,KAKF/E,QAAMC,KAAKkE,I,+EC/DpBe,EAAG,uCAAG,sBAAAC,EAAA,yDAWGC,IAAaC,UAXhB,yCAaD,MAbC,uBAeGC,IAAIJ,IAAI,YAfX,mFAAH,qDA6GHK,EAAa,CACjBL,MACAM,IA5FU,SAACC,GAEX,OADaL,IAAaC,UAKnBC,IAAII,IAAI,WAAY,CAACD,QAHnB,MA0FTE,OAnFa,SAACC,GACd,IAAMC,EAAW,IAAIC,SAGrB,OAFAD,EAASE,OAAO,OAAQH,GAEjBN,IAAIU,KAAK,cAAeH,EAAU,CACvCI,QAAS,CACP,eAAgB,0BA8EpBC,iBAxEuB,SAACC,GACxB,OAAOb,IAAIU,KAAK,kCAAmC,CACjDG,cAuEFC,YAlEkB,SAACC,GACnB,OAAOf,IAAIU,KAAK,8BAA+B,CAC7CK,eAiEFC,aAvDmB,SAACC,EAAMC,GAC1B,OAAOlB,IAAIU,KAAK,wDACd,CACEO,OACAC,kCAoDJC,sBA9C4B,SAACF,EAAMC,GACnC,OAAOlB,IAAIU,KACT,+DACA,CACEO,OACAC,kCA0CJE,qBApC2B,SAACC,EAAKC,GAEjC,OADFC,QAAQC,IAAI,oCAAqCH,EAAKC,GAC7CtB,IAAIU,KACT,4CACA,CACEW,MACAC,iBAgCJG,SAhBe,WACf,OAAOzB,IAAIJ,IACT,mBAiBWK,O,uMCzHf,SAASyB,EAAW9G,GAClB,IAAQ+G,EAAMC,cAAND,EACR,EAA0BzG,oBAAS,GAA3BsD,EAAR,oBAMA,OACE,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,UACGmD,EAAE,cAEL,eAAC,IAAD,WACGA,EAAE,2DADL,IACkE,IAChE,mBAAGE,KAAK,+EAA+EC,OAAO,WAA9F,SACGH,EAAE,eAEJ,IALH,IAKSA,EAAE,yCALX,OAOA,eAAC,IAAD,WACGA,EAAE,kGADL,OAGA,eAAC,IAAD,WACGA,EAAE,4DACH,cAAC,IAAD,CACE5D,MAAO4D,EAAE,yDAA2D,MAGrE,IANH,IAMSA,EAAE,6FANX,OAQA,eAAC,IAAD,WACGA,EAAE,mIADL,OAGA,eAAC,IAAD,WACGA,EAAE,8IADL,OAGA,eAAC,IAAD,WACGA,EAAE,gFADL,IAEGA,EAAE,wIAFL,OAIA,eAAC,IAAD,WACGA,EAAE,6HADL,OAGA,eAAC,IAAD,WACGA,EAAE,qEADL,IAEGA,EAAE,iGAFL,OAIA,eAAC,IAAD,WACGA,EAAE,0FADL,IAEGA,EAAE,qHAFL,IAGGA,EAAE,uDAHL,UAOF,8BACE,cAAC,IAAD,CAAepD,OArDN,WACb3D,EAAMmH,KAAK,SAoDwBvD,cAAeA,EAA9C,SACGmD,EAAE,mBASbD,EAAW5G,aAAe,GAGXJ,UAAMC,KAAK+G,G,6EC3D1B,SAASM,EAAsBpH,GAC7B,IAAQ+G,EAAMC,cAAND,EACFM,EAAUC,cAChB,EAA2BhH,oBAAS,GAA5BmD,EAAR,oBACA,EAA4CnD,oBAAS,8CAAMN,EAAMuF,WAAZ,aAAM,EAAWgC,0BAAjB,YAArD,mBAAQ3D,EAAR,KAAuB4D,EAAvB,KAEQC,EAAcC,cAAdD,UAWFE,EAAsB,WAC1B,QAAKC,IAAYC,mBAXA,SAAC7H,GAAUyH,EAAUxD,IAAgBjE,GAYpD8H,CAAW,CACT3E,MAAO4D,EAAE,6BACT7C,YAAa6C,EAAE,2CACf5C,QAAS,CACP,CACEY,KAAMgC,EAAE,SACRnC,YAAY,EACZC,WAAW,EACXF,SAAU,WACRO,IAAaI,IAAI,WAAYtF,EAAM+H,OACnCV,EAAQW,KAAK,aAGjB,CACEjD,KAAMgC,EAAE,YACRnC,YAAY,EACZD,SAAU,WACRO,IAAaI,IAAI,WAAYtF,EAAM+H,OACnCV,EAAQW,KAAK,aAGjB,CACEjD,KAAMgC,EAAE,UACRnC,YAAY,EACZD,SAAU,kBAAM3E,EAAMmH,KAAK,cAI1B,IAaX,OACE,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,UACGJ,EAAE,cAEL,eAAC,IAAD,WACGA,EAAE,0EADL,OAGA,cAAC,IAAD,UACE,eAAC9D,EAAA,EAAD,CAAQG,QAlBG,WACbuE,MACFM,YAAiB1G,IAAO2G,KAAKC,qBAC7BX,GAAiB,GACjBxH,EAAMoI,OAAN,2BAAiBpI,EAAMuF,KAAvB,IAA4BgC,oBAAoB,OAcfrE,QAAQ,YAAYvD,MAAM,WAAvD,UACGoH,EAAE,YADL,kBAYJ,eAACsB,EAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,EAAA,EAAD,CAAME,MAAI,EAAChG,GAAI,EAAf,SACE,cAAC,IAAD,CAAeiB,OA3ER,WACbxD,EAAMmH,KAAK,SA0E0B1D,cAAeA,EAA9C,SACGsD,EAAE,YAGP,cAACsB,EAAA,EAAD,CAAME,MAAI,EAAChG,GAAI,EAAf,SACE,cAAC,IAAD,CAAeoB,OA5ER,WACb3D,EAAMmH,KAAK,SA2E0BvD,cAAeA,EAA9C,SACGmD,EAAE,sBAWfK,EAAsBlH,aAAe,GAGtBJ,UAAMC,KAAKqH,GCjHpBtJ,EAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCwK,GAAI,CACFC,kBAAmB,QAIvB,SAASC,EAAc1I,GACrB,IAAMI,EAAUtC,IAERiJ,EAAMC,cAAND,EACR,EAA0BzG,oBAAS,GAA3BmD,EAAR,oBACA,EAA0BnD,oBAAS,GAA3BsD,EAAR,oBAUA,OACE,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,UACGmD,EAAE,oBAEL,eAAC,IAAD,WACGA,EAAE,0EADL,OAGA,eAAC,IAAD,WACGA,EAAE,oDADL,IAEE,uBACCA,EAAE,mGACH,qBAAI7F,UAAWd,EAAQoI,GAAvB,UACE,+BAAI,4BAAI,qCAAR,IAAiDzB,EAAE,mCACnD,+BAAI,4BAAI,qCAAR,IAAiDA,EAAE,wCACnD,+BAAI,4BAAI,oBAAR,IAAgCA,EAAE,4DAClC,+BAAI,4BAAI,YAAR,IAAwBA,EAAE,uEAG9B,eAAC,IAAD,WACGA,EAAE,oEADL,IAC4E,uBACzEA,EAAE,6DAFL,OAIA,eAAC,IAAD,WACGA,EAAE,8BACH,qBAAI7F,UAAWd,EAAQoI,GAAvB,UACE,+BAAI,4BAAI,QAAR,IAAoBzB,EAAE,gFACtB,+BAAI,4BAAI,YAAR,IAAwBA,EAAE,+BAC1B,+BAAI,4BAAI,sBAAR,IAAkCA,EAAE,+FACpC,+BAAI,4BAAI,uCAAR,IAAmDA,EAAE,+DACrD,+BAAI,4BAAI,6CAAR,IAAyDA,EAAE,gEAC3D,+BAAI,4BAAI,mCAAR,IAA+CA,EAAE,sCACjD,+BAAI,4BAAI,yBAAR,IAAqCA,EAAE,oGACvC,+BAAI,4BAAI,kBAAR,IAA8BA,EAAE,wFAChC,+BAAI,4BAAI,2BAAR,IAAuCA,EAAE,gCACzC,+BAAI,4BAAI,gBAAR,IAA4BA,EAAE,4CAC9B,+BAAI,4BAAI,qBAAR,IAAiCA,EAAE,6CACnC,+BAAI,4BAAI,kCAAR,IAA8CA,EAAE,mDAKtD,eAACsB,EAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,EAAA,EAAD,CAAME,MAAI,EAAChG,GAAI,EAAf,SACE,cAAC,IAAD,CAAeiB,OArDR,WACbxD,EAAMmH,KAAK,SAoD0B1D,cAAeA,EAA9C,SACGsD,EAAE,YAGP,cAACsB,EAAA,EAAD,CAAME,MAAI,EAAChG,GAAI,EAAf,SACE,cAAC,IAAD,CAAeoB,OAtDR,WACb3D,EAAMmH,KAAK,SAqD0BvD,cAAeA,EAA9C,SACGmD,EAAE,sBAWf2B,EAAcxI,aAAe,GAGdJ,UAAMC,KAAK2I,G,0ICxFpBC,EAAY,CAChBC,KAAM,EACNvK,QAAS,OACTU,cAAe,SACfR,WAAY,SACZsK,QAAS,OACTC,YAAa,EACbjG,aAAc,GACdF,YAAa,UACboG,YAAa,SACbvJ,gBAAiB,UACjBG,MAAO,UACPqJ,QAAS,OACTC,WAAY,2BAGRC,EAAe,CACnB1J,gBAAiB,UACjBmD,YAAa,WAGTwG,EAAc,CAClB3J,gBAAiB,aACjBmD,YAAa,aAGTyG,EAAc,CAClB5J,gBAAiB,WACjBmD,YAAa,WAGT0G,EAAgB,CACpB7J,gBAAiB,YACjBmD,YAAa,WACb2G,UAAW,UAGPC,EAAY,SAAC,GAAgC,IAA9BC,EAA6B,EAA7BA,KAAMC,EAAuB,EAAvBA,OAAQpG,EAAe,EAAfA,SACzB0D,EAAMC,cAAND,EACR,EAMI2C,YAAY,CACdC,OAAQH,EACRC,OAAQA,IAPRG,EADF,EACEA,aACAC,EAFF,EAEEA,UACAC,EAHF,EAGEA,aACAC,EAJF,EAIEA,aACAC,EALF,EAKEA,aAMI7I,EAAQ8I,mBAAQ,8BAAC,uCAClBtB,GACCtF,EAAWgG,EAAgBQ,EAAYX,EAAe,IACtD7F,EAAWgG,EAAgBS,EAAeX,EAAc,IACxD9F,EAAWgG,EAAgBU,EAAeX,EAAc,MAC1D,CACFS,EACAC,EACAC,EACA1G,IAGF,EAAqHuG,EAAa,CAACzI,UAAtC+I,GAA7F,EAAO9G,QAAP,EAAgB+G,OAAhB,EAAwBC,YAAxB,EAAqCC,YAArC,EAAkDC,WAAlD,EAA8DX,OAA9D,EAAsEY,QAAtE,EAA+EC,UAA/E,kBACIC,EAAqB,GAOzB,OALEA,EADEpH,EACmB6G,EAEAN,EAAa,CAACzI,UAInC,6CAAKD,UAAU,gBAAmBuJ,GAAlC,aACE,qBAAKvJ,UAAU,cAAf,SAEImC,EACE,4BACG0D,EAAE,mCAGPiD,EACE,mBAAG9I,UAAU,mBAAb,SACG6F,EAAE,oCAGL,mBAAG7F,UAAU,mBAAb,SACG6F,EAAE,kEAcjBwC,EAAUrJ,aAAe,CACvBmD,UAAU,GAGGkG,QC3Ff,SAASmB,EAAY1K,GAAQ,IAAD,cAElB+G,EAAMC,cAAND,EACFM,EAAUC,cAChB,EAA0BhH,oBAAS,GAA3BmD,EAAR,oBACA,EAA4CnD,qBAAU,OAACN,QAAD,IAACA,GAAD,UAACA,EAAOuF,WAAR,QAAC,EAAYG,OAAnE,mBAAQ9B,EAAR,KAAuB4D,EAAvB,KACQC,EAAcC,cAAdD,UAGR,EAAmBnH,mBAAS,CAC1B,OACA,oEACA,6BAHMmJ,EAAR,oBAMM9B,EAAsB,WAC1B,QAAKC,IAAYC,mBATA,SAAC7H,GAAUyH,EAAUxD,IAAgBjE,GAUpD8H,CAAW,CACT3E,MAAO4D,EAAE,6BACT7C,YAAa6C,EAAE,2CACf5C,QAAS,CACP,CACEY,KAAMgC,EAAE,SACRnC,YAAY,EACZC,WAAW,EACXF,SAAU,WACRO,IAAaI,IAAI,WAAYtF,EAAM+H,OACnCV,EAAQW,KAAK,aAGjB,CACEjD,KAAMgC,EAAE,YACRnC,YAAY,EACZD,SAAU,WACRO,IAAaI,IAAI,WAAYtF,EAAM+H,OACnCV,EAAQW,KAAK,aAGjB,CACEjD,KAAMgC,EAAE,UACRnC,YAAY,EACZD,SAAU,kBAAM3E,EAAMmH,KAAK,cAI1B,IAMLwD,EAA8BC,uBAAY,WAAQ,OAAOjD,MAAyB,IAExF9G,qBAAU,WACR8J,MACC,CAACA,IAEJ,IAAME,EAAUD,sBAAW,uCAAC,WAAMlF,GAAN,SAAAT,EAAA,sDAC1BjF,EAAMoI,OAAN,2BAAiBpI,EAAMuF,KAAvB,IAA4BG,UADF,2CAAD,sDAExB,CAAC1F,IAEE8K,EAAYF,sBAAW,sBAAC,4BAAA3F,EAAA,uDAKxBM,EAAM,IACNwC,MAAQ/H,EAAMuF,IAAIwC,MAEtB/H,EAAMoI,OAAO7C,GACbiC,GAAiB,GATW,2CAU3B,CAACxH,IAEE+K,EAAeH,uBAAY,SAAClF,GAAU,IAAD,QAGzC,OACM,OAAJA,QAAI,IAAJA,GAAA,UAAAA,EAAMsF,YAAN,mBAAYC,MAAM,KAAK,UAAvB,SAA2BC,MAAM,0CAAjC,OACAxF,QADA,IACAA,GADA,UACAA,EAAMsF,YADN,iBACA,EAAYC,MAAM,KAAK,UADvB,OACA,EAA2BC,MAAM,aAM5B,KAJEnE,EAAE,+BAAF,KACA,OAAJrB,QAAI,IAAJA,KAAMsF,KAAO,IAAMjE,EAAE,wCAAyC,CAAEoE,SAAUzF,EAAKsF,OAAU,MAI7F,CAACjE,IAEEqE,EAAaR,sBAAW,uCAAC,WAAMlF,GAAN,SAAAT,EAAA,sEACvBI,IAAWI,OAAOC,GAAM2F,MAC5B,SAAAC,GACE3E,QAAQC,IAAI,4BAA6B0E,EAAOpD,KAAKxC,MACrDmF,EAAQS,EAAOpD,KAAKxC,SAEtB,SAAA6F,GACE5E,QAAQ4E,MAAM,gBAAiBA,GAC/BT,IACA9K,EAAMoI,OAAN,2BAAiBpI,EAAMuF,KAAvB,IAA4BG,KAAM,CAAC6F,MAAOC,YAAaD,OACvDE,IAAMF,MAAMC,YAAaD,OAVA,2CAAD,sDAa3B,CAACvL,EAAO6K,EAASC,IAEdY,EAAad,sBAAW,uCAAC,WAAMe,GAAN,SAAA1G,EAAA,0DACzB0G,EADyB,qBAEbZ,EAAaY,GAFA,gBAKzB3L,EAAMoI,OAAN,2BAAiBpI,EAAMuF,KAAvB,IAA4BG,KAAM,QAElC8B,GAAiB,GAPQ,8BAWzBxH,EAAMoI,OAAN,2BAAiBpI,EAAMuF,KAAvB,IAA4BG,KAAMiG,KAXT,UAYnBP,EAAWO,GAZQ,QAazBnE,GAAiB,GAbQ,gCAgB3BiE,IAAMF,MAAMxE,EAAE,iDAGd/G,EAAMoI,OAAN,2BAAiBpI,EAAMuF,KAAvB,IAA4BG,KAAM,QAClC8B,GAAiB,GApBU,4CAAD,sDAsB3B,CAAcxH,EAAOoL,EAAYL,EAAchE,IAG5C4C,EAASiB,uBAAY,SAAAgB,GAGzBjF,QAAQC,IAAI,kBAAmBgF,GAC/BF,EAAWE,EAAc,MACxB,CAACF,IAME/H,EAAM,uCAAG,sBAAAsB,EAAA,sDACbjF,EAAMmH,KAAK,QADE,2CAAH,qDAIZ,OACE,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,UACGJ,EAAE,YAEL,cAAC,IAAD,UACGA,EAAE,6BAGL,sBAAK7F,UAAU,YAAf,UACE,cAAC,EAAD,CACEsI,KAAMG,EACNF,OAAQA,EACRpG,WAAW,OAACrD,QAAD,IAACA,GAAD,UAACA,EAAOuF,WAAR,iBAAC,EAAYG,YAAb,QAAC,EAAkBmG,gBAEhC,uBACA,cAAC,IAAD,WACQ,OAAL7L,QAAK,IAALA,GAAA,UAAAA,EAAOuF,WAAP,mBAAYG,YAAZ,eAAkBmG,eACjB,qCACG9E,EAAE,iBADL,KACwB,mCAAI/G,QAAJ,IAAIA,GAAJ,UAAIA,EAAOuF,WAAX,iBAAI,EAAYG,YAAhB,aAAI,EAAkBmG,eAD9C,SAGE,eAAC,IAAD,CACEzI,QAAS0H,EACT3H,MAAO4D,EAAE,uDAFX,UAGGA,EAAE,UAHL,8BAgBV,eAACsB,EAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,EAAA,EAAD,CAAME,MAAI,EAAChG,GAAI,EAAf,SACE,cAAC,IAAD,CAAeiB,OAhDR,WACbxD,EAAMmH,KAAK,SA+C0B1D,cAAeA,EAA9C,SACGsD,EAAE,YAGP,cAACsB,EAAA,EAAD,CAAME,MAAI,EAAChG,GAAI,EAAf,SACE,cAAC,IAAD,CAAeoB,OAAQA,EAAQC,cAAeA,EAA9C,SACGmD,EAAE,sBAYf2D,EAAYxK,aAAe,GAGZJ,UAAMC,KAAK2K,G,+ECrMpB5M,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrC8N,cAAe,CACb5N,SAAU,SAEZ6N,OAAQ,CACNpM,MAAO3B,EAAMyB,QAAQ8L,MAAMS,KAC3BpM,WAAY,YAMhB,SAASqM,GAAajM,GAAQ,IAAD,4DACnB+G,EAAMC,cAAND,EACF3G,EAAUtC,KACVuJ,EAAUC,cACV4E,GAAOhH,IAAaC,UAC1B,GAAoBgH,eAAZC,GAAR,qBACA,GAA0B9L,mBAAS,IAAnC,qBAAQ+L,GAAR,MAAcC,GAAd,MACA,GAA4ChM,mBAAwC,QAA/B,UAAAN,EAAMuF,WAAN,mBAAWY,iBAAX,eAAsBoG,OAA3E,qBAAQ3I,GAAR,MAAuB4D,GAAvB,MACA,GAAyBlH,oBAAS,GAA1BmD,GAAR,qBACQgE,GAAcC,cAAdD,UAGR5G,qBAAU,WAAO,IAAD,EACY,IAC2B,IACD,cAFpD,UAAIb,EAAMuF,WAAV,OAAI,EAAWY,YACb,UAAInG,EAAMuF,WAAV,iBAAI,EAAWY,iBAAf,OAAI,EAAsBqG,0BACpB,UAACxM,EAAMuF,WAAP,iBAAC,EAAWY,iBAAZ,OAAC,EAAsBsG,qBALd,SAACzM,GAAUyH,GAAUxD,IAAgBjE,GAMhD8H,CAAW,CACT3E,MAAO4D,EAAE,4BACT7C,YACE6C,EAAE,6CAA+C,KACjDA,EAAE,uCAA0C,CAAE2F,SAAQ,OAAER,SAAF,IAAEA,IAAF,UAAEA,GAAMS,YAAR,aAAE,EAAYC,OAAS,KAC7E7F,EAAE,uEAA0E,CAAE8F,SAAQ,UAAE7M,EAAMuF,WAAR,iBAAE,EAAWY,iBAAb,aAAE,EAAsB0G,SAAUH,SAAQ,UAAE1M,EAAMuF,WAAR,iBAAE,EAAWY,iBAAb,iBAAE,EAAsB2G,oBAAxB,aAAE,EAAoCF,OACxKzI,QAAS,CACP,CACEY,KAAMgC,EAAE,gBACRnC,YAAY,EACZC,WAAW,EACXF,SAAU,WACRO,IAAaI,IAAI,WAAYtF,EAAM+H,OACnCV,EAAQW,KAAK,WAAY,CAAE+E,SAAU,MAGzC,CACEhI,KAAMgC,EAAE,yDAA0D,CAAEiG,uBAAsB,OAAEd,SAAF,IAAEA,IAAF,UAAEA,GAAMS,YAAR,aAAE,EAAYK,yBACxGpI,YAAY,EACZD,SAAU,WAAO,IAAD,EACd3E,EAAMoI,OAAN,2BAAiBpI,EAAMuF,KAAvB,IAA4BY,UAAU,2BAAD,QAAC,EAAKnG,EAAMuF,WAAZ,aAAM,EAAWY,WAAjB,IAA4BsG,qBAAqB,gBASnG,WAACzM,EAAMuF,WAAP,aAAC,EAAWY,YAEftF,qBAAU,WAAO,IAAD,IACV,UAAAb,EAAMuF,WAAN,UAAWG,MAAQ,UAAC1F,EAAMuF,WAAP,OAAC,EAAWY,WACjC,sBAAC,sBAAAlB,EAAA,sEACOI,IAAWW,iBAAiBhG,EAAMuF,IAAIG,KAAKuH,MAAM5B,MACrD,SAAA6B,GAAa,IAAD,EACVlN,EAAMoI,OAAN,2BAAiBpI,EAAMuF,KAAvB,IAA4BY,UAAS,UAAE+G,EAAShF,YAAX,aAAE,EAAeoD,aAExD,SAAAC,GACEE,IAAMF,MAAMC,YAAaD,OAN9B,0CAAD,KAYD,IAEH1K,qBAAU,WAAO,IAAD,QACV,UAAAb,EAAMuF,WAAN,UAAWG,MAAwC,QAA/B,UAAA1F,EAAMuF,WAAN,mBAAWY,iBAAX,eAAsBoG,OAAkB,UAACvM,EAAMuF,WAAP,OAAC,EAAWW,aAC1E,sBAAC,sBAAAjB,EAAA,sEACOI,IAAWa,YAAYlG,EAAMuF,IAAIY,WAAWkF,MAChD,SAAA6B,GAAa,IAAD,UACVlN,EAAMoI,OAAN,2BAAiBpI,EAAMuF,KAAvB,IAA4BW,YAAW,OAAEgH,QAAF,IAAEA,GAAF,UAAEA,EAAUhF,YAAZ,aAAE,EAAgBoD,UACzD9D,GAAgD,QAA/B,UAAAxH,EAAMuF,WAAN,mBAAWY,iBAAX,eAAsBoG,OAAkD,QAAzB,OAARW,QAAQ,IAARA,GAAA,UAAAA,EAAUhF,YAAV,mBAAgBoD,cAAhB,eAAwBiB,OAAwC,IAAvBY,KAAYC,WAE/G,SAAA7B,GACEE,IAAMF,MAAMC,YAAaD,IACzB/D,IAAiB,MARtB,0CAAD,KAeD,WAACxH,EAAMuF,WAAP,iBAAC,EAAWY,iBAAZ,aAAC,EAAsBoG,OAG1B1L,qBAAU,WAAO,IAAD,EACd,UAAIb,EAAMuF,WAAV,OAAI,EAAWW,aACbmH,OAED,CAACrN,EAAMuF,MAEV,IAQM8H,GAAc,WAAO,IAAD,gCACpBhB,EAAO,GACX,UAAIrM,EAAMuF,WAAV,OAAI,EAAWG,OAAM2G,EAAKtF,EAAE,uBAAyB/G,EAAMuF,IAAIG,KAAKmG,cACpE,UAAI7L,EAAMuF,WAAV,iBAAI,EAAWY,iBAAf,iBAAI,EAAsBmH,gBAA1B,OAAI,EAAgCC,SAAQlB,EAAKtF,EAAE,UAAY/G,EAAMuF,IAAIY,UAAUmH,SAASC,QAK5F,UAAIvN,EAAMuF,WAAV,iBAAI,EAAWY,iBAAf,iBAAI,EAAsBmH,gBAA1B,OAAI,EAAgCE,kBAAiBnB,EAAKtF,EAAE,mBAAqB/G,EAAMuF,IAAIY,UAAUmH,SAASE,iBAE9G,UAAIxN,EAAMuF,WAAV,iBAAI,EAAWY,iBAAf,OAAI,EAAsBsH,SAAQpB,EAAKtF,EAAE,0BAA4B/G,EAAMuF,IAAIY,UAAUsH,QACzF,UAAIzN,EAAMuF,WAAV,iBAAI,EAAWY,iBAAf,OAAI,EAAsB0G,WAAUR,EAAKtF,EAAE,mBAAP,UAA4B/G,EAAMuF,IAAIY,iBAAtC,aAA4B,EAAqB0G,UACrF,UAAI7M,EAAMuF,WAAV,iBAAI,EAAWY,iBAAf,OAAI,EAAsBuH,8BAA6BrB,EAAKtF,EAAE,uBAAP,UAAmCxF,IAAOoM,SAASC,QAAnD,YAA8D5N,EAAMuF,IAAIY,UAAUuH,8BACzI,UAAI1N,EAAMuF,WAAV,iBAAI,EAAWY,iBAAf,OAAI,EAAsB0H,8BAA6BxB,EAAKtF,EAAE,4BAAP,UAAwCxF,IAAOoM,SAASC,QAAxD,YAAmE5N,EAAMuF,IAAIY,UAAU0H,8BAC9IvB,GAAQD,GACZ1F,QAAQC,IAAI,SAAUyF,IAGdyB,GAAc,WAAO,IAAD,YAClBC,EAAiB,oBAAG/N,EAAMuF,WAAT,iBAAG,EAAWY,iBAAd,aAAG,EAAsB6H,gBAAzB,QAAqC,GACtDC,EAAmB,oBAAGjO,EAAMuF,WAAT,iBAAG,EAAWW,mBAAd,aAAG,EAAwB8H,gBAA3B,QAAuC,GAChE,OAAOD,EAAkBG,OAAOD,IAG5Bd,GAAY,WAAO,IAAD,YAChBgB,EAAe,oBAAGnO,EAAMuF,WAAT,iBAAG,EAAWY,iBAAd,aAAG,EAAsBiI,cAAzB,QAAmC,GAClDC,EAAiB,oBAAGrO,EAAMuF,WAAT,iBAAG,EAAWW,mBAAd,aAAG,EAAwBkI,cAA3B,QAAqC,GAC5D,OAAOD,EAAgBD,OAAOG,IAGhC,OACE,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,UACGtH,EAAE,yBAEL,cAAC,IAAD,UACGqF,IAAO,uBAAUrF,EAAE,iDAIrB,UAAA/G,EAAMuF,WAAN,mBAAWY,iBAAX,eAAsBqG,0BACrB,eAAC,IAAD,WACE,eAACvK,EAAA,EAAD,CAAYqM,MAAM,SAASpN,UAAWd,EAAQ2L,OAA9C,UAAuDhF,EAAE,WAAzD,KAAuEA,EAAE,4HAA6H,CAACwH,KAAI,OAAErC,SAAF,IAAEA,IAAF,UAAEA,GAAMS,YAAR,aAAE,EAAYK,yBAAzN,OACA,2BAIH,UAAAhN,EAAMuF,WAAN,mBAAWY,iBAAX,eAAsBqI,aAAeC,OAAOC,KAAKrC,IAAMe,OAAS,GAC/D,cAAC/E,EAAA,EAAD,CACEC,WAAS,EACTjG,GAAI,CAAEjD,UAAW,OAAQuP,UAAW,OACpCC,QAAS,EACTC,UAAU,SACVtQ,WAAW,SACXuQ,QAAQ,SANV,SAQE,cAACzG,EAAA,EAAD,CAAME,MAAI,EAAV,SACE,cAACwG,GAAA,EAAD,CAAM1M,GAAI,CAAC7C,gBAAiB,QAA5B,SACE,cAACwP,GAAA,EAAD,UACGP,OAAOC,KAAKrC,IAAM7H,KAAI,SAACyK,EAAKvK,GAAN,OACrB,eAACzC,EAAA,EAAD,CAAYI,GAAI,CAACnE,SAAU,QAAUyB,MAAM,iBAA3C,UAAyEsP,EAAzE,KAAgF5C,GAAK4C,KAApBvK,eAQ1E0H,KAAD,UACApM,EAAMuF,WADN,aACA,EAAWY,YAA6C,QAA/B,UAAAnG,EAAMuF,WAAN,mBAAWY,iBAAX,eAAsBoG,QAAtB,UAAuCvM,EAAMuF,WAA7C,iBAAuC,EAAWY,iBAAlD,aAAuC,EAAsB+I,UACtF,eAACjN,EAAA,EAAD,qCAAgBjC,EAAMuF,WAAtB,iBAAgB,EAAWY,iBAA3B,aAAgB,EAAsB+I,YAErC9C,KAAD,UACApM,EAAMuF,WADN,aACA,EAAWW,cAAiD,QAAjC,UAAAlG,EAAMuF,WAAN,mBAAWW,mBAAX,eAAwBqG,QAAxB,UAAyCvM,EAAMuF,WAA/C,iBAAyC,EAAWW,mBAApD,aAAyC,EAAwBgJ,UAC5F,eAACjN,EAAA,EAAD,qCAAgBjC,EAAMuF,WAAtB,iBAAgB,EAAWW,mBAA3B,aAAgB,EAAwBgJ,YAEvC9C,IAC8B,QAA/B,UAAApM,EAAMuF,WAAN,mBAAWY,iBAAX,eAAsBoG,QADtB,UAEAvM,EAAMuF,WAFN,iBAEA,EAAWY,iBAFX,aAEA,EAAsBqI,aACW,QAAjC,UAAAxO,EAAMuF,WAAN,mBAAWW,mBAAX,eAAwBqG,OACD,IAAvBY,KAAYC,QACa,IAAzBU,KAAcV,QACd,eAACnL,EAAA,EAAD,2BAAgB8E,EAAE,uDAGlBoG,KAAYC,OAAS,GACrB,sBAAMjM,MAAO,CAACxB,MAAO,WAArB,SACE,cAAC,IAAD,UACE,eAACwP,EAAA,EAAD,CAAWC,gBAAgB,EAAMhP,QAAS,CAAEiP,KAAMjP,EAAQ0L,eAAiB3K,MAAO,CAACxB,MAAM,WAAzF,UACE,cAAC2P,EAAA,EAAD,CACEC,WAAY,cAAC,KAAD,IACZ,sCACAC,GAAE,qBAHJ,SAKE,eAACvN,EAAA,EAAD,qCAAmBkL,KAAYC,OAA/B,YAAyCrG,EAAE,gBAE7C,cAAC0I,GAAA,EAAD,UACE,cAACxN,EAAA,EAAD,UACCkL,KAAY3I,KAAI,SAAC+G,EAAO7G,GAAR,OACf,sBAAiBvD,MAAO,CAACuO,UAAW,iBAAkBC,WAAY,GAAlE,UACG,EAAIjL,EADP,KACgB6G,IADN7G,iBAWpBoJ,KAAcV,OAAS,GACvB,sBAAMjM,MAAO,CAACxB,MAAO,cAArB,SACE,cAAC,IAAD,UACE,eAACwP,EAAA,EAAD,CAAWC,gBAAgB,EAAMhP,QAAS,CAAEiP,KAAMjP,EAAQ0L,eAAiB3K,MAAO,CAACxB,MAAO,UAA1F,UACE,cAAC2P,EAAA,EAAD,CACEC,WAAY,cAAC,KAAD,IACZ,wCACAC,GAAE,uBAHJ,SAKE,eAACvN,EAAA,EAAD,qCAAmB6L,KAAcV,OAAjC,YAA2CrG,EAAE,kBAE/C,cAAC0I,GAAA,EAAD,UACE,cAACxN,EAAA,EAAD,UACC6L,KAActJ,KAAI,SAACoL,EAASlL,GAAV,OACjB,sBAAiBvD,MAAO,CAACuO,UAAW,iBAAkBC,WAAY,GAAlE,UACG,EAAIjL,EADP,KACgBkL,IADNlL,oBAaxB,eAAC2D,EAAA,EAAD,CAAMC,WAAS,EAACpH,UAAWd,EAAQiP,KAAnC,UACE,cAAChH,EAAA,EAAD,CAAME,MAAI,EAAChG,GAAI,EAAf,SACE,cAAC,IAAD,CAAeiB,OApJR,WACbxD,EAAMmH,KAAK,SAmJ0B1D,cAAeA,GAA9C,SACGsD,EAAE,YAGP,cAACsB,EAAA,EAAD,CAAME,MAAI,EAAChG,GAAI,EAAf,SACE,cAAC,IAAD,CAAeoB,OArJR,WACb3D,EAAMmH,KAAK,SAoJ0BvD,cAAeA,GAA9C,SACGmD,EAAE,sBAgBfkF,GAAa/L,aAAe,GAGbJ,WAAMC,KAAKkM,ICxRpBnO,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrC+N,OAAQ,CACNpM,MAAO3B,EAAMyB,QAAQ8L,MAAMS,KAC3BpM,WAAY,YAIhB,SAASiQ,GAAqB7P,GAAQ,IAAD,UAC3B+G,EAAMC,cAAND,EACF3G,EAAUtC,KACVuJ,EAAUC,cACV4E,EAAOhH,IAAaC,UAC1B,EAA2B7E,oBAAS,GAA5BmD,EAAR,oBACA,EAA4CnD,oBAAS,6BAAS,UAAAN,EAAMuF,WAAN,UAAWuK,mBAAqB,UAAC9P,EAAMuF,WAAP,iBAAC,EAAWY,iBAAZ,OAAC,EAAsBqG,4BAArH,mBAAQ5I,EAAR,KAAuB4D,EAAvB,KACQC,EAAcC,cAAdD,UAWFE,EAAsB,WAC1B,QAAKC,IAAYC,mBAXA,SAAC7H,GAAUyH,EAAUxD,IAAgBjE,GAYpD8H,CAAW,CACT3E,MAAO4D,EAAE,6BACT7C,YAAa6C,EAAE,2CACf5C,QAAS,CACP,CACEY,KAAMgC,EAAE,SACRnC,YAAY,EACZC,WAAW,EACXF,SAAU,WACRO,IAAaI,IAAI,WAAYtF,EAAM+H,OACnCV,EAAQW,KAAK,aAGjB,CACEjD,KAAMgC,EAAE,YACRnC,YAAY,EACZD,SAAU,WACRO,IAAaI,IAAI,WAAYtF,EAAM+H,OACnCV,EAAQW,KAAK,aAGjB,CACEjD,KAAMgC,EAAE,UACRnC,YAAY,EACZD,SAAU,kBAAM3E,EAAMmH,KAAK,cAI1B,IAiBX,OACE,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,UACGJ,EAAE,gCAGJ,UAAA/G,EAAMuF,WAAN,mBAAWY,iBAAX,eAAsBqG,0BACrB,eAAC,IAAD,WACE,eAACvK,EAAA,EAAD,CAAYqM,MAAM,SAASpN,UAAWd,EAAQ2L,OAA9C,UAAuDhF,EAAE,WAAzD,KAAuEA,EAAE,4HAA6H,CAACwH,KAAI,OAAErC,QAAF,IAAEA,GAAF,UAAEA,EAAMS,YAAR,aAAE,EAAYK,yBAAzN,OACA,2BAIH,UAAAhN,EAAMuF,WAAN,mBAAWY,iBAAX,eAAsBqI,aACrB,qCACE,eAAC,IAAD,WACKzH,EAAE,oBADP,OAGA,cAAC,IAAD,UACE,eAAC9D,EAAA,EAAD,CAAQG,QAhCQ,WAC1B,GAAIuE,IAAuB,CAAC,IAAD,IAErBlB,EAAMzG,EAAMuF,IAAIY,UAAU4J,UACpCpJ,QAAQC,IAAI,OAAQ5G,EAAMuF,KAC1BoB,QAAQC,IAAI,OAAQH,GACduJ,YAAkBvJ,GAClBe,IAAiB,UAACxH,EAAMuF,WAAP,iBAAC,EAAWY,iBAAZ,OAAC,EAAsBqG,0BACxCxM,EAAMoI,OAAN,2BAAiBpI,EAAMuF,KAAvB,IAA4BuK,mBAAmB,OAwBD5M,QAAQ,YAAYvD,MAAM,WAAhE,UACGoH,EAAE,YADL,qBASR,eAACsB,EAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,EAAA,EAAD,CAAME,MAAI,EAAChG,GAAI,EAAf,SACE,cAAC,IAAD,CAAeiB,OAtFR,WACbxD,EAAMmH,KAAK,SAqF0B1D,cAAeA,EAA9C,SACGsD,EAAE,YAGP,cAACsB,EAAA,EAAD,CAAME,MAAI,EAAChG,GAAI,EAAf,SACE,cAAC,IAAD,CAAeoB,OAvFR,WACb3D,EAAMmH,KAAK,SAsF0BvD,cAAeA,EAA9C,SACGmD,EAAE,sBAYf8I,GAAqB3P,aAAe,GAGrBJ,WAAMC,KAAK8P,IChI1B,SAASI,GAAajQ,GAAQ,IAAD,cACnB+G,EAAMC,cAAND,EACR,EAAoBoF,eAAZC,EAAR,oBACA,EAA2B9L,oBAAS,GAA5BmD,EAAR,oBACA,EAA4CnD,oBAAS,6BAAuC4P,KAAjC,UAAAlQ,EAAMuF,WAAN,eAAWuK,oBAAkC9P,EAAMuF,IAAIuK,qBAAlH,mBAAQlM,EAAR,KAAuB4D,EAAvB,KACA,EAA0DlH,oBAAS,GAAnE,mBAAQ6P,EAAR,KAA8BC,EAA9B,KACMC,EAAc,UAAGrQ,EAAMuF,WAAT,iBAAG,EAAWY,iBAAd,iBAAG,EAAsBmH,gBAAzB,aAAG,EAAgCgD,QACjD5J,EAAW,UAAG1G,EAAMuF,WAAT,iBAAG,EAAWY,iBAAd,aAAG,EAAsBqI,WAPf,4CAiB3B,sBAAAvJ,EAAA,sDACEmL,GAAwB,GAD1B,4CAjB2B,sBA6C3B,OAxBAvP,qBAAU,WAC+B,IAAD,EAAlCb,EAAMuF,KAAOvF,EAAMuF,IAAIY,YACrB,UAACnG,EAAMuF,WAAP,OAAC,EAAWgL,qBAAsBJ,GACtC,sBAAC,sBAAAlL,EAAA,6DACCmL,GAAwB,GADzB,SAEO/K,IAAWmB,qBAAqB6J,EAAgB3J,GAAa2E,MACjE,SAAAC,GAAW,IAAD,IACRtL,EAAMoI,OAAN,2BAAiBpI,EAAMuF,KAAvB,IAA4BgL,mBAAoBjF,EAAOpD,KAAKsI,UAAWC,uBAAwBnF,EAAOpD,KAAKwI,iBAC3GlJ,GAAuB,OAAN8D,QAAM,IAANA,GAAA,UAAAA,EAAQpD,YAAR,eAAcsI,aAAd,OAA2BlF,QAA3B,IAA2BA,GAA3B,UAA2BA,EAAQpD,YAAnC,aAA2B,EAAcwI,mBAE5D,SAAAnF,GACV5E,QAAQ4E,MAAM,8BAA+BA,GACjCE,IAAMF,MAAMC,YAAaD,IACzB/D,GAAiB,MAVtB,0CAAD,MAmBD,CAACxH,EAAMuF,IAAIY,UAAWnG,EAAMuF,IAAIoL,QAASR,IAG1C,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,UACGpJ,EAAE,iCAEJ,UAAA/G,EAAMuF,WAAN,mBAAWY,iBAAX,eAAsBqI,aACrB,qCACE,eAAC,IAAD,WACGpC,GAAO,UACHrF,EAAE,YADC,QAGNqF,IAAYpM,EAAMuF,IAAIgL,oBAAvB,uBACOxJ,EAAE,6DAA8D,CAACsJ,qBAEvEjE,GAAWpM,EAAMuF,IAAIgL,qBAAuBvQ,EAAMuF,IAAIkL,wBAAvD,uBACO1J,EAAE,wFAAyF,CAACsJ,qBAElGjE,GAAWpM,EAAMuF,IAAIgL,oBAAsBvQ,EAAMuF,IAAIkL,wBAAtD,uBACO1J,EAAE,+DAAgE,CAACsJ,uBAG7E,cAAC,IAAD,WACIjE,GACA,qCACE,uBACA,eAACnJ,EAAA,EAAD,CAAQG,QAvEG,2CAuEyBF,QAAQ,YAAYvD,MAAM,WAA9D,UACGoH,EAAE,0BADL,8BAeZ,eAACsB,EAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,EAAA,EAAD,CAAME,MAAI,EAAChG,GAAI,EAAf,SACE,cAAC,IAAD,CAAeiB,OA/ER,WACbxD,EAAMmH,KAAK,SA8E0B1D,cAAeA,EAA9C,SACGsD,EAAE,YAGP,cAACsB,EAAA,EAAD,CAAME,MAAI,EAAChG,GAAI,EAAf,SACE,cAAC,IAAD,CAAeoB,OAhFR,WACb3D,EAAMmH,KAAK,SA+E0BvD,cAAeA,EAA9C,SACGmD,EAAE,sBAWfkJ,GAAa/P,aAAe,GAGbJ,WAAMC,KAAKkQ,IC7G1B,SAASW,GAAgB5Q,GAAQ,IAAD,yLACtB+G,GAAMC,cAAND,EACR,GAAoBoF,eAAZC,GAAR,qBACA,GAA4C9L,oBAAS,GAArD,qBAAQsD,GAAR,MAAuB4D,GAAvB,MACA,GAA0BlH,oBAAS,GAA3BmD,GAAR,qBACA,GAAwDnD,qBAAS,UAACN,EAAMuF,WAAP,iBAAC,EAAWoL,eAAZ,OAAC,EAAoBE,iCAAtF,qBAAQC,GAAR,MAA6BC,GAA7B,MAL8B,8CAO9B,sBAAA9L,EAAA,sDACE8L,IAAuB,GADzB,4CAP8B,sBAW9BlQ,qBAAU,WAAO,IAAD,EACd,aAAIb,EAAMuF,WAAV,OAAI,EAAWY,UAAW,CAAC,IAAD,IACgC,IAAxD,aAAInG,EAAMuF,WAAV,iBAAI,EAAWoL,eAAf,OAAI,EAAoBE,+BACtBrJ,GAAwE,cAAvD,UAAAxH,EAAMuF,WAAN,mBAAWoL,eAAX,eAAoBE,iCAEnCC,IACF,sBAAC,sCAAA7L,EAAA,sEACOI,IAAWe,aAAX,UACJpG,EAAMuF,WADF,iBACJ,EAAWY,iBADP,iBACJ,EAAsBmH,gBADlB,aACJ,EAAgCE,gBAD5B,UAEJxN,EAAMuF,WAFF,iBAEJ,EAAWY,iBAFP,iBAEJ,EAAsB6K,cAFlB,aAEJ,EAA8BC,kCAC9B5F,MACA,SAAAC,GAAW,IAAD,QACRyF,IAAuB,GACrCpK,QAAQC,IAAI,uBAAZ,OAAoC0E,QAApC,IAAoCA,GAApC,UAAoCA,EAAQpD,YAA5C,aAAoC,EAAcoD,QACpCtL,EAAMoI,OAAN,2BAAiBpI,EAAMuF,KAAvB,IAA4BoL,QAAO,OAAErF,QAAF,IAAEA,GAAF,UAAEA,EAAQpD,YAAV,aAAE,EAAcoD,UACnD9D,GAAyE,cAAxD,UAAA8D,EAAOpD,YAAP,mBAAaoD,cAAb,eAAqBuF,oCAExC,SAAAtF,GACEE,IAAMF,MAAMC,YAAaD,IACzB/D,IAAiB,MAbtB,0CAAD,MAqBH,CAACxH,EAAMuF,IAAIY,UAAW2K,KAEzB,IAQMI,IAA0B,UAAAlR,EAAMuF,WAAN,mBAAWoL,eAAX,mBAAoBQ,2BAApB,eAAyC/D,QAAS,EAC5EgE,GAA2BF,IAA2B,GAAI,UAAAlR,EAAMuF,WAAN,mBAAWoL,eAAX,mBAAoBQ,oBAAoBD,WAAxC,mBAAkEG,2BAAlE,eAAuFjE,QAAS,GAAK,EAErK,OACE,eAAC,IAAD,WACE,eAAC,IAAD,WACE,cAAC,IAAD,UACGrG,GAAE,2BAEL,eAAC,IAAD,WACGqF,IAAO,UACHrF,GAAE,YADC,QAGNqF,IAAmE,cAAvD,UAAApM,EAAMuF,WAAN,mBAAWoL,eAAX,eAAoBE,iCAAjC,uBACO9J,GAAE,uBADT,QAGCqF,IAAmE,cAAvD,UAAApM,EAAMuF,WAAN,mBAAWoL,eAAX,eAAoBE,iCAAjC,uBACO9J,GAAE,4BAERqF,IAAmE,aAAvD,UAAApM,EAAMuF,WAAN,mBAAWoL,eAAX,eAAoBE,iCAAjC,uBACO9J,GAAE,4BAGVqF,IACA,qBAAKjL,MAAO,CAACjD,SAAU,QAASoT,WAAY,OAA5C,SACE,eAAC,IAAD,WACE,8BAAIvK,GAAE,0BAAN,OADF,IACyC,UAAA/G,EAAMuF,WAAN,mBAAWoL,eAAX,SAAoBY,8BAAgCC,YAAgB,UAACxR,EAAMuF,WAAP,iBAAC,EAAWoL,eAAZ,aAAC,EAAoBY,+BAAiCxK,GAAE,eAIvKqF,IAAmE,aAAvD,UAAApM,EAAMuF,WAAN,mBAAWoL,eAAX,eAAoBE,iCAChC,sBAAK1P,MAAO,CAACjD,SAAU,QAASoT,WAAY,OAA5C,UACE,eAAC,IAAD,WACE,8BAAIvK,GAAE,gBAAN,OADF,wBAC+B/G,EAAMuF,WADrC,iBAC+B,EAAWoL,eAD1C,iBAC+B,EAAoBc,0BADnD,aAC+B,EAAwCC,cADvE,QACiF,OAEjF,eAAC,IAAD,WACE,8BAAI3K,GAAE,uBAAN,OADF,wBACsC/G,EAAMuF,WAD5C,iBACsC,EAAWoL,eADjD,iBACsC,EAAoBc,0BAD1D,aACsC,EAAwCE,mBAD9E,QAC6F,OAE7F,eAAC,IAAD,WACE,8BAAI5K,GAAE,kBAAN,OADF,wBACiC/G,EAAMuF,WADvC,iBACiC,EAAWoL,eAD5C,iBACiC,EAAoBc,0BADrD,aACiC,EAAwCG,iBADzE,QACsF,WAIxFxF,IAAmE,aAAvD,UAAApM,EAAMuF,WAAN,mBAAWoL,eAAX,eAAoBE,iCAAkDK,IAA2B,GAC7G,sBAAK/P,MAAO,CAACjD,SAAU,QAASoT,WAAY,OAA5C,UACE,eAAC,IAAD,WACE,8BAAIvK,GAAE,2CAAN,OADF,wBAC0D/G,EAAMuF,WADhE,iBAC0D,EAAWoL,eADrE,iBAC0D,EAAoBQ,oBAAoBD,WADlG,iBAC0D,EAAkEW,aAD5H,aAC0D,EAAyEH,cADnI,QAC6I,OAE7I,eAAC,IAAD,WACE,8BAAI3K,GAAE,kDAAN,OADF,0BACiE/G,EAAMuF,WADvE,mBACiE,GAAWoL,eAD5E,mBACiE,GAAoBQ,oBAAoBD,WADzG,mBACiE,GAAkEW,aADnI,cACiE,GAAyEF,mBAD1I,UACyJ,WAI3JvF,IAAmE,aAAvD,WAAApM,EAAMuF,WAAN,sBAAWoL,eAAX,iBAAoBE,iCAAkDK,IAA2B,GAAOE,IAA2B,GAC/I,sBAAKjQ,MAAO,CAACjD,SAAU,QAASoT,WAAY,OAA5C,UACE,eAAC,IAAD,WACE,8BAAIvK,GAAE,mCAAN,OADF,0BACkD/G,EAAMuF,WADxD,mBACkD,GAAWoL,eAD7D,mBACkD,GAAoBQ,oBAAoBD,WAD1F,mBACkD,GAAkEG,oBAAoBD,WADxI,cACkD,GAAgH3K,WADlK,UACyK,OAEzK,eAAC,IAAD,WACE,8BAAIM,GAAE,6CAAN,OADF,IAC4D,WAAA/G,EAAMuF,WAAN,sBAAWoL,eAAX,sBAAoBQ,oBAAoBD,WAAxC,sBAAkEG,oBAAoBD,WAAtF,WAAgHU,UAAY/K,GAAE,OAASA,GAAE,SAErM,eAAC,IAAD,WACE,8BAAIA,GAAE,kDAAN,OADF,0BACiE/G,EAAMuF,WADvE,mBACiE,GAAWoL,eAD5E,mBACiE,GAAoBQ,oBAAoBD,WADzG,mBACiE,GAAkEG,oBAAoBD,WADvJ,cACiE,GAAgHW,+BADjL,UAC4MhL,GAAE,cAE9M,eAAC,IAAD,WACE,8BAAIA,GAAE,wCAAN,OADF,0BACuD/G,EAAMuF,WAD7D,mBACuD,GAAWoL,eADlE,mBACuD,GAAoBQ,oBAAoBD,WAD/F,mBACuD,GAAkEG,oBAAoBD,WAD7I,mBACuD,GAAgHY,2BADvK,cACuD,GAAqIN,cAD5L,UACsM,OAEtM,eAAC,IAAD,WACE,8BAAI3K,GAAE,+CAAN,OADF,0BAC8D/G,EAAMuF,WADpE,mBAC8D,GAAWoL,eADzE,mBAC8D,GAAoBQ,oBAAoBD,WADtG,mBAC8D,GAAkEG,oBAAoBD,WADpJ,mBAC8D,GAAgHY,2BAD9K,cAC8D,GAAqIL,mBADnM,UACkN,UAItN,uBACA,cAAC,IAAD,UACG3R,EAAMuF,IAAIgL,sBAA+E,cAAvD,WAAAvQ,EAAMuF,WAAN,sBAAWoL,eAAX,iBAAoBE,kCACrD,eAAC5N,EAAA,EAAD,CAAQG,QA3HY,4CA2HeF,QAAQ,YAAYvD,MAAM,WAA7D,UACGoH,GAAE,wBADL,wBAYN,eAACsB,EAAA,EAAD,CAAMC,WAAS,EAAf,UACE,cAACD,EAAA,EAAD,CAAME,MAAI,EAAChG,GAAI,EAAf,SACE,cAAC,IAAD,CAAeiB,OAjGR,WACbxD,EAAMmH,KAAK,SAgG0B1D,cAAeA,GAA9C,SACGsD,GAAE,YAGP,cAACsB,EAAA,EAAD,CAAME,MAAI,EAAChG,GAAI,EAAf,SACE,cAAC,IAAD,CAAeoB,OAlGR,WACb3D,EAAMmH,KAAK,SAiG0BvD,cAAeA,GAA9C,SACGmD,GAAE,sBAWf6J,GAAgB1Q,aAAe,GAGhBJ,WAAMC,KAAK6Q,IClK1B,SAASqB,GAAcjS,GAAQ,IAAD,UACpB+G,EAAMC,cAAND,EACR,EAA0BzG,oBAAS,GAA3BmD,EAAR,oBAMA,OACE,eAAC,IAAD,WACE,eAAC,IAAD,WACE,eAAC,IAAD,WACGsD,EAAE,YADL,QAGC,UAAA/G,EAAMuF,WAAN,mBAAWY,iBAAX,eAAsBqI,aACrB,qCACE,cAAC,IAAD,UACE,qBAAKrN,MAAO,CAACjD,SAAU,IAAKO,UAAW,UAAvC,4BAIF,cAAC,IAAD,UACE,qBAAK0C,MAAO,CAAC1C,UAAW,UAAxB,SACGsI,EAAE,kGAAmG,CAACmL,iBAAkB3Q,IAAO2Q,iBAAkBC,KAAI,UAAEnS,EAAMuF,WAAR,iBAAE,EAAWY,iBAAb,iBAAE,EAAsBmH,gBAAxB,aAAE,EAAgCE,4BAOlM,cAACnF,EAAA,EAAD,CAAMC,WAAS,EAAf,SACE,cAACD,EAAA,EAAD,CAAME,MAAI,EAAChG,GAAI,EAAf,SACE,cAAC,IAAD,CAAeiB,OA5BR,WACbxD,EAAMmH,KAAK,SA2B0B1D,cAAeA,EAA9C,SACGsD,EAAE,iBAWfkL,GAAc/R,aAAe,GAGdJ,WAAMC,KAAKkS,I,gCC5B1B,SAASG,GAASpS,GAChB,IAAQC,EAAqCD,EAArCC,SAAUoS,EAA2BrS,EAA3BqS,MAAO3N,EAAoB1E,EAApB0E,MAAU4N,EAAnC,YAA6CtS,EAA7C,IAEA,OACE,cAACiC,EAAA,EAAD,yBACEF,UAAU,MACVwQ,KAAK,WACLC,OAAQH,IAAU3N,EAClB8K,GAAE,mCAA8B9K,GAChC,oCAA4BA,IACxB4N,GANN,aAQE,cAACxQ,EAAA,EAAD,CAAKW,EAAG,EAAR,SACGxC,OAYT,IAAMwS,GAAY,SAAC/N,GACjB,MAAO,CACL8K,GAAG,WAAD,OAAa9K,GACf,gBAAgB,gBAAhB,OAAiCA,KAI/BgO,GAAYC,aAAW,SAAC3U,GAAD,MAAY,CACvCqR,KAAM,CACJuD,QAAS,OAFKD,EAId,SAAA3S,GACF,OACE,cAAC6S,EAAA,EAAD,eAAS7S,OAIPlC,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACrCqR,KAAM,CACJyD,SAAU,GASZC,IAAK,CACHvT,gBAAiBxB,EAAMyB,QAAQuT,UAAUC,OAE3CC,aAAc,CACZ1T,gBAAiB,iBACjBL,OAAQ,OAKNgU,GAAY,WAChB,IAAM/S,EAAUtC,KAChB,EAAwBwC,oBAAS,kBAAM4E,IAAakO,YAApD,mBAAQ7N,EAAR,KAAa6C,EAAb,KAMQrB,EAAMC,cAAND,EAeR,SAASsM,EAAU7D,GACjBpH,EAAO,2BAAI7C,GAAL,IAAUwC,MAAOyH,KASzB,SAASrI,EAAKmM,GACZ,IAAI9D,EAAK8D,EACT,GAAqB,kBAAVA,EACT,OAAQA,EAAMC,eACZ,IAAK,QAEL,IAAK,oBAEL,IAAK,iBAEL,IAAK,SAEL,IAAK,UAEL,IAAK,mBAEL,IAAK,UAEL,IAAK,sBAEL,IAAK,UACH,MACF,IAAK,OACH/D,EAAKjK,EAAMA,EAAIwC,MAAQ,EAAI,EAC3B,MACF,IAAK,OACHyH,EAAKjK,EAAMA,EAAIwC,MAAQ,EAAI,EAC3B,MACF,QAEE,YADApB,QAAQ4E,MAAR,kDAAyD+H,IAI/DD,EAAU7D,GAIZ,OA5DA3O,qBAAU,WACR,IAAM2S,EAAWtO,IAAaF,IAAI,YAC9BwO,IACFpL,EAAO,2BAAI7C,GAAL,IAAUwC,MAAOyL,KACvBtO,IAAauO,OAAO,eAErB,CAAClO,IAEJ1E,qBAAU,WACRqE,IAAakD,OAAO7C,GACpBF,IAAWC,IAAIC,KACd,CAACA,IAgDA,OAACA,QAAD,IAACA,KAAKwC,QAAOxC,EAAIwC,MAAQ,GAE3B,sBAAK7G,UAAWd,EAAQiP,KAAxB,UACE,cAACqE,EAAA,EAAD,CAAQC,UAAW,EAAGC,SAAS,QAAQzS,MAAO,CAAqC0S,IAAK,IAAxF,SAWE,cAACC,EAAA,EAAD,CAAOH,UAAW,EAAGI,QAAM,EAA3B,SACE,eAACC,EAAA,EAAD,CACE3B,MAAK,OAAE9M,QAAF,IAAEA,OAAF,EAAEA,EAAKwC,MAGZ7E,QAAQ,aACR+Q,cAAc,OACdC,SA/DV,SAAkB5P,EAAOkL,GACnBjO,IAAOC,GAAG2S,uBACZd,EAAU7D,IA8DJ,aAAW,kBACXpP,QAAS,CACPgU,UAAWhU,EAAQ8S,cAErBhS,UAAWd,EAAQ2S,IAXrB,UAaE,cAACL,GAAD,aAAW2B,MAAK,UAAKtN,EAAE,SAAP,kBAA0B0L,GAAU,KACpD,cAACC,GAAD,aAAW2B,MAAK,UAAKtN,EAAE,qBAAP,YAAqC0L,GAAU,KAC/D,cAACC,GAAD,aAAW2B,MAAK,UAAKtN,EAAE,kBAAP,kBAAmC0L,GAAU,KAC7D,cAACC,GAAD,aAAW2B,MAAK,UAAKtN,EAAE,UAAP,YAA0B0L,GAAU,KACpD,cAACC,GAAD,aAAW2B,MAAK,UAAKtN,EAAE,WAAP,wBAA6B0L,GAAU,KACvD,cAACC,GAAD,aAAW2B,MAAK,UAAKtN,EAAE,oBAAP,YAAoC0L,GAAU,KAC9D,cAACC,GAAD,aAAW2B,MAAK,UAAKtN,EAAE,WAAP,kBAA4B0L,GAAU,KACtD,cAACC,GAAD,aAAW2B,MAAK,UAAKtN,EAAE,uBAAP,kBAAwC0L,GAAU,KAClE,cAACC,GAAD,aAAW2B,MAAK,UAAKtN,EAAE,WAAP,kBAA4B0L,GAAU,YAK5D,qCACmB,KAAZ,OAAHlN,QAAG,IAAHA,OAAA,EAAAA,EAAKwC,QACL,cAACqK,GAAD,CAAU1N,MAAO,EAAG2N,MAAO9M,EAAIwC,MAA/B,SACE,cAAC,EAAD,CAAYZ,KAAMA,EAAM5B,IAAKA,EAAK6C,OAAQ,SAAA7C,GAAG,OAAI6C,EAAO7C,QAG3C,KAAZ,OAAHA,QAAG,IAAHA,OAAA,EAAAA,EAAKwC,QACL,cAACqK,GAAD,CAAU1N,MAAO,EAAG2N,MAAO9M,EAAIwC,MAA/B,SACE,cAAC,EAAD,CAAuBZ,KAAMA,EAAM5B,IAAKA,EAAK6C,OAAQ,SAAA7C,GAAG,OAAI6C,EAAO7C,QAGtD,KAAZ,OAAHA,QAAG,IAAHA,OAAA,EAAAA,EAAKwC,QACL,cAACqK,GAAD,CAAU1N,MAAO,EAAG2N,MAAO9M,EAAIwC,MAA/B,SACE,cAAC,EAAD,CAAeZ,KAAMA,EAAM5B,IAAKA,EAAK6C,OAAQ,SAAA7C,GAAG,OAAI6C,EAAO7C,QAG9C,KAAZ,OAAHA,QAAG,IAAHA,OAAA,EAAAA,EAAKwC,QACL,cAACqK,GAAD,CAAU1N,MAAO,EAAG2N,MAAO9M,EAAIwC,MAA/B,SACE,cAAC,EAAD,CAAaZ,KAAMA,EAAM5B,IAAKA,EAAK6C,OAAQ,SAAA7C,GAAG,OAAI6C,EAAO7C,QAG5C,KAAZ,OAAHA,QAAG,IAAHA,OAAA,EAAAA,EAAKwC,QACL,cAACqK,GAAD,CAAU1N,MAAO,EAAG2N,MAAO9M,EAAIwC,MAA/B,SACE,cAAC,GAAD,CAAcZ,KAAMA,EAAM5B,IAAKA,EAAK6C,OAAQ,SAAA7C,GAAG,OAAI6C,EAAO7C,QAG7C,KAAZ,OAAHA,QAAG,IAAHA,OAAA,EAAAA,EAAKwC,QACL,cAACqK,GAAD,CAAU1N,MAAO,EAAG2N,MAAO9M,EAAIwC,MAA/B,SACE,cAAC,GAAD,CAAsBZ,KAAMA,EAAM5B,IAAKA,EAAK6C,OAAQ,SAAA7C,GAAG,OAAI6C,EAAO7C,QAGrD,KAAZ,OAAHA,QAAG,IAAHA,OAAA,EAAAA,EAAKwC,QACL,cAACqK,GAAD,CAAU1N,MAAO,EAAG2N,MAAO9M,EAAIwC,MAA/B,SACE,cAAC,GAAD,CAAcZ,KAAMA,EAAM5B,IAAKA,EAAK6C,OAAQ,SAAA7C,GAAG,OAAI6C,EAAO7C,QAG7C,KAAZ,OAAHA,QAAG,IAAHA,OAAA,EAAAA,EAAKwC,QACL,cAACqK,GAAD,CAAU1N,MAAO,EAAG2N,MAAO9M,EAAIwC,MAA/B,SACE,cAAC,GAAD,CAAiBZ,KAAMA,EAAM5B,IAAKA,EAAK6C,OAAQ,SAAA7C,GAAG,OAAI6C,EAAO7C,QAGhD,KAAZ,OAAHA,QAAG,IAAHA,OAAA,EAAAA,EAAKwC,QACL,cAACqK,GAAD,CAAU1N,MAAO,EAAG2N,MAAO9M,EAAIwC,MAA/B,SACE,cAAC,GAAD,CAAeZ,KAAMA,EAAM5B,IAAKA,EAAK6C,OAAQ,SAAA7C,GAAG,OAAI6C,EAAO7C,eC3OjEzH,GAAYC,aAAW,SAAAC,GAAK,MAAK,CACtCsW,KAAM,CACHpW,SAAU,aAId,SAASqW,KACR,IAAMnU,EAAUtC,KAIf,OACE,qBAAKoD,UAAWd,EAAQkU,KAAxB,SAIE,cAAC,GAAD,MAKSxU,cAAMC,KAAKwU","file":"static/js/16.1319b63d.chunk.js","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@mui/styles\";\nimport Typography from \"@mui/material/Typography\";\nimport Box from \"@mui/material/Box\";\nimport Button from \"@mui/material/Button\";\nimport Tooltip from \"@mui/material/Tooltip\";\nimport useWindowSize from \"../hooks/useWindowSize\";\nimport config from \"../config\";\n\n// const height = window.innerHeight;\n// const width = window.innerWidth;\n// const heightScrollable = (\n//   (height >= width) ?\n//     //height - (height *.12) - (height *.12) - (height *.12) // portrait\n//     height * .64 // portrait\n//   :\n//     //height - (height *.16) - (height *.16) - (height*.16) // landscape\n//     height * .52 // landscape\n//   );\n\n//console.log(\"height, width, heightScrollable:\", height, width, heightScrollable);\nconst useStyles = makeStyles(theme => ({\n\tparagraph: {\n    fontSize: \"1.1em\",\n\t},\n\tparagraphSmall: {\n    fontSize: \"0.8em\",\n\t},\n  centered: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  justified: {\n    textAlign: \"justify\",\n  },\n  box: {\n    display: \"flex\",\n  },\n  boxLeft: {\n    justifyContent: \"flex-start\",\n  },\n  boxRight: {\n    justifyContent: \"flex-end\",\n  },\n  sup: {\n    fontSize: \"0.8em\",\n  },\n  scrollableContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginTop: \"1em\",\n    minHeight: \"5em\",\n    //maxHeight: heightScrollable,\n  },\n  scrollable: {\n    height: \"100%\",\n    overflowY: \"auto\",\n    paddingLeft: 10,\n    paddingRight: 10,\n    minHeight: \"3em\",\n  },\n  attention: {\n    backgroundColor: theme.palette.attention.main,\n    color: \"white\",\n    fontWeight: \"bold\",\n  }\n}));\n\nconst TabContainer = React.memo(props => {\n  return (\n    <div>\n      {props.children}\n    </div>\n  );\n});\nTabContainer.propTypes = {\n};\nTabContainer.defaultProps = {\n};\n\nconst TabBodyScrollable = React.memo(props => {\n  const classes = useStyles();\n\n  /**\n   * Note: here we assume fixed sections height...\n   * this is a bad hack to have a scrollable body\n   * and avoid a scrollable container for any\n   * window height and consistent after a resize\n   */\n  const size = useWindowSize();\n\n  return (\n    <div className={classes.scrollableContainer}>\n      <div className={classes.scrollable} style={{margin: \"auto\", width: \"90%\", height: Math.max(120, size.height - config.ui.toolbarHeight - config.ui.tabbarHeight - config.ui.footerHeight)}}>\n        {props.children}\n      </div>\n    </div>\n  );\n});\nTabBodyScrollable.propTypes = {\n};\nTabBodyScrollable.defaultProps = {\n};\n\nconst TabTitle = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <div className={classes.centered}>\n      <h2>{props.children}</h2>\n    </div>\n  );\n});\nTabTitle.propTypes = {\n};\nTabTitle.defaultProps = {\n};\n\nconst TabParagraph = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Box component=\"div\" mb={1}>\n      <Typography component=\"div\" className={`${classes.paragraph} ${classes.justified} ${props.small ? classes.paragraphSmall : null} ${props.class}`}>\n        {props.children}\n      </Typography>\n    </Box>\n  );\n});\nTabParagraph.propTypes = {\n  class: PropTypes.string,\n};\nTabParagraph.defaultProps = {\n  class: null,\n};\n\nconst TabBox = React.memo(props => {\n  //const classes = useStyles();\n  return (\n    <Box\n      sx={{\n        mx: { xs: \"5%\", md: \"20%\" },\n        mb: \"1em\",\n        p: 1,\n        border: \"1px solid\",\n        borderColor: (theme) =>\n          theme.palette.mode === \"dark\" ? \"grey.800\" : \"grey.300\",\n        borderRadius: 2,\n        fontSize: \"1em\",\n        fontWeight: \"bold\",\n        textAlign: \"center\",\n      }}\n    >\n      {props.children}\n    </Box>\n  );\n});\nTabBox.propTypes = {\n  class: PropTypes.string,\n};\nTabBox.defaultProps = {\n  class: null,\n};\n\nconst TabResetButton = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Box\n      component=\"span\"\n      m={1} // margin\n      className={`${classes.reset}`}\n    >\n      <Button\n        variant=\"contained\"\n        title={props.title}\n        color=\"attention\"\n        className={classes.attention}\n        onClick={props.onClick}\n        disabled={props.isDisabled}\n      >\n        {props.children}\n      </Button>\n    </Box>\n  );\n});\nTabResetButton.propTypes = {\n  title: PropTypes.string,\n  onClick: PropTypes.func.isRequired,\n};\nTabResetButton.defaultProps = {\n  isDisabled: false,\n};\n\nconst TabPrevButton = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Box\n      component=\"span\"\n      m={1} // margin\n      className={`${classes.box} ${classes.boxLeft}`}\n    >\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={props.onPrev}\n        disabled={!props.prevIsEnabled}\n      >\n        {props.children}\n      </Button>\n    </Box>\n  );\n});\nTabPrevButton.propTypes = {\n  onPrev: PropTypes.func.isRequired,\n  prevIsEnabled: PropTypes.bool.isRequired,\n};\nTabPrevButton.defaultProps = {\n};\n\nconst TabNextButton = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Box\n      component=\"span\"\n      m={1} // margin\n      className={`${classes.box} ${classes.boxRight}`}\n    >\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={props.onNext}\n        disabled={!props.nextIsEnabled}\n      >\n        {props.children}\n      </Button>\n    </Box>\n  );\n});\nTabNextButton.propTypes = {\n  onNext: PropTypes.func.isRequired,\n  nextIsEnabled: PropTypes.bool.isRequired,\n};\nTabNextButton.defaultProps = {\n};\n\nconst TabTooltip = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Tooltip\n      title={props.title}\n      placement=\"top\"\n    >\n      <sup className={classes.sup}>{props.anchor}</sup>\n    </Tooltip>\n  );\n});\nTabTooltip.propTypes = {\n  title: PropTypes.string.isRequired,\n  anchor: PropTypes.string,\n};\nTabTooltip.defaultProps = {\n  anchor: \"*\",\n};\n\nexport {TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabBox, TabResetButton, TabPrevButton, TabNextButton, TabTooltip};\n","import { useState, useEffect } from \"react\";\n\nexport default function useWindowSize() {\n  const [windowSize, setWindowSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n  useEffect(() => {\n    function handleResize() {\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n      //console.log(\"useWindowSize - height:\", window.innerHeight);\n    }\n    window.addEventListener(\"resize\", handleResize);\n    handleResize();\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n  return windowSize;\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@mui/material/Button\";\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions } from '@mui/material';\n\nconst FlexibleDialog = ({ title, contentText, actions, ...props }) => (\n  <Dialog\n    {...props}\n    onBackdropClick={() => {} /* disable modal close on backdrop click */}\n    //disableScrollLock={false}\n    //disableEnforceFocus={false}\n    aria-labelledby={title}\n    onClose={(event, reason) => { /* console.log(\"REASON:\", reason); */ }}\n  >\n    <DialogTitle>{title}</DialogTitle>\n    <DialogContent>\n      <DialogContentText>{contentText}</DialogContentText>\n    </DialogContent>\n    <DialogActions>\n      {actions.map((action, index) => (\n        <Button\n          key={index}\n          onClick={() => {\n            if (action.callback) action.callback();\n            if (action.closeModal) props.onClose();\n          }}\n          variant={action.variant === \"primary\" ? \"contained\" : action.variant === \"secondary\" ? \"outlined\" : \"contained\"}\n          autoFocus={props}\n          style={{textTransform: \"none\"}} // do not uppercase button text\n        >\n          {action.text}\n        </Button>\n      ))}\n    </DialogActions>\n  </Dialog>\n);\n\nFlexibleDialog.propTypes = {\n  title: PropTypes.string,\n  contentText: PropTypes.string,\n  actions: PropTypes.arrayOf(\n    PropTypes.shape({\n      text: PropTypes.string,\n      closeModal: PropTypes.bool,\n      callback: PropTypes.func,\n      variant: PropTypes.oneOf([\n        \"primary\", \"secondary\",\n      ]),\n      autoFocus: PropTypes.bool,\n    })\n  ),\n};\n\nFlexibleDialog.defaultProps = {\n  title: \"\",\n  contentText: \"\",\n  actions: [\n    {\n      text: \"Ok\",\n      closeModal: true,\n      callback: () => {},\n      variant: \"primary\",\n      autoFocus: false,\n    }\n  ],\n};\n\nexport default React.memo(FlexibleDialog);","import api from \"./API\";\nimport TokenService from \"./TokenService\";\n\n// get job status\nconst get = async () => {\n  // const user = TokenService.getUser();\n  // if (!user) {\n  //   return null;\n  // }\n  // return api.get(\"/job/get\", {\n  //   userId: user._id,\n  // });\n\n  //const retval = await api.get(\"/job/get\");\n\n  const user = TokenService.getUser();\n  if (!user) {\n    return null;\n  }\n  return await api.get(\"/job/get\");\n};\n\n// set job status\nconst set = (job) => {\n  const user = TokenService.getUser();\n  if (!user) {\n    return null;\n  }\n\n  return api.put(\"/job/set\", {job});\n};\n\n// upload a file\nconst upload = (file) => {\n  const formData = new FormData();\n  formData.append(\"file\", file);\n  \n  return api.post(\"/job/upload\", formData, {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n    }\n  });\n};\n\n// transform XLS to XML\nconst transformXls2Xml = (filePath) => {\n  return api.post(\"/job/transformXls2Xml/:filePath\", {\n    filePath,\n  });\n}\n\n// validate XML syntax\nconst validateXml = (transform) => {\n  return api.post(\"/job/validateXml/:transform\", {\n    transform,\n  });\n  // const retval = api.post(\"/job/validateXml/:transform\", {\n  //   transform,\n  // });\n  // console.log(\"****************** validateXml retval:\", retval);\n  // return retval;\n}\n\n// check ANAC periodic verification outcome\nconst outcomeCheck = (anno, codiceFiscaleAmministrazione) => {\n  return api.post(\"/job/outcomeCheck/:anno/:codiceFiscaleAmministrazione\",\n    {\n      anno,\n      codiceFiscaleAmministrazione,\n    }\n  );\n}\n\n// get ANAC periodic verification failed outcome details\nconst outcomeFailureDetails = (anno, codiceFiscaleAmministrazione) => {\n  return api.post(\n    \"/job/outcomeFailureDetails/anno/codiceFiscaleAmministrazione\",\n    {\n      anno,\n      codiceFiscaleAmministrazione,\n    }\n  );\n}\n\n// check url existence\nconst urlExistenceAndMatch = (url, fileToMatch) => {\nconsole.log(\"*** jobService - url,fileToMatch:\", url, fileToMatch);\n  return api.post(\n    \"/job/urlExistenceAndMatch/url/fileToMatch\",\n    {\n      url,\n      fileToMatch,\n    }\n  );\n}\n\n// // just to ignore big xml when debug printing...\n// const sanitizeJob = (job) => {\n//   if (!job?.transform?.xml) {\n//     return job;\n//   }\n//   let j = job;\n//   j.transform.xml = \"…\";\n//   return j;\n// }\n\n// get ANAC periodic verification failed outcome details\nconst getPlans = () => {\n  return api.get(\n    \"/job/getPlans\",\n  );\n}\n\nconst JobService = {\n  get,\n  set,\n  upload,\n  transformXls2Xml,\n  validateXml,\n  outcomeCheck,\n  outcomeFailureDetails,\n  urlExistenceAndMatch,\n  //sanitizeJob,\n  getPlans,\n};\n\nexport default JobService;\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabNextButton, TabTooltip } from \"./TabsComponents\";\n\nfunction Tab01Start(props) {\n  const { t } = useTranslation();\n  const [ nextIsEnabled ] = useState(true);\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Welcome!\")}\n        </TabTitle>\n        <TabParagraph>\n          {t(\"This is our proposal to fulfill the requirements of the\")} {\" \"}\n          <a href=\"https://www.anticorruzione.it/-/adempimenti-legge-190/2012-art.-1-comma-32-7\" target=\"legge190\">\n            {t(\"Legge 190\")}\n          </a>\n          {\".\"} {t(\"We hope it is clear and simple to use\")}.\n          </TabParagraph>\n        <TabParagraph>\n          {t(\"This app will walk you through the few steps you need to complete the fulfillment successfully\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"To get started you'll need to download an Excel template\")}\n          <TabTooltip\n            title={t(\"It can be in MicroSoft-Excel format, or in ODS format\") + \".\"}\n          >\n          </TabTooltip>\n          {\",\"} {t(\"which contains rules to guide you in the compilation, and minimize possible formal errors\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"Then you will have to enter, one per line, all the goods or services that your structure has contracted out in the current year\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"At the end of the year, generally by the end of January of the following year, it will be sufficient to upload the filled Excel sheet here\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"At this point our system will carry out the formal check of the entered data\")}.\n          {t(\"In the event that some anomaly is reported, you will have to correct the reported anomalies in the Excel file, and then re-upload it\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"You will then be able to download the XML document produced, which will be published on the site your structure refers to\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"At this point you will have practically completed the fulfillment\")}.\n          {t(\"If you want, you can check - again on this site - the outcome of the verification by the ANAC\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"Please note that we are always available to answer you for any doubts or uncertainties\")}.\n          {t(\"The assistance methods are different, from telephone support to email support, and also depend on the plan chosen\")}.\n          {t(\"References can be found in the menu under \\\"Support\\\"\")}.\n        </TabParagraph>\n      </TabBodyScrollable>\n\n      <div>\n        <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n          {t(\"Continue\")}\n        </TabNextButton>\n      </div>\n    </TabContainer>\n  );\n}\nTab01Start.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab01Start.defaultProps = {\n};\n\nexport default React.memo(Tab01Start);\n","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport PropTypes from \"prop-types\";\nimport { useModal } from \"mui-modal-provider\";\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport AuthService from \"../services/AuthService\";\nimport TokenService from \"../services/TokenService\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport FlexibleDialog from \"./FlexibleDialog\";\nimport config from \"../config\";\nimport { downloadLocalUrl } from \"../libs/Misc\";\n\n\n\nfunction Tab02DownloadTemplate(props) {\n  const { t } = useTranslation();\n  const history = useHistory();\n  const [ prevIsEnabled, ] = useState(true);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(() => props.job?.templateDownloaded ?? false);\n\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  const userIsAuthenticated = () => {\n    if (!AuthService.getCurrentUser()) { // user is not authenticated\n      openDialog({\n        title: t(\"Please log in or register\"),\n        contentText: t(\"You need to be authenticated to proceed\"),\n        actions: [\n          {\n            text: t(\"Login\"),\n            closeModal: true,\n            autoFocus: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signin\");\n            },\n          },\n          {\n            text: t(\"Register\"),\n            closeModal: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signup\");\n            },\n          },\n          {\n            text: t(\"Cancel\"),\n            closeModal: true,\n            callback: () => props.goto(\"prev\"),\n          }\n        ],\n      });\n      return false;\n    }\n    return true;\n  }\n\n  const onDownload = () => {\n    if (userIsAuthenticated()) {\n      downloadLocalUrl(config.data.templateDownloadUrl);\n      setNextIsEnabled(true);\n      props.setJob({...props.job, templateDownloaded: true/*, template: {...props.job?.template, downloaded: true}*/});\n    }\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Download\")}\n        </TabTitle>\n        <TabParagraph>\n          {t(\"Download Excel template, where you'll be able to insert contracts data\")}.\n        </TabParagraph>\n        <TabParagraph>\n          <Button onClick={onDownload} variant=\"contained\" color=\"tertiary\">\n            {t(\"Download\")} ⬇\n          </Button>\n        </TabParagraph>\n        {/* <br />\n        <TabParagraph small>\n          <input type=\"checkbox\"></input>\n          {t(\"Clicca qui se preferisci la versione ODS (Open Document Format),\n          nel caso che tu utilizzi LibreOffice anziché Microsoft Office\")}.\n        </TabParagraph> */}\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab02DownloadTemplate.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab02DownloadTemplate.defaultProps = {\n};\n\nexport default React.memo(Tab02DownloadTemplate);\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@mui/styles\";\nimport Grid from \"@mui/material/Grid\";\nimport { useTranslation } from \"react-i18next\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\n\nconst useStyles = makeStyles(theme => ({\n  ul: {\n    paddingHorizontal: 25,\n  }\n}));\n\nfunction Tab03FillData(props) {\n  const classes = useStyles();\n  //const { auth } = useContext(AuthContext);\n  const { t } = useTranslation();\n  const [ prevIsEnabled ] = useState(true);\n  const [ nextIsEnabled ] = useState(true);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Fill your data\")}\n        </TabTitle>\n        <TabParagraph>\n          {t(\"Now you can open the downloaded template with your spreadsheet program\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"There are 2 sheets: \\\"METADATI\\\" and \\\"ELENCO GARE\\\"\")}.\n          <br />\n          {t(\"We advise you to start from the first sheet, \\\"METADATI\\\", and enter the 4 general data required:\")}\n          <ul className={classes.ul}>\n            <li><i>{\"codiceFiscaleStrutturaProponente\"}</i> {t(\"the tax code of your company\")}</li>\n            <li><i>{\"denominazioneStrutturaProponente\"}</i> {t(\"the business name of your company\")}</li>\n            <li><i>{\"annoRiferimento\"}</i> {t(\"the reference year for which you will enter contracts\")}</li>\n            <li><i>{\"urlFile\"}</i> {t(\"the URL address where the final document will be published\")}</li>\n          </ul>\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"At this point you can move on to the second sheet, \\\"ELENCO GARE\\\"\")}.<br />\n          {t(\"Each contract (or \\\"tender\\\") must be entered, one per line\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"The fields to fill in are:\")}\n          <ul className={classes.ul}>\n            <li><i>{\"CIG\"}</i> {t(\"the Tender Identification Code: a unique code that identifies each tender\")}</li>\n            <li><i>{\"OGGETTO\"}</i> {t(\"the object of the tender\")}</li>\n            <li><i>{\"SCELTA CONTRAENTE\"}</i> {t(\"the type of contractor; it must be chosen from a predefined list, available in the sheet\")}</li>\n            <li><i>{\"PARTECIPANTI / AGGREGATO o SINGOLO\"}</i> {t(\"the type of participant: aggregate (A) or individual (S)\")}</li>\n            <li><i>{\"PARTECIPANTI / COD. FISCALE o ID. ESTERO\"}</i> {t(\"the participant's tax code (or foreign ID if not Italian)\")}</li>\n            <li><i>{\"PARTECIPANTI / RAGIONE SOCIALE\"}</i> {t(\"the partecipant's business name\")}</li>\n            <li><i>{\"PARTECIPANTI / RUOLO\"}</i> {t(\"the role of the participant; it must be chosen from a predefined list, available in the sheet\")}</li>\n            <li><i>{\"AGGIUDICATARI\"}</i> {t(\"indicates whether the participant(s) are awarded the contract (S), or not (empty)\")}</li>\n            <li><i>{\"IMPORTO AGGIUDICAZIONE\"}</i> {t(\"the contract award amount\")}</li>\n            <li><i>{\"DATA INIZIO\"}</i> {t(\"the date of the award of the contract\")}</li>\n            <li><i>{\"DATA ULTIMAZIONE\"}</i> {t(\"the date of completion of the contract\")}</li>\n            <li><i>{\"IMPORTO DELLE SOMME LIQUIDATE\"}</i> {t(\"the amount of the liquidated amount\")}</li>\n          </ul>\n        </TabParagraph>\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab03FillData.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab03FillData.defaultProps = {\n};\n\nexport default React.memo(Tab03FillData);\n","import React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { useDropzone } from \"react-dropzone\";\n\nconst baseStyle = {\n  flex: 1,\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\",\n  padding: \"20px\",\n  borderWidth: 2,\n  borderRadius: 10,\n  borderColor: \"#64a36f\",\n  borderStyle: \"dashed\",\n  backgroundColor: \"#cef0b9\",\n  color: \"#353535\",\n  outline: \"none\",\n  transition: \"border .24s ease-in-out\",\n};\n\nconst focusedStyle = {\n  backgroundColor: \"#d3f6d1\",\n  borderColor: \"#a7d7c5\",\n};\n\nconst acceptStyle = {\n  backgroundColor: \"lightgreen\",\n  borderColor: \"darkgreen\",\n};\n\nconst rejectStyle = {\n  backgroundColor: \"lightred\",\n  borderColor: \"darkred\",\n};\n\nconst disabledStyle = {\n  backgroundColor: \"lightgray\",\n  borderColor: \"darkgray\",\n  fontStyle: \"italic\",\n};\n\nconst DragNDrop = ({ drop, accept, disabled }) => {\n  const { t } = useTranslation();\n  const {\n    getRootProps,\n    isFocused,\n    isDragAccept,\n    isDragReject,\n    isDragActive\n  } = useDropzone({\n    onDrop: drop,\n    accept: accept,\n  });\n\n  const style = useMemo(() => ({\n    ...baseStyle,\n    ...(disabled ? disabledStyle : isFocused ? focusedStyle : {}),\n    ...(disabled ? disabledStyle : isDragAccept ? acceptStyle : {}),\n    ...(disabled ? disabledStyle : isDragReject ? rejectStyle : {})\n  }), [\n    isFocused,\n    isDragAccept,\n    isDragReject,\n    disabled,\n  ]);\n\n  const {onClick, onBlur, onDragEnter, onDragLeave, onDragOver, onDrop, onFocus, onKeyDown, ...getRootPropsDisabled} = getRootProps({style});\n  let getRootPropsActual = {};\n  if (disabled) {\n    getRootPropsActual = getRootPropsDisabled;\n  } else {\n    getRootPropsActual = getRootProps({style});\n  } \n\n  return (\n    <div className=\"dropzone-div\" {...getRootPropsActual}>\n      <div className=\"text-center\">\n        {\n          disabled ? (\n            <p>\n              {t(\"Remove file to load a new one\")}\n            </p>\n          ) :\n          isDragActive ? (\n            <p className=\"dropzone-content\">\n              {t(\"Release to drop the files here\")}\n            </p>\n          ) : (\n            <p className=\"dropzone-content\">\n              {t(\"Drag 'n drop some files here, or click to select files\")}\n            </p>\n          )\n        }\n      </div>\n    </div>\n  );\n};\n\nDragNDrop.propTypes = {\n  drop: PropTypes.func.isRequired,\n  accept: PropTypes.array.isRequired,\n  disabled: PropTypes.bool,\n};\nDragNDrop.defaultProps = {\n  disabled: false,\n};\n\nexport default DragNDrop;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@mui/material/Grid\";\nimport { useModal } from \"mui-modal-provider\";\nimport AuthService from \"../services/AuthService\";\nimport JobService from \"../services/JobService\";\nimport TokenService from \"../services/TokenService\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabResetButton, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport { errorMessage } from \"../libs/Misc\";\nimport { toast } from \"./Toast\";\nimport DragNDrop from \"./DragNDrop\";\nimport FlexibleDialog from \"./FlexibleDialog\";\n\n\n\nfunction Tab04Upload(props) {\n  //const classes = useStyles();\n  const { t } = useTranslation();\n  const history = useHistory();\n  const [ prevIsEnabled ] = useState(true);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(!!props?.job?.file);\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  const [ accept ] = useState([\n    \".csv\",\n    \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n    \"application/vnd.ms-excel\",\n  ]);\n\n  const userIsAuthenticated = () => {\n    if (!AuthService.getCurrentUser()) { // user is not authenticated\n      openDialog({\n        title: t(\"Please log in or register\"),\n        contentText: t(\"You need to be authenticated to proceed\"),\n        actions: [\n          {\n            text: t(\"Login\"),\n            closeModal: true,\n            autoFocus: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signin\");\n            },\n          },\n          {\n            text: t(\"Register\"),\n            closeModal: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signup\");\n            },\n          },\n          {\n            text: t(\"Cancel\"),\n            closeModal: true,\n            callback: () => props.goto(\"prev\"),\n          }\n        ],\n      });\n      return false;\n    }\n    return true;\n  };\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  const userIsAuthenticatedCallback = useCallback(() => { return userIsAuthenticated() }, []);\n  \n  useEffect(() => {\n    userIsAuthenticatedCallback(); // check if user is authenticated\n  }, [userIsAuthenticatedCallback]);\n\n  const fileSet = useCallback(async(file) => {\n    props.setJob({...props.job, file});\n  }, [props]);\n\n  const fileReset = useCallback(async() => {\n    /**\n     * When file is reset, we clear the full job! (we only keep tabId)\n     * NEWFEATURE: possibly save current job as historical record\n     */\n    let job = {};\n    job.tabId = props.job.tabId;\n    //job.file = null;\n    props.setJob(job);\n    setNextIsEnabled(false);\n  }, [props]);\n\n  const fileValidate = useCallback((file) => { // validate file type or name\n    // ods: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\n    // xls: application/vnd.ms-excel\n    if (!( // TODO: check if these tests are sufficiently general...\n      file?.type?.split(\"/\")[1]?.match(/officedocument\\.spreadsheetml\\.sheet/i) ||\n      file?.type?.split(\"/\")[1]?.match(/ms-excel/i)\n    )) {\n      return t(\"Please upload a spreadsheet\") + `.` +\n        (file?.type ? ` ` + t(\"Selected file looks like {{fileType}}\", { fileType: file.type }) : \"\")\n      ;\n    }\n    return null; // validated\n  }, [t]);\n\n  const fileUpload = useCallback(async(file) => {\n    await JobService.upload(file).then(\n      result => {\n        console.log('Upload success, file path', result.data.file);\n        fileSet(result.data.file);\n      },\n      error => {\n        console.error('Upload error:', error);\n        fileReset();\n        props.setJob({...props.job, file: {error: errorMessage(error)}}) // set upload error in job.file.error\n        toast.error(errorMessage(error));\n      }\n    );\n  }, [props, fileSet, fileReset]);\n\n  const fileSelect = useCallback(async(selectedFile) => {\n    if (selectedFile) {\n      const error = fileValidate(selectedFile);\n      if (error) {\n        //setFile(null);\n        props.setJob({...props.job, file: null});\n        //fileSet(null);\n        setNextIsEnabled(false);\n      } else {\n        //setFile(selectedFile);\n        //fileSet(selectedFile);\n        props.setJob({...props.job, file: selectedFile});\n        await fileUpload(selectedFile);\n        setNextIsEnabled(true);\n      }\n    } else {\n      toast.error(t(\"No file selected, sorry... Please, repeat...\"));\n      //setFile(null);\n      //fileSet(null);\n      props.setJob({...props.job, file: null});\n      setNextIsEnabled(false);\n    }\n  }, [/*fileSet, */props, fileUpload, fileValidate, t]);\n\n  // on drop callback\n  const onDrop = useCallback(acceptedFiles => {\n    // this callback will be called after files get dropped, we will get the acceptedFiles;\n    // if needed, we can even access the rejected files too\n    console.log(\"accepted files:\", acceptedFiles);\n    fileSelect(acceptedFiles[0]);\n  }, [fileSelect]);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = async () => {\n    props.goto(\"next\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Upload\")}\n        </TabTitle>\n        <TabParagraph>\n          {t(\"Load filled spreadsheet\")}\n        </TabParagraph>\n\n        <div className=\"container\">\n          <DragNDrop\n            drop={onDrop}\n            accept={accept}\n            disabled={!!props?.job?.file?.originalname}\n          />\n          <br />\n          <TabParagraph>\n            {props?.job?.file?.originalname && (\n              <>\n                {t(\"Selected file\")}: <b>{props?.job?.file?.originalname}</b>\n                &emsp;\n                <TabResetButton\n                  onClick={fileReset}\n                  title={t(\"Remove uploaded file, and restart the whole process\")}>\n                  {t(\"Remove\")} 🗑\n                </TabResetButton>\n              </>\n            )}\n            </TabParagraph>\n        </div>\n\n      </TabBodyScrollable>\n\n      {/* <pre>\n        JOB: {JSON.stringify(props.job, null, 2)}\n      </pre> */}\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\n\nTab04Upload.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab04Upload.defaultProps = {\n};\n\nexport default React.memo(Tab04Upload);","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useHistory } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { useModal } from \"mui-modal-provider\";\nimport { makeStyles } from \"@mui/styles\";\nimport Grid from \"@mui/material/Grid\";\nimport Accordion from \"@mui/material/Accordion\";\nimport AccordionSummary from \"@mui/material/AccordionSummary\";\nimport AccordionDetails from \"@mui/material/AccordionDetails\";\nimport Card from \"@mui/material/Card\";\nimport CardContent from '@mui/material/CardContent';\nimport Typography from \"@mui/material/Typography\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport { toast } from \"./Toast\";\nimport FlexibleDialog from \"./FlexibleDialog\";\nimport { useAxiosLoader } from \"../hooks/useAxiosLoader\";\nimport TokenService from \"../services/TokenService\";\nimport JobService from \"../services/JobService\";\nimport { errorMessage } from \"../libs/Misc\";\nimport config from \"../config\";\n\nconst useStyles = makeStyles(theme => ({\n  accordionRoot: {\n    fontSize: \"0.9em\",\n  },\n  danger: {\n    color: theme.palette.error.dark,\n    fontWeight: \"bold\",\n  }\n}));\n\n\n\nfunction Tab05Produce(props) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const history = useHistory();\n  const user = TokenService.getUser();\n  const [ loading ] = useAxiosLoader();\n  const [ info, setInfo ] = useState([]);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(props.job?.transform?.code === \"OK\");\n  const [ prevIsEnabled] = useState(true);\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  useEffect(() => {\n    if (props.job?.transform) {\n      if (props.job?.transform?.truncatedDueToPlanLimit) {\n        if (!props.job?.transform?.planUpgradeDeclined) {\n          openDialog({\n            title: t(\"Please upgrade your plan\"),\n            contentText: \n              t(\"You need to upgrade your plan to proceed.\") + \"\\n\" +\n              t(\"Your current plan is \\\"{{planName}}\\\".\", { planName: user?.plan?.name}) + \"\\n\" +\n              t(\"To elaborate {{cigCount}} CIGs you need at least plan \\\"{{planName}}\\\"\", { cigCount: props.job?.transform?.cigCount, planName: props.job?.transform?.planRequired?.name }),\n            actions: [\n              {\n                text: t(\"Upgrade plan\"),\n                closeModal: true,\n                autoFocus: true,\n                callback: () => {\n                  TokenService.set(\"redirect\", props.tabId);\n                  history.push(\"/profile\", { tabValue: 1 }); // redirect to /profile route, to second tab, where plan can be changed\n                },\n              },\n              {\n                text: t(\"Proceed with the first {{cigsCountAllowedllowed}} CIGs\", { cigsCountAllowedllowed: user?.plan?.cigsCountAllowedllowed }),\n                closeModal: true,\n                callback: () => {\n                  props.setJob({...props.job, transform: {...props.job?.transform, planUpgradeDeclined: true}});\n                },\n              },\n            ],\n          });\n        }\n      }\n    }\n  /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job?.transform]);\n\n  useEffect(() => {\n    if (props.job?.file && !props.job?.transform) {\n      (async () => {\n        await JobService.transformXls2Xml(props.job.file.path).then(\n          response => {\n            props.setJob({...props.job, transform: response.data?.result});\n          },\n          error => {\n            toast.error(errorMessage(error));\n            //props.goto(\"prev\");\n          },\n        );\n      })();\n    }\n  }, []);\n\n  useEffect(() => {\n    if (props.job?.file && (props.job?.transform?.code === \"OK\") && !props.job?.validateXml) {\n      (async () => {\n        await JobService.validateXml(props.job.transform).then(\n          response => {\n            props.setJob({...props.job, validateXml: response?.data?.result});\n            setNextIsEnabled(props.job?.transform?.code === \"OK\" && response?.data?.result?.code === \"OK\" && allErrors().length === 0);\n          },\n          error => {\n            toast.error(errorMessage(error));\n            setNextIsEnabled(false);\n            //props.goto(\"prev\");\n          },\n        );\n      })();\n    }\n    /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job?.transform?.code]);\n\n\n  useEffect(() => {\n    if (props.job?.validateXml) {\n      reclaimInfo();\n    }\n  }, [props.job]);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  const reclaimInfo = () => { // info preparation\n    let info = [];\n    if (props.job?.file) info[t(\"Original file name\")] = props.job.file.originalname;\n    if (props.job?.transform?.metadati?.titolo) info[t(\"Title\")] = props.job.transform.metadati.titolo;\n    //if (props.job?.transform?.metadati?.abstract) info[t(\"Abstract\")] = props.job.transform.metadati.abstract;\n    //if (props.job?.transform?.metadati?.dataPubblicazioneDataset) info[t(\"Dataset publish date\")] = props.job.transform.metadati.dataPubblicazioneDataset;\n    //if (props.job?.transform?.metadati?.dataUltimoAggiornamentoDataset) info[t(\"Dateset last update date\")] = props.job.transform.metadati.dataUltimoAggiornamentoDataset;\n    //if (props.job?.transform?.metadati?.entePubblicatore) info[t(\"Publishing body\")] = props.job.transform.metadati.entePubblicatore;\n    if (props.job?.transform?.metadati?.annoRiferimento) info[t(\"Reference year\")] = props.job.transform.metadati.annoRiferimento;\n    //if (props.job?.transform?.metadati?.urlFile) info[t(\"Url file\")] = props.job.transform.metadati.urlFile;\n    if (props.job?.transform?.rownum) info[t(\"Number of source rows\")] = props.job.transform.rownum;\n    if (props.job?.transform?.cigCount) info[t(\"Number of CIGs\")] = props.job.transform?.cigCount\n    if (props.job?.transform?.importoAggiudicazioneTotale) info[t(\"Total award amount\")] = `${config.currency.default} ${props.job.transform.importoAggiudicazioneTotale}`;\n    if (props.job?.transform?.importoSommeLiquidateTotale) info[t(\"Total liquidated amount\")] = `${config.currency.default} ${props.job.transform.importoSommeLiquidateTotale}`;\n    setInfo(info);\nconsole.log(\"INFO1:\", info);\n  }\n\n  const allWarnings = () => {\n    const transformWarnings = props.job?.transform?.warnings ?? [];\n    const validateXmlWarnings = props.job?.validateXml?.warnings ?? [];\n    return transformWarnings.concat(validateXmlWarnings);\n  }\n\n  const allErrors = () => {\n    const transformErrors = props.job?.transform?.errors ?? [];\n    const validateXmlErrors = props.job?.validateXml?.errors ?? [];\n    return transformErrors.concat(validateXmlErrors);\n  }\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Produce XML dataset\")}\n        </TabTitle>\n        <TabParagraph>\n          {loading && `🟡 ${t(\"Transforming XLS to XML and validating...\")}`}\n          {/* {statusLocal.loading === \"transform\" && `🟡 ${t(\"Transforming XLS to XML...\")}`}\n          {statusLocal.loading === \"validateXml\" && `🟡 ${t(\"Validating...\")}`} */}\n        </TabParagraph>\n        {props.job?.transform?.truncatedDueToPlanLimit && (\n          <TabParagraph>\n            <Typography align=\"center\" className={classes.danger}>{t(\"Warning\")}: {t(\"The produced dataset has been truncated to {{cigs}} CIGs; you can proceed and downoad it, but file is not to be published\", {cigs: user?.plan?.cigsCountAllowedllowed})}.</Typography>\n            <br />\n          </TabParagraph>\n        )}\n\n        {props.job?.transform?.outputFile && (Object.keys(info).length > 0) && (\n          <Grid\n            container\n            sx={{ overflowY: \"auto\", maxHeight: \"300\" }}\n            spacing={0}\n            direction=\"column\"\n            alignItems=\"center\"\n            justify=\"center\"\n          >\n            <Grid item>\n              <Card sx={{backgroundColor: \"#eee\"}}>\n                <CardContent>\n                  {Object.keys(info).map((key, index) => (\n                    <Typography sx={{fontSize: \".8em\" }} color=\"text.secondary\" key={index}>{key}: {info[key]}</Typography>\n                  ))}\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n        )}\n\n        {(!loading &&\n          props.job?.transform && (props.job?.transform?.code !== \"OK\" && props.job?.transform?.message) &&\n          <Typography>🔴 {props.job?.transform?.message}</Typography>\n        )}\n        {(!loading &&\n          props.job?.validateXml && (props.job?.validateXml?.code !== \"OK\" && props.job?.validateXml?.message) &&\n          <Typography>🔴 {props.job?.validateXml?.message}</Typography>\n        )}\n        {(!loading &&\n          props.job?.transform?.code === \"OK\" &&\n          props.job?.transform?.outputFile &&\n          props.job?.validateXml?.code === \"OK\" &&\n          allErrors().length === 0 &&\n          allWarnings().length === 0) && (\n          <Typography>🟢 {t(\"Production and validation completed successfully\")}</Typography>\n        )}\n\n        {(allErrors().length > 0) && (\n          <span style={{color: \"darkred\"}}>\n            <TabParagraph>\n              <Accordion disableGutters={true} classes={{ root: classes.accordionRoot }} style={{color:\"darkred\"}}>\n                <AccordionSummary\n                  expandIcon={<ExpandMoreIcon />}\n                  aria-controls={`panel-error-content`}\n                  id={`panel-error-header`}\n                >\n                  <Typography>🔴 {`${allErrors().length} ${t(\"errors\")}`}</Typography>\n                </AccordionSummary>\n                <AccordionDetails>\n                  <Typography>\n                  {allErrors().map((error, index) => (\n                    <div key={index} style={{borderTop: \"1px solid #ddd\", paddingTop: 5}}>\n                      {1 + index}) {error}\n                    </div>\n                  ))}\n                  </Typography>\n                </AccordionDetails>\n              </Accordion>\n            </TabParagraph>\n          </span>\n        )}\n\n        {(allWarnings().length > 0) && (\n          <span style={{color: \"darkorange\"}}>\n            <TabParagraph>\n              <Accordion disableGutters={true} classes={{ root: classes.accordionRoot }} style={{color: \"orange\"}}>\n                <AccordionSummary\n                  expandIcon={<ExpandMoreIcon />}\n                  aria-controls={`panel-warning-content`}\n                  id={`panel-warning-header`}\n                >\n                  <Typography>🟠 {`${allWarnings().length} ${t(\"warnings\")}`}</Typography>\n                </AccordionSummary>\n                <AccordionDetails>\n                  <Typography>\n                  {allWarnings().map((warning, index) => (\n                    <div key={index} style={{borderTop: \"1px solid #ddd\", paddingTop: 5}}>\n                      {1 + index}) {warning}\n                    </div>\n                  ))}\n                  </Typography>\n                </AccordionDetails>\n              </Accordion>\n            </TabParagraph>\n          </span>\n        )}\n\n      </TabBodyScrollable>\n\n      <Grid container className={classes.root}>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n      {/* <pre>\n        JOB: {JSON.stringify(props.job, null, 2)}\n      </pre> */}\n\n    </TabContainer>\n  );\n}\n\nTab05Produce.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab05Produce.defaultProps = {\n};\n\nexport default React.memo(Tab05Produce);\n","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { useModal } from \"mui-modal-provider\";\nimport { makeStyles } from \"@mui/styles\";\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport Typography from \"@mui/material/Typography\";\nimport AuthService from \"../services/AuthService\";\nimport TokenService from \"../services/TokenService\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport { downloadRemoteUrl } from \"../libs/Misc\";\nimport FlexibleDialog from \"./FlexibleDialog\";\n\n\n\nconst useStyles = makeStyles(theme => ({\n  danger: {\n    color: theme.palette.error.dark,\n    fontWeight: \"bold\",\n  }\n}));\n\nfunction Tab06DownloadDataset(props) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const history = useHistory();\n  const user = TokenService.getUser();\n  const [ prevIsEnabled, ] = useState(true);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(() => !!(props.job?.datasetDownloaded && !props.job?.transform?.truncatedDueToPlanLimit));\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  const userIsAuthenticated = () => {\n    if (!AuthService.getCurrentUser()) { // user is not authenticated\n      openDialog({\n        title: t(\"Please log in or register\"),\n        contentText: t(\"You need to be authenticated to proceed\"),\n        actions: [\n          {\n            text: t(\"Login\"),\n            closeModal: true,\n            autoFocus: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signin\");\n            },\n          },\n          {\n            text: t(\"Register\"),\n            closeModal: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signup\");\n            },\n          },\n          {\n            text: t(\"Cancel\"),\n            closeModal: true,\n            callback: () => props.goto(\"prev\"),\n          }\n        ],\n      });\n      return false;\n    }\n    return true;\n  }\n\n  const ondatasetDownloaded = () => {\n    if (userIsAuthenticated()) {\n      //let url = config.service.endpoint + \"marco/dataset-2022.xml\";\n      let url = props.job.transform.outputUrl;\nconsole.log(\"job:\", props.job);\nconsole.log(\"url:\", url);\n      downloadRemoteUrl(url);\n      setNextIsEnabled(!props.job?.transform?.truncatedDueToPlanLimit);\n      props.setJob({...props.job, datasetDownloaded: true});\n    }\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Download produced dataset\")}\n        </TabTitle>\n\n        {props.job?.transform?.truncatedDueToPlanLimit && (\n          <TabParagraph>\n            <Typography align=\"center\" className={classes.danger}>{t(\"Warning\")}: {t(\"The produced dataset has been truncated to {{cigs}} CIGs; you can proceed and downoad it, but file is not to be published\", {cigs: user?.plan?.cigsCountAllowedllowed})}.</Typography>\n            <br />\n          </TabParagraph>\n        )}\n\n        {props.job?.transform?.outputFile && (\n          <>\n            <TabParagraph>\n                {t(\"Download dataset\")}.\n            </TabParagraph>\n            <TabParagraph>\n              <Button onClick={ondatasetDownloaded} variant=\"contained\" color=\"tertiary\">\n                {t(\"Download\")} ⤵\n              </Button>\n            </TabParagraph>\n          </>\n        )}\n\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\n\nTab06DownloadDataset.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab06DownloadDataset.defaultProps = {\n};\n\nexport default React.memo(Tab06DownloadDataset);\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport { toast } from \"./Toast\";\nimport { errorMessage } from \"../libs/Misc\";\nimport { useAxiosLoader } from \"../hooks/useAxiosLoader\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport JobService from \"../services/JobService\";\n\n\n\nfunction Tab07Publish(props) {\n  const { t } = useTranslation();\n  const [ loading ] = useAxiosLoader();\n  const [ prevIsEnabled, ] = useState(true);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(() => props.job?.datasetDownloaded !== undefined ? props.job.datasetDownloaded : false);\n  const [ forceVerifyPublished, setForceVerifyPublished ] = useState(false);\n  const publishUrlFile = props.job?.transform?.metadati?.urlFile;\n  const fileToMatch = props.job?.transform?.outputFile;\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  async function onVerifyPublished() {\n    setForceVerifyPublished(true);\n  };\n\n  useEffect(() => {\n    if (props.job && props.job.transform) {\n      if (!props.job?.datasetIsPublished || forceVerifyPublished) {\n      (async () => {\n        setForceVerifyPublished(false);\n        await JobService.urlExistenceAndMatch(publishUrlFile, fileToMatch).then(\n          result => {\n            props.setJob({...props.job, datasetIsPublished: result.data.published, datasetIsPublishedAsIs: result.data.publishedAsIs});\n            setNextIsEnabled(result?.data?.published && result?.data?.publishedAsIs);\n          },\n          error => {\nconsole.error(\"Tab06DownloadDataset error:\", error);\n            toast.error(errorMessage(error));\n            setNextIsEnabled(false);\n            //props.setJob({...props.job, outcome: error.response.data.message});\n            //props.goto(\"prev\");\n          }\n        );\n      })();\n    }\n  }\n  /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job.transform, props.job.outcome, forceVerifyPublished]);\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Publish downloaded dataset\")}\n        </TabTitle>\n        {props.job?.transform?.outputFile && (\n          <>\n            <TabParagraph>\n              {loading && (\n                `${t(\"Checking\")}...`\n              )}\n              {!loading && !props.job.datasetIsPublished && (\n                `🔴 ${t(`Dataset is not published yet at address {{publishUrlFile}}`, {publishUrlFile})}`\n              )}\n              {!loading && props.job.datasetIsPublished && !props.job.datasetIsPublishedAsIs && (\n                `🔴 ${t(`Dataset is published at address {{publishUrlFile}}, but differs from produced dataset`, {publishUrlFile})}`\n              )}\n              {!loading && props.job.datasetIsPublished && props.job.datasetIsPublishedAsIs && (\n                `🟢 ${t(`Dataset is correctly published at address {{publishUrlFile}}`, {publishUrlFile})}`\n              )}\n            </TabParagraph>\n            <TabParagraph>\n              {!loading && (\n                <>\n                  <br />\n                  <Button onClick={onVerifyPublished} variant=\"contained\" color=\"tertiary\">\n                    {t(\"Verify publication now\")} 🌍\n                  </Button>\n                </>\n              )}\n            </TabParagraph>\n\n            {/*<pre>\n              JOB: {JSON.stringify(props.job, null, 2)}\n              </pre>*/}\n\n          </>\n        )}\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab07Publish.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab07Publish.defaultProps = {\n};\n\nexport default React.memo(Tab07Publish);\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { Grid, Button } from \"@mui/material\";\nimport { toast } from \"./Toast\";\nimport { errorMessage, dateToLocaleDate } from \"../libs/Misc\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport { useAxiosLoader } from \"../hooks/useAxiosLoader\";\nimport JobService from \"../services/JobService\";\n\n\n\nfunction Tab08Validation(props) {\n  const { t } = useTranslation();\n  const [ loading ] = useAxiosLoader();\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(false);\n  const [ prevIsEnabled ] = useState(true);\n  const [ forceCheckValidated, setForceCheckValidated ] = useState(!props.job?.outcome?.esitoUltimoTentativoAccessoUrl);\n\n  async function onCheckValidated() {\n    setForceCheckValidated(true);\n  };\n\n  useEffect(() => {\n    if (props.job?.transform) {\n      if (props.job?.outcome?.esitoUltimoTentativoAccessoUrl) {\n        setNextIsEnabled(props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"successo\");\n      }\n      if (forceCheckValidated) {\n        (async () => {\n          await JobService.outcomeCheck(\n            props.job?.transform?.metadati?.annoRiferimento,\n            props.job?.transform?.header?.codiceFiscaleStrutturaProponente\n          ).then(\n            result => {\n              setForceCheckValidated(false);\nconsole.log(\"OUTCOMECHECK result:\", result?.data?.result);\n              props.setJob({...props.job, outcome: result?.data?.result});\n              setNextIsEnabled(result.data?.result?.esitoUltimoTentativoAccessoUrl === \"successo\");\n            },\n            error => {\n              toast.error(errorMessage(error));\n              setNextIsEnabled(false);\n              //props.goto(\"prev\");\n            }\n          );\n        })();\n      }\n    }\n  /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job.transform, forceCheckValidated]);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  const tentativiAccessoUrlLast = props.job?.outcome?.tentativiAccessoUrl?.length - 1;\n  const listaAccessoRisorsaLast = (tentativiAccessoUrlLast >= 0 ? props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa?.length - 1 : -1);\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Check ANAC validation\")}\n        </TabTitle>\n        <TabParagraph>\n          {loading && (\n            `${t(\"Checking\")}...`\n          )}\n          {!loading && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"in corso\") && (\n            `🟡 ${t(\"attempt in progress\")}...`\n          )}\n          {!loading && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"successo\") && (\n            `🟢 ${t(\"last attempt succeeded\")}`\n          )}\n          {!loading && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"fallito\") && (\n            `🔴 ${t(\"last attempt failed\")}`\n          )}\n        </TabParagraph>\n        {!loading && (\n          <div style={{fontSize: \"0.8em\", marginLeft: \"3em\"}}>\n            <TabParagraph>\n              <i>{t(\"last verification date\")}:</i> {props.job?.outcome?.dataUltimoTentativoAccessoUrl ? dateToLocaleDate(props.job?.outcome?.dataUltimoTentativoAccessoUrl) : t(\"never\")}\n            </TabParagraph>\n          </div>\n        )} \n        {!loading && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"fallito\") && (\n          <div style={{fontSize: \"0.8em\", marginLeft: \"3em\"}}>\n            <TabParagraph>\n              <i>{t(\"outcome code\")}:</i> {props.job?.outcome?.esitoComunicazione?.codice ?? \"?\"}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"outcome description\")}:</i> {props.job?.outcome?.esitoComunicazione?.descrizione ?? \"?\"}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"outcome detail\")}:</i> {props.job?.outcome?.esitoComunicazione?.dettaglio ?? \"?\"}\n            </TabParagraph>\n          </div>\n        )}\n        {!loading && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"fallito\") && (tentativiAccessoUrlLast >= 0) && (\n          <div style={{fontSize: \"0.8em\", marginLeft: \"3em\"}}>\n            <TabParagraph>\n              <i>{t(\"last attempt to access url outcome code\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.esito?.codice ?? \"?\"}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"last attempt to access url outcome description\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.esito?.descrizione ?? \"?\"}\n            </TabParagraph>\n          </div>\n        )}\n        {!loading && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"fallito\") && (tentativiAccessoUrlLast >= 0) && (listaAccessoRisorsaLast >= 0) && (\n          <div style={{fontSize: \"0.8em\", marginLeft: \"3em\"}}>\n            <TabParagraph>\n              <i>{t(\"last attempt to access resource\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa[listaAccessoRisorsaLast]?.url ?? \"?\"}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"last attempt to access resource xml valid\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa[listaAccessoRisorsaLast]?.xmlValido ? t(\"yes\") : t(\"no\")}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"last attempt to access resource xml validation\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa[listaAccessoRisorsaLast]?.dettaglioValidazioneXml ?? t(\"(empty)\")}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"last attempt to access resource code\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa[listaAccessoRisorsaLast]?.esitoAccessoRisorsa?.codice ?? \"?\"}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"last attempt to access resource description\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa[listaAccessoRisorsaLast]?.esitoAccessoRisorsa?.descrizione ?? \"?\"}\n            </TabParagraph>\n          </div>\n        )}\n        <br />\n        <TabParagraph>\n          {props.job.datasetIsPublished && !(props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"successo\") && (\n            <Button onClick={onCheckValidated} variant=\"contained\" color=\"tertiary\">\n              {t(\"Check validation now\")} 🎯\n            </Button>\n          )}\n        </TabParagraph>\n        \n        {/* <pre>\n          JOB: {JSON.stringify(props.job, null, 2)}\n        </pre> */}\n\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab08Validation.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab08Validation.defaultProps = {\n};\n\nexport default React.memo(Tab08Validation);\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@mui/material/Grid\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton } from \"./TabsComponents\";\nimport config from \"../config\";\n\nfunction Tab09Finished(props) {\n  const { t } = useTranslation();\n  const [ prevIsEnabled ] = useState(true);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Finished\")}!\n        </TabTitle>\n        {props.job?.transform?.outputFile && (\n          <>\n            <TabParagraph>\n              <div style={{fontSize: 128, textAlign: \"center\"}}>\n                🏁\n              </div>\n            </TabParagraph>\n            <TabParagraph>\n              <div style={{textAlign: \"center\"}}>\n                {t(\"Compliments, you did comply successfully to {{referenceLawName}} fulfillments for year {{year}}\", {referenceLawName: config.referenceLawName, year: props.job?.transform?.metadati?.annoRiferimento})}\n              </div>\n            </TabParagraph>\n          </>\n        )}\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab09Finished.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab09Finished.defaultProps = {\n};\n\nexport default React.memo(Tab09Finished);\n","import React, { useState, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport PropTypes from \"prop-types\";\nimport makeStyles from '@mui/styles/makeStyles';\nimport withStyles from '@mui/styles/withStyles';\nimport AppBar from '@mui/material/AppBar';\nimport Paper from '@mui/material/Paper';\nimport Tabs from \"@mui/material/Tabs\";\nimport Tab from \"@mui/material/Tab\";\nimport Typography from \"@mui/material/Typography\";\nimport Box from \"@mui/material/Box\";\nimport TokenService from \"../services/TokenService\";\nimport JobService from \"../services/JobService\";\nimport Tab01Start from \"./Tab01Start\";\nimport Tab02DownloadTemplate from \"./Tab02DownloadTemplate\";\nimport Tab03FillData from \"./Tab03FillData\";\nimport Tab04Upload from \"./Tab04Upload\";\nimport Tab05Produce from \"./Tab05Produce\";\nimport Tab06DownloadDataset from \"./Tab06DownloadDataset\";\nimport Tab07Publish from \"./Tab07Publish\";\nimport Tab08Validation from \"./Tab08Validation\";\nimport Tab09Finished from \"./Tab09Finished\";\nimport config from \"../config\";\n\n\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`nav-tab-${index}`}\n      {...other}\n    >\n      <Box p={3}>\n        {children}\n      </Box>\n    </Typography>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\nconst a11yProps = (index) => {\n  return {\n    id: `nav-tab-${index}`,\n    \"aria-controls\": `nav-tabpanel-${index}`\n  };\n}\n\nconst StyledTab = withStyles((theme) => ({\n  root: {\n    opacity: 0.8,\n  },\n}))(props => {\n  return (\n    <Tab {...props} />\n  );\n});\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    //backgroundColor: theme.palette.background.paper,\n  },\n  // tabs: {\n  //   \"& .MuiTabs-indicator\": {\n  //     //display: \"none\",\n  //     backgroundColor: \"orange\",\n  //   }\n  // }\n  tab: {\n    backgroundColor: theme.palette.secondary.light,\n  },\n  tabIndicator: {\n    backgroundColor: \"MediumSeaGreen\", //theme.palette.secondary.dark,\n    height: 3,\n  }\n\n}));\n\nconst TabsPanel = () => {\n  const classes = useStyles();\n  const [ job, setJob ] = useState(() => TokenService.getJob());\n  //const { job, setJob } = useContext(JobContext);\n  //const [ job, setJob ] = useState(JobService.get());\n  //const [ job, setJob ] = useState(TokenService.getJob());\n  //const redirect = TokenService.getRedirect();\n  //const [ tabId, setTabId ] = useState(TokenService.getJob());\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const redirect = TokenService.get(\"redirect\");\n    if (redirect) {\n      setJob({...job, tabId: redirect });\n      TokenService.remove(\"redirect\");\n    }\n  }, [job]);\n  \n  useEffect(() => { // to serialize job\n    TokenService.setJob(job); // serialize locally, on local storage\n    JobService.set(job); // serialize remotely, on server db\n  }, [job]);\n\n  function changeTab(id) {\n    setJob({...job, tabId: id });\n  }\n\n  function forceTab(event, id) {\n    if (config.ui.userCanForceTabChange) { // user can force tab change by clicking on app bar titles\n      changeTab(id);\n    }\n  }\n  \n  function goto(where) {\n    let id = where;\n    if (typeof where === \"string\") {\n      switch (where.toLowerCase()) {\n        case \"start\":\n          break;\n        case \"download template\":\n          break;\n        case \"fill your data\":\n          break;\n        case \"upload\":\n          break;\n        case \"produce\":\n          break;\n        case \"download dataset\":\n          break;\n        case \"publish\":\n          break;\n        case \"wait for validation\":\n          break;\n        case \"finish!\":\n          break;\n        case \"next\":\n          id = job ? job.tabId + 1 : 0;\n          break;\n        case \"prev\":\n          id = job ? job.tabId - 1 : 0;\n          break;\n        default:\n          console.error(`Unforeseen where specification in goto: ${where}`);\n          return;\n      }\n    }\n    changeTab(id);\n  }\n\n  if (!job?.tabId) job.tabId = 0;\n  return (\n    <div className={classes.root}>\n      <AppBar elevation={0} position=\"fixed\" style={{/*backgroundColor: \"transparent\",*/ top: 50}}>\n        {/* <Tabs\n          value={job.tabId}\n          onChange={forceTab}\n          indicatorColor=\"primary\"\n          // textColor=\"primary\"\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          aria-label=\"scrollable auto tabs\"\n          className={classes.tabs}\n        > */}\n        <Paper elevation={1} square>\n          <Tabs\n            value={job?.tabId}\n            //indicatorColor=\"secondary\"\n            //textColor=\"secondary\"\n            variant=\"scrollable\"\n            scrollButtons=\"auto\"\n            onChange={forceTab}\n            aria-label=\"current section\"\n            classes={{\n              indicator: classes.tabIndicator\n            }}\n            className={classes.tab}\n          >\n            <StyledTab label={`${t(\"Start\")} 🪄`} {...a11yProps(0)} />\n            <StyledTab label={`${t(\"Download template\")} ▼`} {...a11yProps(1)} />\n            <StyledTab label={`${t(\"Fill your data\")} 🖋`} {...a11yProps(2)} />\n            <StyledTab label={`${t(\"Upload\")} ▲`} {...a11yProps(3)} />\n            <StyledTab label={`${t(\"Produce\")} 🛠️`} {...a11yProps(4)} />\n            <StyledTab label={`${t(\"Download dataset\")} ⤵`} {...a11yProps(5)} />\n            <StyledTab label={`${t(\"Publish\")} 🌍`} {...a11yProps(6)} />\n            <StyledTab label={`${t(\"Wait for validation\")} 🎯`} {...a11yProps(7)} />\n            <StyledTab label={`${t(\"Finish!\")} 🏁`} {...a11yProps(8)} />\n          </Tabs>\n        </Paper>\n      </AppBar>\n\n      <>\n        {(job?.tabId === 0) && (\n          <TabPanel index={0} value={job.tabId}>\n            <Tab01Start goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 1) && (\n          <TabPanel index={1} value={job.tabId}>\n            <Tab02DownloadTemplate goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 2) && (\n          <TabPanel index={2} value={job.tabId}>\n            <Tab03FillData goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 3) && (\n          <TabPanel index={3} value={job.tabId}>\n            <Tab04Upload goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 4) && (\n          <TabPanel index={4} value={job.tabId}>\n            <Tab05Produce goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 5) && (\n          <TabPanel index={5} value={job.tabId}>\n            <Tab06DownloadDataset goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 6) && (\n          <TabPanel index={6} value={job.tabId}>\n            <Tab07Publish goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 7) && (\n          <TabPanel index={7} value={job.tabId}>\n            <Tab08Validation goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 8) && (\n          <TabPanel index={8} value={job.tabId}>\n            <Tab09Finished goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n      </>\n    </div>\n  );\n}\n\nexport { TabsPanel };","import React from \"react\";\n// import { useContext } from \"react\";\nimport { makeStyles } from \"@mui/styles\";\n// import { useTranslation } from \"react-i18next\";\n// import { AuthContext } from \"../providers/AuthProvider\";\nimport { TabsPanel } from \"./TabsPanel\";\n\nconst useStyles = makeStyles(theme => ({\n\thome: {\n    fontSize: \"1.5em\",\n\t},\n}));\n\nfunction Home() {\n\tconst classes = useStyles();\n  // const { auth } = useContext(AuthContext);\n  // const { t } = useTranslation();\n\n  return (\n    <div className={classes.home}>\n      {/* {(typeof auth.user !== \"undefined\") && // if auth.user is undefined, we don't know yet about user authentication...\n        ${t(\"Home\")} ${t(\"for\")} ${auth.user ? t(\"authenticated user\") : t(\"guest user\")} ${auth.user ? auth.user.email : \"\"}\n      } */}\n      <TabsPanel />\n    </div>\n  );\n}\n\nexport default React.memo(Home);"],"sourceRoot":""}