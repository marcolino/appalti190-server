"use strict";(self.webpackChunkquiccasa_client=self.webpackChunkquiccasa_client||[]).push([[553],{3553:function(n,t,e){e.r(t);var r=e(390),c=e(971),o=e(3721),u=e(6715),i=e(2687),s=e(2333),f=e(4100),a=e(1661);function l(){var n=(0,c.k6)(),t=(0,r.useContext)(s.F),e=(0,r.useContext)(i.V),l=e.auth,h=e.setAuth,g=(0,o.$)().t;return(0,r.useEffect)((function(){t?(0,u.w7)({success:function(){console.log("signOut calling setAuth"),h({user:!1}),n.replace("/")},error:function(n){console.error("signOut error:",n),(0,a.ci)("signOut",n),f.A.error(g(n.message))}}):(console.log("signOut calling setAuth"),h({user:!1}),n.replace("/"))}),[t,n,l,h,g]),null}t.default=r.memo(l)},6715:function(n,t,e){e.d(t,{_f:function(){return l},gF:function(){return h},vG:function(){return d},kk:function(){return p},Rv:function(){return g},w7:function(){return m},y1:function(){return a}});var r=e(6515),c=e(6444),o=e(2600),u=e.n(o),i=(e(3137),{signUp:function(n){return s("/api/auth/register","POST",n)},confirmSignUp:function(n){return s("/api/auth/verify/".concat(n.code),"GET",n)},signIn:function(n){return s("/api/auth/login","POST",n)},UNUSEDcurrentAuthenticatedUser:function(n){return new Promise((function(n,t){var e=JSON.parse(localStorage.getItem("auth"));console.log("currentAuthenticatedUser auth:",e),n(!!e&&e.user)}))},signOut:function(n){return new Promise((function(n,t){n()}))}}),s=function(n,t,e){return console.log("fetcher:",n,t,e),new Promise((function(c,o){"GET"===t&&e&&(n+="?"+Object.keys(e).map((function(n){return encodeURIComponent(n)+"="+encodeURIComponent(e[n])})).join("&")),console.log("fetcher url 2:",n);var i=(0,r.Z)((0,r.Z)({method:t,headers:new Headers(u().api.headers)},e&&"GET"!==t&&{body:JSON.stringify(e)}),{},{redirect:u().api.redirect});console.log("fetcher opt:",i),fetch(n,(0,r.Z)((0,r.Z)({method:t,headers:new Headers(u().api.headers)},e&&"GET"!==t&&{body:JSON.stringify(e)}),{},{redirect:u().api.redirect})).then((function(t){console.log("fetcher res:",t);try{t.json().then((function(e){console.log("fetcher from ".concat(n," data:"),e),t.ok||o({status:t.status,statusText:t.statusText,message:e.message?e.message:t.statusText}),c(e)}))}catch(e){console.error("fetch ".concat(n," error:"),e),o(e)}})).catch((function(t){console.error("fetch ".concat(n," error:"),t),o(t)}))}))},f=i;function a(n,t){var e=t.success,o=t.error,u=t.final;(0,c.JE)(f.signUp((0,r.Z)({},n)).then((function(n){return e(n)})).catch((function(n){return o(n)})).finally((function(n){return u(n)})))}function l(n,t){var e=t.success,o=t.error,u=t.final;console.log("TrackPromise - props:",n),(0,c.JE)(f.confirmSignUp((0,r.Z)({},n)).then((function(n){return e(n)})).catch((function(n){return o(n)})).finally((function(n){return u(n)})))}function h(n,t){var e=t.success,r=t.error,o=t.final;(0,c.JE)(f.forgotPassword(n).then((function(n){return e(n)})).catch((function(n){return r(n)})).finally((function(n){return o(n)})))}function g(n,t){var e=t.success,r=t.error,o=t.final;(0,c.JE)(f.resendSignUp(n).then((function(n){return e(n)})).catch((function(n){return r(n)})).finally((function(n){return o(n)})))}function d(n,t,e,r){var o=r.success,u=r.error,i=r.final;(0,c.JE)(f.forgotPasswordSubmit(n,t,e).then((function(n){return o(n)})).catch((function(n){return u(n)})).finally((function(n){return i(n)})))}function p(n,t){var e=t.success,r=t.error,o=t.final;(0,c.JE)(f.resendSignUp(n).then((function(n){return e(n)})).catch((function(n){return r(n)})).finally((function(n){return o(n)})))}function m(n){var t=n.success,e=n.error,r=n.final;(0,c.JE)(f.signOut().then((function(n){return t(n)})).catch((function(n){return e(n)})).finally((function(n){return r(n)})))}}}]);
//# sourceMappingURL=553.79312502.chunk.js.map