"use strict";(self.webpackChunkappalti190_client=self.webpackChunkappalti190_client||[]).push([[541],{6473:function(e,n,r){r.d(n,{OL:function(){return v},NR:function(){return b},yt:function(){return g},Kv:function(){return Z},R9:function(){return x}});var o=r(6515),t=r(390),a=r(2420),s=r(7762),i=r(1426),c=r(3383),l=r(3999),d=r(1395),u=r(1846),m=r(3447),f=function(e,n){return"#"+e.replace(/^#/,"").replace(/../g,(function(e){return("0"+Math.min(255,Math.max(0,parseInt(e,16)+n)).toString(16)).substr(-2)}))},p=r(3137),h=r(2559),g=t.memo((function(e){var n=(0,u.Z)((function(e){return{startAdornment:{backgroundColor:"#eaedf0",height:"2.5rem",maxHeight:"3rem",marginLeft:-15,marginRight:5,paddingLeft:10,paddingRight:10,borderRight:"1px solid #c5c5c5"},endAdornment:{backgroundColor:"#eaedf0",height:"2.5rem",maxHeight:"3rem",marginLeft:5,marginRight:-15,paddingLeft:10,paddingRight:10,borderLeft:"1px solid #c5c5c5"}}}))();return(0,h.jsx)(s.Z,{id:e.id,type:e.type,value:e.value,required:e.required,autoFocus:e.autoFocus,autoComplete:e.autoComplete.toString(),variant:e.variant,fullWidth:e.fullWidth,label:e.label,size:e.size,margin:e.margin,className:e.className?e.className:n.textField,placeholder:e.placeholder,onChange:function(n){return e.onChange(n.target.value)},disabled:e.disabled,error:!(0,p.Qr)(e.error),InputProps:{startAdornment:e.startAdornmentIcon?(0,h.jsx)(m.Z,{className:e.startAdornmentClass?e.startAdornmentClass:n.startAdornment,position:"start",children:e.startAdornmentIcon}):(0,h.jsx)(h.Fragment,{}),endAdornment:e.endAdornmentIcon?(0,h.jsx)(m.Z,{className:e.endAdornmentClass?e.endAdornmentClass:n.endAdornment,position:"end",children:e.endAdornmentIcon}):(0,h.jsx)(h.Fragment,{}),className:n.input}})}));g.defaultProps={type:"text",required:!1,autoFocus:!1,autoComplete:!1,variant:"outlined",fullWidth:!0,label:"",size:"small",margin:"dense",className:null,placeholder:"",startAdornmentClass:null,endAdornmentClass:null,disabled:!1,error:""};var v=t.memo((function(e){var n=(0,u.Z)((function(e){return function(e){return{button:{margin:e.spacing(1,0,0,0),textTransform:"none",fontSize:"1.3em",color:"white",backgroundColor:e.palette.success.main,"&:hover":{backgroundColor:f(e.palette.success.main,-25)}},buttonSecondary:{margin:e.spacing(1,0,0,0),textTransform:"none",fontSize:"1em !important",color:"white",backgroundColor:e.palette.secondary.dark+" !important","&:hover":{backgroundColor:f(e.palette.secondary.dark,-25)+" !important"}},buttonFederated:{margin:e.spacing(1,0,0,0),justifyContent:"flex-start",paddingLeft:e.spacing(5),fontSize:"1.3em"},buttonFederatedFacebook:{backgroundColor:e.palette.socialButtons.facebook.backgroundColor,"&:hover":{backgroundColor:f(e.palette.socialButtons.facebook.backgroundColor,-25)}},buttonFederatedGoogle:{backgroundColor:e.palette.socialButtons.google.backgroundColor,"&:hover":{backgroundColor:f(e.palette.socialButtons.google.backgroundColor,-25)}}}}(e)}))();return(0,h.jsx)(a.Z,{fullWidth:e.fullWidth,variant:e.variant,color:e.color,size:e.size,className:"".concat(n.button," ").concat(e.social?n.buttonFederated:""," ").concat(e.social?n["buttonFederated"+(0,p.kC)(e.social)]:""," ").concat(n[e.className]),startIcon:e.startIcon,onClick:e.onClick,disabled:e.disabled,children:e.children})}));v.defaultProps={fullWidth:!0,variant:"contained",color:"primary",social:null},t.memo((function(e){var n=(0,u.Z)((function(e){return{disabled:{color:"grey",cursor:"default","&:hover":{textDecoration:"none"}}}}))(),r=e.disabled?n.disabled:"";return(0,h.jsx)(i.Z,{control:(0,h.jsx)(c.Z,{checked:e.checked,onChange:function(n){return e.onChange(n.target.checked)},className:"".concat(e.className," ").concat(r),color:e.color,size:e.size,disabled:e.disabled}),label:(0,h.jsx)(x,{className:"".concat(e.className," ").concat(r),children:e.children})})})).defaultProps={checked:!1,color:"primary",size:"small"};var x=t.memo((function(e){return(0,h.jsx)(d.Z,(0,o.Z)((0,o.Z)({component:e.component,variant:e.variant,color:e.color,align:e.align},e),{},{children:e.children}))}));x.defaultProps={component:"h1",variant:"body2",color:"textPrimary"};var Z=t.memo((function(e){var n=(0,u.Z)((function(e){return{normal:{cursor:"pointer"},disabled:{color:"grey",cursor:"default","&:hover":{textDecoration:"none",color:"grey"}}}}))(),r=e.disabled?n.disabled:n.normal;return(0,h.jsx)(l.Z,(0,o.Z)((0,o.Z)({href:e.href,className:"".concat(e.className," ").concat(r),color:e.color},e),{},{children:e.children}))}));Z.defaultProps={color:"textPrimary"};var b=t.memo((function(e){var n=(0,u.Z)((function(n){return function(n){return{container:{display:"flex",alignItems:"center",marginTop:n.spacing(e.marginVertical),marginBottom:n.spacing(e.marginVertical)},divider:{width:"100%",borderBottom:"1px solid "+(e.color?e.color:n.palette.primary.dark),paddingLeft:n.spacing(1)},text:{paddingLeft:n.spacing(e.paddingHorizontal),paddingRight:n.spacing(e.paddingHorizontal)}}}(n)}))();return(0,h.jsxs)("div",{className:n.container,children:[(0,h.jsx)("div",{className:n.divider}),e.children&&(0,h.jsx)("span",{className:n.text,children:e.children}),(0,h.jsx)("div",{className:n.divider})]})}));b.defaultProps={marginVertical:1,paddingHorizontal:1}},8541:function(e,n,r){r.r(n);var o=r(3430),t=r(390),a=r(971),s=r(6444),i=r(3721),c=r(1846),l=r(1732),d=r(119),u=r(7530),m=r(8282),f=r(1395),p=r(1411),h=r(2398),g=r(9797),v=r(6826),x=r(6083),Z=r(5416),b=r(1855),C=r(1970),k=r(2368),j=r(4100),w=r(6473),y=r(5782),S=r(2600),A=r.n(S),N=r(2559),P=(0,c.Z)((function(e){return function(e){return{avatar:{backgroundColor:e.palette.success.main},fieldset:{border:0}}}(e)}));function F(){var e=P(),n=(0,t.useState)(""),r=(0,o.Z)(n,2),c=r[0],S=r[1],F=(0,t.useState)(""),R=(0,o.Z)(F,2),z=R[0],H=R[1],I=(0,t.useState)(""),L=(0,o.Z)(I,2),O=L[0],E=L[1],V=(0,t.useState)({email:null,password:null,passwordConfirmed:null,code:null}),W=(0,o.Z)(V,2),T=W[0],D=W[1],M=(0,t.useState)(!1),B=(0,o.Z)(M,2),q=B[0],G=B[1],K=(0,t.useState)(""),_=(0,o.Z)(K,2),J=_[0],Q=_[1],U=(0,t.useState)(""),X=(0,o.Z)(U,2),Y=X[0],$=X[1],ee=(0,a.k6)(),ne=(0,s.WH)({delay:A().spinner.delay}).promiseInProgress,re=(0,t.useState)(!1),oe=(0,o.Z)(re,2),te=oe[0],ae=oe[1],se=(0,t.useState)(null),ie=(0,o.Z)(se,2),ce=ie[0],le=ie[1],de=(0,t.useState)(null),ue=(0,o.Z)(de,2),me=ue[0],fe=ue[1],pe=(0,t.useState)(!1),he=(0,o.Z)(pe,2),ge=he[0],ve=he[1],xe=(0,t.useState)(null),Ze=(0,o.Z)(xe,2),be=Ze[0],Ce=Ze[1],ke=(0,t.useState)(null),je=(0,o.Z)(ke,2),we=je[0],ye=je[1],Se=(0,i.$)().t,Ae=function(e){ae(!1),le(null),fe(null)},Ne=function(){ve(!1),Ce(null),ye(null),ee.push("/signin")};return(0,N.jsxs)(u.Z,{maxWidth:"xs",children:[(0,N.jsx)("form",{className:e.form,noValidate:!0,autoComplete:"off",children:(0,N.jsxs)("fieldset",{disabled:ne,className:e.fieldset,children:[!q&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(m.Z,{m:1}),(0,N.jsx)(d.Z,{container:!0,justifyContent:"center",children:(0,N.jsx)(l.Z,{className:e.avatar,children:(0,N.jsx)(x.Z,{})})}),(0,N.jsx)(m.Z,{m:3}),(0,N.jsx)(d.Z,{container:!0,justifyContent:"flex-start",children:(0,N.jsx)(w.R9,{children:Se("Reset password")})}),(0,N.jsx)(m.Z,{m:1}),(0,N.jsx)(w.yt,{autoFocus:!0,id:"email",value:c,onChange:S,placeholder:Se("Email"),startAdornmentIcon:(0,N.jsx)(C.Z,{}),error:T.email}),(0,N.jsx)(m.Z,{m:1}),(0,N.jsx)(w.OL,{onClick:function(e){e.preventDefault(),function(){if(!q&&!(0,y.ks)(c)){var e=Se("Please supply a valid email");return j.A.warning(e),D({email:e}),!1}if(q){if(!(0,y.oH)(z)){var n=Se("Please supply a more complex password");return j.A.warning(n),D({password:n}),!1}if(!O){var r=Se("Please confirm the password");return D({passwordConfirmed:r}),j.A.warning(r),!1}if(z!==O){var o=Se("The confirmed password does not match the password");return j.A.warning(o),D({passwordConfirmed:o}),!1}}return!0}()&&(D({}),console.log("formForgotPassword"),(0,k.gF)({email:c}).then((function(e){if(!e.ok)return console.warn("forgotPassword error:",e),j.A.error(Se(e.message)),void D({email:e.message});console.log("forgotPassword success:",e),G(!0),H(""),e.codeDeliveryMedium;var n,r,o="email";Q(o),n=Se("Verification code sent"),r=Se("Verification code sent via {{medium}} to {{email}}.\nPlease copy and paste it here.",{medium:o,email:"marcosolari+6@gmail.com"}),le(n),fe(r),ae(!0)})))},children:Se("Request password reset")})]}),q&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(w.yt,{id:"password",type:"password",value:z,onChange:H,placeholder:Se("New password"),startAdornmentIcon:(0,N.jsx)(b.Z,{}),error:T.password}),(0,N.jsx)(w.yt,{id:"passwordConfirmed",type:"password",value:O,onChange:E,placeholder:Se("New password confirmation"),startAdornmentIcon:(0,N.jsx)(b.Z,{}),error:T.passwordConfirmed}),(0,N.jsx)(w.yt,{id:"confirmationCode",type:"number",value:Y,onChange:$,placeholder:Se("Numeric code just received by {{codeDeliveryMedium}}",{codeDeliveryMedium:J}),startAdornmentIcon:(0,N.jsx)(Z.Z,{}),error:T.confirmationCode}),(0,N.jsx)(m.Z,{m:1}),(0,N.jsx)(w.OL,{onClick:function(e){e.preventDefault(),D({}),(0,k.vG)({email:c,code:Y,password:z,passwordConfirmed:O}).then((function(e){if(!e.ok)return console.warn("forgotPasswordSubmit error:",e),j.A.error(Se(e.message)),void D({password:e.message});var n,r;console.log("17 confirmForgotPasswordSubmit success data:",e),G(!1),S(""),H(""),E(""),$(""),n=Se("Password reset success"),r=Se("You can now sign in with your new password"),Ce(n),ye(r),ve(!0)}))},children:Se("Confirm Password Reset")}),(0,N.jsx)(d.Z,{container:!0,justifyContent:"flex-end",children:(0,N.jsx)(w.OL,{onClick:function(e){e.preventDefault(),D({}),console.log("formResendResetPasswordCode"),(0,k.kk)({email:c}).then((function(e){if(e.ok)console.log("TODO: CHECK IF IN DATA WE HAVE MESSAGE TO SHOW TO THE USER resendResetPasswordCode success data:",e),j.A.info("Code resent successfully");else{if(console.warn("formResendResetPasswordCode error:",e),"ExpiredCodeException"===e.code)D({confirmationCode:e});else D({});j.A.error(Se(e.message))}}))},fullWidth:!1,className:"buttonSecondary",children:Se("Resend code")})})]})]})}),(0,N.jsxs)(p.Z,{open:te,onClose:Ae,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,N.jsx)(v.Z,{id:"alert-dialog-title",children:ce}),(0,N.jsx)(g.Z,{id:"alert-dialog-description",children:(0,N.jsx)(f.Z,{variant:"body1",style:{whiteSpace:"pre-line"},children:me})}),(0,N.jsx)(h.Z,{children:(0,N.jsx)(w.OL,{onClick:Ae,fullWidth:!1,className:"buttonSecondary",autoFocus:!0,children:Se("Ok")})})]}),(0,N.jsxs)(p.Z,{open:ge,onClose:Ne,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,N.jsx)(v.Z,{id:"alert-dialog-title",children:be}),(0,N.jsx)(g.Z,{id:"alert-dialog-description",children:(0,N.jsx)(f.Z,{variant:"body1",style:{whiteSpace:"pre-line"},children:we})}),(0,N.jsx)(h.Z,{children:(0,N.jsx)(w.OL,{onClick:Ne,fullWidth:!1,className:"buttonSecondary",autoFocus:!0,children:Se("Ok")})})]})]})}n.default=t.memo(F)},2368:function(e,n,r){r.d(n,{Pg:function(){return d},Rf:function(){return s},gF:function(){return i},kk:function(){return l},vG:function(){return c},zB:function(){return a}});var o=r(6515),t=r(2441),a=function(e){return t.Z.post("/auth/login",e).then((function(e){return(0,o.Z)({ok:!0},e.data)})).catch((function(e){return(0,o.Z)({ok:!1},e.response.data)}))},s=function(e){return t.Z.post("/user",e).then((function(e){return(0,o.Z)({ok:!0},e.data)})).catch((function(e){return(0,o.Z)({ok:!1},e.response.data)}))},i=function(e){return console.log("FETCH forgotPassword /auth/recover - params:",e),t.Z.post("/auth/recover",e).then((function(e){return(0,o.Z)({ok:!0},e.data)})).catch((function(e){return console.error("ERR:",e),(0,o.Z)({ok:!1},e.response.data)}))},c=function(e){return console.log("FETCH forgotPasswordSubmit /auth/reset - params:",e),t.Z.post("/auth/reset",e).then((function(e){return(0,o.Z)({ok:!0},e.data)})).catch((function(e){return(0,o.Z)({ok:!1},e.response.data)}))},l=function(e){return t.Z.post("/auth/resend",e).then((function(e){return(0,o.Z)({ok:!0},e.data)})).catch((function(e){return(0,o.Z)({ok:!1},e.response.data)}))},d=function(e){return t.Z.post("/convertXls2Json",e).then((function(e){return(0,o.Z)({ok:!0},e.data)})).catch((function(e){return console.warn("err.message",e.message),{ok:!1,message:e.message}}))}},1970:function(e,n,r){var o=r(5318),t=r(862);n.Z=void 0;var a=t(r(390)),s=(0,o(r(7581)).default)(a.createElement("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}),"LockOpen");n.Z=s},6083:function(e,n,r){var o=r(5318),t=r(862);n.Z=void 0;var a=t(r(390)),s=(0,o(r(7581)).default)(a.createElement("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h2c0-1.66 1.34-3 3-3s3 1.34 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOpenOutlined");n.Z=s}}]);
//# sourceMappingURL=541.f6e51b8b.chunk.js.map