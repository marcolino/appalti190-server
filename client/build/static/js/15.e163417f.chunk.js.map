{"version":3,"sources":["components/FlexibleDialog.js","services/JobService.js","components/TabsComponents.js","hooks/useWindowSize.js","components/Tab01Start.js","components/Tab02DownloadTemplate.js","components/Tab03FillData.js","components/DragNDrop.js","components/Tab04Upload.js","components/Tab05Check.js","components/Tab06DownloadDataset.js","components/Tab07Publish.js","components/Tab08Validation.js","components/Tab09Finished.js","components/TabsPanel.js","components/Home.js"],"names":["FlexibleDialog","title","contentText","actions","props","onBackdropClick","onClose","event","reason","map","action","index","onClick","callback","closeModal","variant","autoFocus","style","textTransform","text","defaultProps","React","memo","get","a","TokenService","getUser","api","JobService","set","job","put","upload","file","formData","FormData","append","post","headers","transformXls2Xml","filePath","validateXml","transform","outcomeCheck","anno","codiceFiscaleAmministrazione","outcomeFailureDetails","urlExistenceCheck","url","sanitizeJob","xml","j","getPlans","useStyles","makeStyles","theme","paragraph","fontSize","paragraphSmall","centered","display","justifyContent","alignItems","justified","textAlign","box","boxLeft","boxRight","sup","scrollableContainer","flexDirection","marginTop","minHeight","scrollable","height","overflowY","paddingLeft","paddingRight","TabContainer","children","TabBodyScrollable","classes","size","useState","width","window","innerWidth","innerHeight","windowSize","setWindowSize","useEffect","handleResize","addEventListener","removeEventListener","useWindowSize","className","Math","max","TabTitle","TabParagraph","Box","mb","Typography","component","small","class","TabPrevButton","m","Button","color","onPrev","disabled","prevIsEnabled","TabNextButton","onNext","nextIsEnabled","TabTooltip","Tooltip","placement","anchor","Tab01Start","t","useTranslation","href","target","goto","Tab02DownloadTemplate","history","useHistory","download","setNextIsEnabled","showModal","useModal","userIsAuthenticated","AuthService","getCurrentUser","openDialog","tabId","push","downloadLocalUrl","config","data","templateDownloadUrl","setJob","Grid","container","item","xs","ul","padding","Tab03FillData","baseStyle","flex","borderWidth","borderRadius","borderColor","borderStyle","backgroundColor","outline","transition","focusedStyle","acceptStyle","rejectStyle","DragNDrop","onDrop","accept","useDropzone","getRootProps","getInputProps","isFocused","isDragAccept","isDragReject","isDragActive","useMemo","Tab04Upload","userIsAuthenticatedCallback","useCallback","fileSet","fileReset","fileValidate","type","split","match","fileType","fileUpload","then","result","console","log","error","errorMessage","toast","fileSelect","selectedFile","acceptedFiles","originalname","accordionRoot","_height","_padding","_margin","Tab05Check","user","statusLocal","setStatusLocal","code","planUpgradeDeclined","planName","plan","name","cigCount","planRequired","tabValue","cigNumberAllowed","loading","path","Error","success","response","info","metadati","titolo","abstract","dataPubblicazioneDataset","dataUltimoAggiornamentoDataset","entePubblicatore","annoRiferimento","urlFile","licenza","importoAggiudicazioneTotale","importoSommeLiquidateTotale","transformationWarningsTitle","transformationWarnings","warnings","length","warning","header","content","transformationErrorsTitle","transformationErrors","errors","xmlErrorsTitle","message","xmlErrorsReason","xmlErrors","pattern","shift","replace","errorsTitle","concat","Object","keys","key","dangerouslySetInnerHTML","__html","Accordion","disableGutters","root","sx","AccordionSummary","expandIcon","id","AccordionDetails","Tab07DownloadDataset","downloadDataset","outputUrl","downloadRemoteUrl","Tab07Publish","forceVerifyPublished","setForceVerifyPublished","publishUrlFile","datasetIsPublished","outcome","datasetStatusContents","undefined","JSON","stringify","Tab08Validation","esitoUltimoTentativoAccessoUrl","codiceFiscaleStrutturaProponente","dataUltimoTentativoAccessoUrl","Tab09Finished","TabPanel","value","other","role","hidden","p","a11yProps","StyledTab","withStyles","opacity","Tab","flexGrow","tab","palette","secondary","light","tabIndicator","TabsPanel","getJob","changeTab","where","toLowerCase","redirect","remove","AppBar","elevation","position","top","Paper","square","Tabs","scrollButtons","onChange","ui","userCanForceTabChange","indicator","label","Tab06DownloadDataset","home","Home"],"mappings":"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","file":"static/js/15.e163417f.chunk.js","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@mui/material/Button\";\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions } from '@mui/material';\n\nconst FlexibleDialog = ({ title, contentText, actions, ...props }) => (\n  <Dialog\n    {...props}\n    onBackdropClick={() => {} /* disable modal close on backdrop click */}\n    //disableScrollLock={false}\n    //disableEnforceFocus={false}\n    aria-labelledby={title}\n    onClose={(event, reason) => { /* console.log(\"REASON:\", reason); */ }}\n  >\n    <DialogTitle>{title}</DialogTitle>\n    <DialogContent>\n      <DialogContentText>{contentText}</DialogContentText>\n    </DialogContent>\n    <DialogActions>\n      {actions.map((action, index) => (\n        <Button\n          key={index}\n          onClick={() => {\n            if (action.callback) action.callback();\n            if (action.closeModal) props.onClose();\n          }}\n          variant={action.variant === \"primary\" ? \"contained\" : action.variant === \"secondary\" ? \"outlined\" : \"contained\"}\n          autoFocus={props}\n          style={{textTransform: \"none\"}} // do not uppercase button text\n        >\n          {action.text}\n        </Button>\n      ))}\n    </DialogActions>\n  </Dialog>\n);\n\nFlexibleDialog.propTypes = {\n  title: PropTypes.string,\n  contentText: PropTypes.string,\n  actions: PropTypes.arrayOf(\n    PropTypes.shape({\n      text: PropTypes.string,\n      closeModal: PropTypes.bool,\n      callback: PropTypes.func,\n      variant: PropTypes.oneOf([\n        \"primary\", \"secondary\",\n      ]),\n      autoFocus: PropTypes.bool,\n    })\n  ),\n};\n\nFlexibleDialog.defaultProps = {\n  title: \"\",\n  contentText: \"\",\n  actions: [\n    {\n      text: \"Ok\",\n      closeModal: true,\n      callback: () => {},\n      variant: \"primary\",\n      autoFocus: false,\n    }\n  ],\n};\n\nexport default React.memo(FlexibleDialog);","import api from \"./API\";\nimport TokenService from \"./TokenService\";\n\n// get job status\nconst get = async () => {\n  // const user = TokenService.getUser();\n  // if (!user) {\n  //   return null;\n  // }\n  // return api.get(\"/job/get\", {\n  //   userId: user._id,\n  // });\n\n  //const retval = await api.get(\"/job/get\");\n\n  const user = TokenService.getUser();\n  if (!user) {\n    return null;\n  }\n  return await api.get(\"/job/get\");\n};\n\n// set job status\nconst set = (job) => {\n  const user = TokenService.getUser();\n  if (!user) {\n    return null;\n  }\n\n  return api.put(\"/job/set\", {job});\n};\n\n// upload a file\nconst upload = (file) => {\n  const formData = new FormData();\n  formData.append(\"file\", file);\n  \n  return api.post(\"/job/upload\", formData, {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n    }\n  });\n};\n\n// transform XLS to XML\nconst transformXls2Xml = (filePath) => {\n  return api.post(\"/job/transformXls2Xml/:filePath\", {\n    filePath,\n  });\n}\n\n// validate XML syntax\nconst validateXml = (transform) => {\n  return api.post(\"/job/validateXml/:transform\", {\n    transform,\n  });\n  // const retval = api.post(\"/job/validateXml/:transform\", {\n  //   transform,\n  // });\n  // console.log(\"****************** validateXml retval:\", retval);\n  // return retval;\n}\n\n// check ANAC periodic verification outcome\nconst outcomeCheck = (anno, codiceFiscaleAmministrazione) => {\n  return api.post(\"/job/outcomeCheck/:anno/:codiceFiscaleAmministrazione\",\n    {\n      anno,\n      codiceFiscaleAmministrazione,\n    }\n  );\n}\n\n// get ANAC periodic verification failed outcome details\nconst outcomeFailureDetails = (anno, codiceFiscaleAmministrazione) => {\n  return api.post(\n    \"/job/outcomeFailureDetails/anno/codiceFiscaleAmministrazione\",\n    {\n      anno,\n      codiceFiscaleAmministrazione,\n    }\n  );\n}\n\n// check url existence\nconst urlExistenceCheck = (url) => {\n  return api.post(\"/job/urlExistenceCheck/url\", url);\n}\n\n// just to ignore big xml when debug printing...\nconst sanitizeJob = (job) => {\n  if (!job?.transform?.xml) {\n    return job;\n  }\n  let j = job;\n  j.transform.xml = \"…\";\n  return j;\n}\n\n// get ANAC periodic verification failed outcome details\nconst getPlans = () => {\n  return api.get(\n    \"/job/getPlans\",\n  );\n}\n\nconst JobService = {\n  get,\n  set,\n  upload,\n  transformXls2Xml,\n  validateXml,\n  outcomeCheck,\n  outcomeFailureDetails,\n  urlExistenceCheck,\n  sanitizeJob,\n  getPlans,\n};\n\nexport default JobService;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@mui/styles\";\nimport Typography from \"@mui/material/Typography\";\nimport Box from \"@mui/material/Box\";\nimport Button from \"@mui/material/Button\";\nimport Tooltip from \"@mui/material/Tooltip\";\nimport useWindowSize from \"../hooks/useWindowSize\";\n\n// const height = window.innerHeight;\n// const width = window.innerWidth;\n// const heightScrollable = (\n//   (height >= width) ?\n//     //height - (height *.12) - (height *.12) - (height *.12) // portrait\n//     height * .64 // portrait\n//   :\n//     //height - (height *.16) - (height *.16) - (height*.16) // landscape\n//     height * .52 // landscape\n//   );\n\n//console.log(\"height, width, heightScrollable:\", height, width, heightScrollable);\nconst useStyles = makeStyles(theme => ({\n\tparagraph: {\n    fontSize: \"1.1em\",\n\t},\n\tparagraphSmall: {\n    fontSize: \"0.8em\",\n\t},\n  centered: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  justified: {\n    textAlign: \"justify\",\n  },\n  box: {\n    display: \"flex\",\n  },\n  boxLeft: {\n    justifyContent: \"flex-start\",\n  },\n  boxRight: {\n    justifyContent: \"flex-end\",\n  },\n  sup: {\n    fontSize: \"0.8em\",\n  },\n  scrollableContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginTop: \"1em\",\n    minHeight: \"5em\",\n    //maxHeight: heightScrollable,\n  },\n  scrollable: {\n    height: \"100%\",\n    overflowY: \"auto\",\n    paddingLeft: 10,\n    paddingRight: 10,\n    minHeight: \"3em\",\n  },\n\n  // scrollableContainer: {\n  //   width: \"100%\",\n  //   height: \"100%\",\n  //   display: \"flex\",\n  //   flexDirection: \"column\",\n  //   flexWrap: \"nowrap\",\n  // },\n  // scrollableHeader: {\n  //   flexShrink: 0,\n  // },\n  // scrollableBody: {\n  //   flexGrow: 1,\n  //   overflow: \"auto\",\n  //   minHeight: \"3em\",\n  // },\n  // scrollableFooter: {\n  //   flexShrink: 0,\n  // },\n}));\n\nconst TabContainer = React.memo(props => {\n  //const classes = useStyles();\n  return (\n    <div>\n      {props.children}\n    </div>\n  );\n});\nTabContainer.propTypes = {\n};\nTabContainer.defaultProps = {\n};\n\nconst TabBodyScrollable = React.memo(props => {\n  const classes = useStyles();\n\n  /**\n   * Note: here we assume fixed sections height...\n   * this is a bad hack to have a scrollable body\n   * and avoid a scrollable container for any\n   * window height and consistent after a resize\n   */\n  const toolbarHeight = 90; // toolbar height\n  const tabbarHeight = 100; // tabbbar height\n  const footerHeight = 90; // footer height (TODO: put this in config.ui. ... ?)\n  const size = useWindowSize();\n\n  return (\n    <div className={classes.scrollableContainer}>\n      <div className={classes.scrollable} style={{height: Math.max(120, size.height - toolbarHeight - tabbarHeight - /*titleHeight - */footerHeight)}}>\n        {props.children}\n      </div>\n    </div>\n  );\n});\nTabBodyScrollable.propTypes = {\n};\nTabBodyScrollable.defaultProps = {\n};\n\nconst TabTitle = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <div className={classes.centered}>\n      <h2>{props.children}</h2>\n    </div>\n  );\n});\nTabTitle.propTypes = {\n};\nTabTitle.defaultProps = {\n};\n\nconst TabParagraph = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Box mb={1}>\n      <Typography component=\"div\" className={`${classes.paragraph} ${classes.justified} ${props.small ? classes.paragraphSmall : null} ${props.class}`}>\n        {props.children}\n      </Typography>\n    </Box>\n  );\n});\nTabParagraph.propTypes = {\n  class: PropTypes.string,\n};\nTabParagraph.defaultProps = {\n  class: null,\n};\n\nconst TabPrevButton = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Box\n      component=\"span\"\n      m={1} // margin\n      className={`${classes.box} ${classes.boxLeft}`}\n    >\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={props.onPrev}\n        disabled={!props.prevIsEnabled}\n      >\n        {props.children}\n      </Button>\n    </Box>\n  );\n});\nTabPrevButton.propTypes = {\n  onPrev: PropTypes.func.isRequired,\n  prevIsEnabled: PropTypes.bool.isRequired,\n};\nTabPrevButton.defaultProps = {\n};\n\nconst TabNextButton = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Box\n      component=\"span\"\n      m={1} // margin\n      className={`${classes.box} ${classes.boxRight}`}\n    >\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        // fullWidth={props.fullWidth}\n        // variant={props.variant}\n        // color={props.color}\n        // size={props.size}\n        // className={`${classes.button} ${props.social ? classes.buttonFederated : \"\"} ${props.social ? classes[\"buttonFederated\" + capitalize(props.social)] : \"\"} ${classes[props.className]}`}\n        // startIcon={props.startIcon}\n        onClick={props.onNext}\n        disabled={!props.nextIsEnabled}\n      >\n        {props.children}\n      </Button>\n    </Box>\n  );\n});\nTabNextButton.propTypes = {\n  onNext: PropTypes.func.isRequired,\n  nextIsEnabled: PropTypes.bool.isRequired,\n};\nTabNextButton.defaultProps = {\n};\n\nconst TabTooltip = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Tooltip\n      title={props.title}\n      placement=\"top\"\n    >\n      <sup className={classes.sup}>{props.anchor}</sup>\n    </Tooltip>\n  );\n});\nTabTooltip.propTypes = {\n  title: PropTypes.string.isRequired,\n  anchor: PropTypes.string,\n};\nTabTooltip.defaultProps = {\n  anchor: \"*\",\n};\n\nexport {TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton, TabTooltip};","import { useState, useEffect } from \"react\";\n\nexport default function useWindowSize() {\n  const [windowSize, setWindowSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n  useEffect(() => {\n    function handleResize() {\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n      //console.log(\"useWindowSize - height:\", window.innerHeight);\n    }\n    window.addEventListener(\"resize\", handleResize);\n    handleResize();\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n  return windowSize;\n}\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabNextButton, TabTooltip } from \"./TabsComponents\";\n\nfunction Tab01Start(props) {\n  const { t } = useTranslation();\n  const [ nextIsEnabled ] = useState(true);\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Welcome!\")}\n        </TabTitle>\n        <TabParagraph>\n          Questa è la nostra proposta per adempiere i requisiti della {\" \"}\n          <a href=\"https://www.anticorruzione.it/-/adempimenti-legge-190/2012-art.-1-comma-32-7\" target=\"legge190\">\n            Legge 190\n          </a>\n          . Speriamo che sia chiara e semplice da usare.\n          </TabParagraph>\n        <TabParagraph>\n          Questa app ti guiderà passo passo nei pochi passi che occorrono per completare\n          l'adempimento con successo.\n        </TabParagraph>\n        <TabParagraph>\n          Per iniziare dovrai scaricare un modello Excel\n          <TabTooltip\n            title={\"Può essere in formato MicroSoft-Excel, oppure in formato ODS, come preferisci.\"}\n          >\n          </TabTooltip>\n          , che contiene delle regole per guidarti nella compilazione, e minimizzare i possibili errori formali.\n        </TabParagraph>\n        <TabParagraph>\n          Poi dovrai inserire, uno per riga, tutti i beni o servizi che la tua struttura ha appaltato\n          nell'anno in corso.\n        </TabParagraph>\n        <TabParagraph>\n          Alla fine dell'anno, in genere entro la fine di Gennaio dell'anno successivo, sarà sufficiente\n          caricare qui il foglio Excel compilato.\n        </TabParagraph>\n        <TabParagraph>\n          A questo punto il nostro sistema effettuerà il controllo formale dei dati inseriti.\n          Nel caso che venga segnalata qualche anomalia dovrai correggere sul file Excel le anomalie\n          segnalate, e poi ri-caricarlo.\n        </TabParagraph>\n        <TabParagraph>\n          Dopodichè potrai scaricare il documento XML prodotto, che andrà pubblicato sul\n          sito cui fa riferimento la tua struttura.\n        </TabParagraph>\n        <TabParagraph>\n          A questo punto avrai praticamente completato l'adempimento.\n          Se vorrai potrai controllare - sempre su questo sito - l'esito della verifica da parte\n          dell'ANAC.\n        </TabParagraph>\n        <TabParagraph>\n          Tieni presente che siamo sempre disponibili a risponderti per qualsiasi dubbio o\n          incertezza. Le modalità di assistenza sono diverse, dal supporto telefonico a\n          quello per email, e dipendono anche dal piano scelto.\n          I riferimenti sono presenti nel menu, alla voce \"Supporto\".\n        </TabParagraph>\n      </TabBodyScrollable>\n\n      <div>\n        <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n          {t(\"Start\")}\n        </TabNextButton>\n      </div>\n    </TabContainer>\n  );\n}\nTab01Start.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab01Start.defaultProps = {\n};\n\nexport default React.memo(Tab01Start);\n","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { useModal } from \"mui-modal-provider\";\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport AuthService from \"../services/AuthService\";\nimport TokenService from \"../services/TokenService\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport FlexibleDialog from \"./FlexibleDialog\";\nimport config from \"../config\";\nimport { downloadLocalUrl } from \"../libs/Misc\";\n\n\n\nfunction Tab02DownloadTemplate(props) {\n  const { t } = useTranslation();\n  const history = useHistory();\n  const [ prevIsEnabled, ] = useState(true);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(() => props.job?.download ? props.job?.download : false);\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  const userIsAuthenticated = () => {\n    if (!AuthService.getCurrentUser()) { // user is not authenticated\n      openDialog({\n        title: t(\"Please log in or register\"),\n        contentText: t(\"You need to be authenticated to proceed\"),\n        actions: [\n          {\n            text: t(\"Login\"),\n            closeModal: true,\n            autoFocus: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signin\");\n            },\n          },\n          {\n            text: t(\"Register\"),\n            closeModal: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signup\");\n            },\n          },\n          {\n            text: t(\"Cancel\"),\n            closeModal: true,\n            callback: () => props.goto(\"prev\"),\n          }\n        ],\n      });\n      return false;\n    }\n    return true;\n  }\n\n  const onDownload = () => {\n    if (userIsAuthenticated()) {\n      downloadLocalUrl(config.data.templateDownloadUrl);\n      setNextIsEnabled(true);\n      props.setJob({...props.job, download: true});\n    }\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Download\")}\n        </TabTitle>\n        <TabParagraph>\n          Scarica il modello Excel in cui potrai inserire i dati degli appalti, uno per riga.\n        </TabParagraph>\n        <TabParagraph>\n          <Button onClick={onDownload} variant=\"contained\" color=\"tertiary\">\n            {t(\"Download\")} ⬇\n          </Button>\n        </TabParagraph>\n        {/* <br />\n        <TabParagraph small>\n          <input type=\"checkbox\"></input>\n          Clicca qui se preferisci la versione ODS (Open Document Format),\n          nel caso che tu utilizzi LibreOffice anziché Microsoft Office.\n        </TabParagraph> */}\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab02DownloadTemplate.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab02DownloadTemplate.defaultProps = {\n};\n\nexport default React.memo(Tab02DownloadTemplate);\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@mui/styles\";\nimport Grid from \"@mui/material/Grid\";\nimport { useTranslation } from \"react-i18next\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\n\nconst useStyles = makeStyles(theme => ({\n  ul: {\n    padding: 32,\n  }\n}));\n\nfunction Tab03FillData(props) {\n  const classes = useStyles();\n  //const { auth } = useContext(AuthContext);\n  const { t } = useTranslation();\n  const [ prevIsEnabled ] = useState(true);\n  const [ nextIsEnabled ] = useState(true);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Fill your data\")}\n        </TabTitle>\n        <TabParagraph>\n          {/* TODO: translate all this text... */}\n          Adesso puoi aprire il modello scaricato con il tuo programma di gestione fogli di lavoro.\n        </TabParagraph>\n        <TabParagraph>\n          Sono presenti 2 fogli: \"METADATI\" ed \"ELENCO GARE\".\n          <br />\n          Ti consigliamo di iniziare dal primo foglio, \"METADATI\", ed inserire i 4 dati generali richiesti:\n          <ul className={classes.ul}>\n            <li><i>codiceFiscaleStrutturaProponente</i> il codice fiscale della tua struttura</li>\n            <li><i>denominazioneStrutturaProponente</i> la ragione sociale della tua struttura</li>\n            <li><i>annoRiferimento</i> l'anno di riferimento per cui inserirai gli appalti</li>\n            <li><i>urlFile</i> l'indirizzo URL dove sarà pubblicato il documento finale</li>\n          </ul>\n        </TabParagraph>\n        <TabParagraph>\n          A questo punto puoi passare al secondo foglio, \"ELENCO GARE\".\n          Occorre inserire ogni appalto (o \"gara\"), uno per riga.\n        </TabParagraph>\n        <TabParagraph>\n          I campi da compilare sono:\n          <ul className={classes.ul}>\n            <li><i>CIG</i> il Codice Identificativo Gara</li>\n            ... TODO: documentare tutti gli altri campi...\n          </ul>\n        </TabParagraph>\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab03FillData.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab03FillData.defaultProps = {\n};\n\nexport default React.memo(Tab03FillData);\n","import React, { useMemo } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useDropzone } from \"react-dropzone\";\n\nconst baseStyle = {\n  flex: 1,\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\",\n  padding: \"20px\",\n  borderWidth: 2,\n  borderRadius: 2,\n  borderColor: \"blue\",\n  borderStyle: \"dashed\",\n  backgroundColor: \"#fafafa\",\n  color: \"#353535\",\n  outline: \"none\",\n  transition: \"border .24s ease-in-out\",\n};\n\nconst focusedStyle = {\n  backgroundColor: \"lightyellow\",\n  borderColor: \"purple\",\n};\n\nconst acceptStyle = {\n  backgroundColor: \"lightgreen\",\n  borderColor: \"darkgreen\",\n};\n\nconst rejectStyle = {\n  backgroundColor: \"lightred\",\n  borderColor: \"darkred\",\n};\n\nconst DragNDrop = ({ onDrop, accept }) => {\n  const { t } = useTranslation();\n  const {\n    getRootProps,\n    getInputProps,\n    isFocused,\n    isDragAccept,\n    isDragReject,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    accept\n  });\n\n  const style = useMemo(() => ({\n    ...baseStyle,\n    ...(isFocused ? focusedStyle : {}),\n    ...(isDragAccept ? acceptStyle : {}),\n    ...(isDragReject ? rejectStyle : {})\n  }), [\n    isFocused,\n    isDragAccept,\n    isDragReject,\n  ]);\n\n  return (\n    <div className=\"dropzone-div\" {...getRootProps({style})}>\n      <input className=\"dropzone-input\" {...getInputProps()} />\n      <div className=\"text-center\">\n        {isDragActive ? (\n          <p className=\"dropzone-content\">\n            {t(\"Release to drop the files here\")}\n          </p>\n        ) : (\n          <p className=\"dropzone-content\">\n            {t(\"Drag 'n drop some files here, or click to select files\")}\n          </p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default DragNDrop;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport { useModal } from \"mui-modal-provider\";\nimport AuthService from \"../services/AuthService\";\nimport JobService from \"../services/JobService\";\nimport TokenService from \"../services/TokenService\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport { errorMessage } from \"../libs/Misc\";\nimport { toast } from \"./Toast\";\nimport DragNDrop from \"./DragNDrop\";\nimport FlexibleDialog from \"./FlexibleDialog\";\n\n\n\nfunction Tab04Upload(props) {\n  //const classes = useStyles();\n  const { t } = useTranslation();\n  const history = useHistory();\n  const [ prevIsEnabled ] = useState(true);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(!!props?.job?.file);\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  const [ accept ] = useState([\n    \".csv\",\n    \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n    \"application/vnd.ms-excel\",\n  ]);\n\n  const userIsAuthenticated = () => {\n    if (!AuthService.getCurrentUser()) { // user is not authenticated\n      openDialog({\n        title: t(\"Please log in or register\"),\n        contentText: t(\"You need to be authenticated to proceed\"),\n        actions: [\n          {\n            text: t(\"Login\"),\n            closeModal: true,\n            autoFocus: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signin\");\n            },\n          },\n          {\n            text: t(\"Register\"),\n            closeModal: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signup\");\n            },\n          },\n          {\n            text: t(\"Cancel\"),\n            closeModal: true,\n            callback: () => props.goto(\"prev\"),\n          }\n        ],\n      });\n      return false;\n    }\n    return true;\n  };\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  const userIsAuthenticatedCallback = useCallback(() => { return userIsAuthenticated() }, []);\n  \n  useEffect(() => {\n    userIsAuthenticatedCallback(); // check if user is authenticated\n  }, [userIsAuthenticatedCallback]);\n\n  const fileSet = useCallback(async(file) => {\n    props.setJob({...props.job, file});\n  }, [props]);\n\n  const fileReset = useCallback(async() => {\n    /**\n     * When file is reset, we clear the full job! (we only keep tabId)\n     */\n    let job = {};\n    job.tabId = props.job.tabId;\n    //job.file = null;\n    props.setJob(job);\n    setNextIsEnabled(false);\n  }, [props]);\n\n  const fileValidate = useCallback((file) => { // validate file type or name\n    // ods: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\n    // xls: application/vnd.ms-excel\n    if (!( // TODO: check if these tests are sufficiently general...\n      file?.type?.split(\"/\")[1]?.match(\"officedocument.spreadsheetml.sheet\") || //* TODO: ignore case... */\n      file?.type?.split(\"/\")[1]?.match(\"ms-excel\")\n    )) {\n      return t(\"Please upload a spreadsheet\") + `.` +\n        (file?.type ? ` ` + t(\"Selected file looks like {{fileType}}\", { fileType: file.type }) : \"\")\n      ;\n    }\n    return null; // validated\n  }, [t]);\n\n  const fileUpload = useCallback(async(file) => {\n    await JobService.upload(file).then(\n      result => {\n        console.log('Upload success, file path', result.data.file);\n        fileSet(result.data.file);\n        //props.setJob({...props.job, file: result.data.file});\n        // TODO: possibly save current job as historical record\n      },\n      error => {\n        console.error('Upload error:', error);\n        fileReset();\n        props.setJob({...props.job, file: {error: errorMessage(error)}}) // set upload error in job.file.error\n        toast.error(errorMessage(error));\n        return;\n      }\n    );\n  }, [props, fileSet, fileReset]);\n\n  const fileSelect = useCallback(async(selectedFile) => {\n    if (selectedFile) {\n      const error = fileValidate(selectedFile);\n      if (error) {\n        //setFile(null);\n        props.setJob({...props.job, file: null});\n        //fileSet(null);\n        setNextIsEnabled(false);\n      } else {\n        //setFile(selectedFile);\n        //fileSet(selectedFile);\n        props.setJob({...props.job, file: selectedFile});\n        await fileUpload(selectedFile);\n        setNextIsEnabled(true);\n      }\n    } else {\n      toast.error(t(\"No file selected, sorry... Please, repeat...\"));\n      //setFile(null);\n      //fileSet(null);\n      props.setJob({...props.job, file: null});\n      setNextIsEnabled(false);\n    }\n  }, [/*fileSet, */props, fileUpload, fileValidate, t]);\n\n  // on drop callback\n  const onDrop = useCallback(acceptedFiles => {\n    // this callback will be called after files get dropped, we will get the acceptedFiles;\n    // if needed, we can even access the rejected files too\n    console.log(\"accepted files:\", acceptedFiles);\n    fileSelect(acceptedFiles[0]);\n  }, [fileSelect]);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = async () => {\n    props.goto(\"next\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Upload\")}\n        </TabTitle>\n        <TabParagraph>\n          Carica il foglio Excel compilato:\n        </TabParagraph>\n\n        <div className=\"container\">\n          <DragNDrop\n            onDrop={onDrop}\n            accept={accept}\n          />\n          <br />\n          <TabParagraph>\n            {props?.job?.file?.originalname && t(\"Selected file\") + `: ${props?.job?.file?.originalname}`}\n            <br />\n            {props?.job?.file?.originalname && <Button\n              variant=\"contained\"\n              size=\"small\"\n              onClick={fileReset}\n              title={t(\"Remove file\")}> 🗑 </Button>}\n          </TabParagraph>\n        </div>\n\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\n\nTab04Upload.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab04Upload.defaultProps = {\n};\n\nexport default React.memo(Tab04Upload);","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useHistory } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { useModal } from \"mui-modal-provider\";\nimport { makeStyles } from \"@mui/styles\";\nimport Grid from \"@mui/material/Grid\";\nimport Accordion from \"@mui/material/Accordion\";\nimport AccordionSummary from \"@mui/material/AccordionSummary\";\nimport AccordionDetails from \"@mui/material/AccordionDetails\";\nimport Typography from \"@mui/material/Typography\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\nimport { toast } from \"./Toast\";\nimport { errorMessage } from \"../libs/Misc\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport TokenService from \"../services/TokenService\";\nimport JobService from \"../services/JobService\";\nimport FlexibleDialog from \"./FlexibleDialog\";\n\nconst useStyles = makeStyles(theme => ({\n  '& .MuiTypography-root': {\n    fontSize: \"0.5em\",\n  },\n  accordionRoot: {\n    _height: \"4em\",\n    _padding: 0,\n    _margin: 0,\n    fontSize: \"0.9em\",\n  }\n}));\n\n\nfunction Tab05Check(props) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const history = useHistory();\n  const user = TokenService.getUser();\n  const [ statusLocal, setStatusLocal ] = useState({});\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(false/*!!props?.job?.transform?.planUpgradeDeclined*/);\n  const [ prevIsEnabled] = useState(true);\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  useEffect(() => {\nconsole.log(\"useeffect 1\", props.job);\n    if (props.job?.transform) {\n      if (props.job?.transform?.code === \"TRUNCATED_DUE_TO_PLAN_LIMIT\") {\n        if (!props.job?.transform?.planUpgradeDeclined) { // TODO: when will we reset this flag?\nconsole.log(\"useeffect 1 ENTERED\");\n          openDialog({\n            title: t(\"Please upgrade your plan\"),\n            contentText: \n              t(\"You need to upgrade your plan to proceed.\") + \"\\n\" +\n              t(\"Your current plan is \\\"{{planName}}\\\".\", { planName: user?.plan?.name}) + \"\\n\" +\n              t(\"To elaborate {{cigCount}} CIGs you need at least plan \\\"{{planName}}\\\"\", { cigCount: props.job?.transform?.cigCount, planName: props.job?.transform?.planRequired?.name }),\n            actions: [\n              {\n                text: t(\"Upgrade plan\"),\n                closeModal: true,\n                autoFocus: true,\n                callback: () => {\n                  TokenService.set(\"redirect\", props.tabId);\n                  history.push(\"/profile\", { tabValue: 1 }); // redirect to /profile route, to second tab, where plan can be changed\n                },\n              },\n              {\n                text: t(\"Proceed with the first {{cigNumberAllowed}} CIGs\", { cigNumberAllowed: user?.plan?.cigNumberAllowed }),\n                closeModal: true,\n                callback: () => {\n                  setNextIsEnabled(true);\n                  props.setJob({...props.job, transform: {...props.job?.transform, planUpgradeDeclined: true}});\n                },\n              },\n            ],\n          });\n        }\n      }\n    } else {\n      setNextIsEnabled(true);\n    }\n  /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job?.transform]);\n\n  useEffect(() => {\nconsole.log(\"useeffect 2\", props.job);\n    if (props.job.file && !props.job.transform) {\nconsole.log(\"useeffect 2 ENTERED\");\n      (async () => {\n        setStatusLocal({loading: true});\n        await JobService.transformXls2Xml(props.job.file.path).then(\n          result => {\n            if (result instanceof Error) {\n              props.setJob({...props.job, transform: result});\n              toast.error(errorMessage(result));\n              return setStatusLocal({ error: errorMessage(result)});\n            }\nconsole.log(\"useeffect 2 - setting job.transform to:\", result.data.result);\n            props.setJob({...props.job, transform: result.data.result});\n            setStatusLocal({success: result.data});\n            //setNextIsEnabled(true);\n          },\n        );\n      })();\n    }\n    /* eslint-disable react-hooks/exhaustive-deps */\n  }, []); //props, props.job]);\n\n  useEffect(() => {\nconsole.log(\"useeffect 3\", props.job);\n    if (props.job.file && props.job.transform && !props.job.validateXml) {\nconsole.log(\"useeffect 3 ENTERED\");\n      (async () => {\n        setStatusLocal({loading: true});\n        await JobService.validateXml(props.job.transform).then(\n          response => {\n            if (response instanceof Error) {\n              props.setJob({...props.job, validateXml: response});\n              //console.log(\"validateXml error:\", response);\n              toast.error(errorMessage(response));\n              return setStatusLocal({ error: errorMessage(response)});\n            }\n            //console.log(\"validateXml success:\", response.data);\n            props.setJob({...props.job, validateXml: response.data});\n            setStatusLocal({success: response.data});\n          },\n          error => {\n            props.setJob({...props.job, validateXml: error});\n          },\n        );\n      })();\n    }\n    /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job.transform, /*props, setJob*/]);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  //if (!props.active) return null;\n/*\njob.transform.warnings\njob.transform.errors\n*/\n\n  // outcome results preparation\n  let info = [];\n  if (props.job?.file) info[t(\"Original file name\")] = props.job.file.originalname;\n  if (props.job?.transform?.metadati?.titolo) info[t(\"Title\")] = props.job.transform.metadati.titolo;\n  if (props.job?.transform?.metadati?.abstract) info[t(\"Abstract\")] = props.job.transform.metadati.abstract;\n  if (props.job?.transform?.metadati?.dataPubblicazioneDataset) info[t(\"Dataset publish date\")] = props.job.transform.metadati.dataPubblicazioneDataset;\n  if (props.job?.transform?.metadati?.dataUltimoAggiornamentoDataset) info[t(\"Dateset last update date\")] = props.job.transform.metadati.dataUltimoAggiornamentoDataset;\n  if (props.job?.transform?.metadati?.entePubblicatore) info[t(\"Publishing body\")] = props.job.transform.metadati.entePubblicatore;\n  if (props.job?.transform?.metadati?.annoRiferimento) info[t(\"Reference year\")] = props.job.transform.metadati.annoRiferimento;\n  if (props.job?.transform?.metadati?.urlFile) info[t(\"Url file\")] = props.job.transform.metadati.urlFile;\n  if (props.job?.transform?.metadati?.licenza) info[t(\"License\")] = props.job.transform.metadati.licenza;\n  if (props.job?.cigCount) info[t(\"Number of CIGs\")] = props.job.cigCount;\n  if (props.job?.importoAggiudicazioneTotale) info[t(\"Total award amount\")] = props.job.importoAggiudicazioneTotale;\n  if (props.job?.importoSommeLiquidateTotale) info[t(\"Total liquidated amount\")] = props.job.importoSommeLiquidateTotale;\n//console.log(\"info:\", info);\n\n  // handle warnings/errors from transformation and xml validation\n\n  // transformation warnings preparation\n  let transformationWarningsTitle = \"\";\n  let transformationWarnings = [];\n  if (props.job?.transform?.warnings.length) {\n    transformationWarningsTitle = `${props.job?.transform?.warnings.length} ${t(\"transformation warnings\")}`;\n    transformationWarnings = props.job?.transform?.warnings.map((warning, index) => {\n      let type = t(\"transformation warning\");\n      let header = `${index + 1}`;\n      let content = warning;\n      return { type, header, content };\n    });\n  }\n\n  // transformation errors preparation\n  let transformationErrorsTitle = \"\";\n  let transformationErrors = [];\n  if (props.job?.transform?.errors.length) {\n    transformationErrorsTitle = `${props.job?.transform?.errors.length} ${t(\"transformation errors\")}`;\n    transformationErrors = props.job?.transform?.errors.map((error, index) => {\n      let type = t(\"transformation error\");\n      let header = `${index + 1}`;\n      let content = error;\n      return { type, header, content };\n    });\n  }\n\n  // xml validation errors preparation\n  let xmlErrorsTitle = props.job?.validateXml?.error?.message;\n  let xmlErrorsReason = props.job?.validateXml?.error?.reason;\n  let xmlErrors = [];\n  if (xmlErrorsReason) {\n    xmlErrors = xmlErrorsReason.split(\"\\n\");\n    let pattern = /^\\t\\[([^\\]]+)\\]\\s*([^:]*):\\s*(.*)$/;\n    /* eslint-disable no-unused-vars */\n    let xmlErrorsSynopsys = xmlErrors.shift();\n    xmlErrorsTitle = `${xmlErrors.length} ${t(\"xml validation errors\")}`; //: ${xmlErrorsTitle} (${xmlErrorsSynopsys})`;\n    xmlErrors = xmlErrors.map((reason, index) => {\n      let type = `xml validation ${reason.replace(pattern, \"$1\")}`;\n      let header = `${reason.replace(pattern, \"$2\")}`;\n      let content = `${reason.replace(pattern, \"$3\")}`;\n      return { type, header, content };\n    });\n  }\n\n  const errorsTitle = \"<p>\".concat(transformationWarningsTitle, \"</p><p>\", transformationErrorsTitle, \"</p><p>\", xmlErrorsTitle, \"</p>\");\n  const errors = transformationWarnings.concat(transformationErrors, xmlErrors);\nconsole.log(\"ERRORS:\", errors);\nconsole.log(props.job);\n\nreturn (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Check\")}\n        </TabTitle>\n\n        <TabParagraph>\n          {statusLocal && \"loading\" in statusLocal && `🟡 ${t(\"Processing...\")}`}\n          {statusLocal && \"error\" in statusLocal && `🔴 ${t(\"Errors in validation\")}: ${statusLocal.error}`}\n          {statusLocal && \"success\" in statusLocal && `🟢 ${t(\"Validation completed successfully\")}`}\n        </TabParagraph>\n\n        { (Object.keys(info).length > 0) && (\n          <div> {/* TODO: use some better way to display a table of info keys/values ... */}\n            {Object.keys(info).map((key, index) => (\n              <div key={index}>{key}: {info[key]}</div>\n            ))}\n          </div>\n        )}\n        { (errors.length > 0) && (\n          <div style={{color: \"darkred\"}}>\n            <TabParagraph>\n              {/*<h3>{errorsTitle}</h3>*/}\n              <h3 dangerouslySetInnerHTML={{__html: errorsTitle}}></h3>\n            </TabParagraph>\n            <TabParagraph>\n              {errors.map((reason, index) => (\n                <Accordion key={index} disableGutters={true} classes={{ root: classes.accordionRoot }} style={{color:\"darkred\"}} sx={{'& .MuiTypography-root' :{ fontSize: \".7em\" }}}>\n                  <AccordionSummary\n                    expandIcon={<ExpandMoreIcon />}\n                    aria-controls={`panel-error-${index}-content`}\n                    id={`panel-error-${index}-header`}\n                  >\n                    <Typography>{reason.type}: {reason.header}</Typography>\n                  </AccordionSummary>\n                  <AccordionDetails>\n                    <Typography>\n                      {reason.content}\n                    </Typography>\n                  </AccordionDetails>\n                </Accordion>\n              ))}\n            </TabParagraph>\n          </div>\n        )}\n\n      </TabBodyScrollable>\n\n{/*\n<pre> props.job: {JSON.stringify(props.job, null, 2)} </pre>\n*/}\n      {\n      }\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\n\nTab05Check.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab05Check.defaultProps = {\n};\n\nexport default React.memo(Tab05Check);","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { useModal } from \"mui-modal-provider\";\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport AuthService from \"../services/AuthService\";\nimport TokenService from \"../services/TokenService\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport { downloadRemoteUrl } from \"../libs/Misc\";\nimport FlexibleDialog from \"./FlexibleDialog\";\n//import config from \"../config\";\n\n\n\nfunction Tab07DownloadDataset(props) {\n  const { t } = useTranslation();\n  const history = useHistory();\n  const [ prevIsEnabled, ] = useState(true);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(() => props.job?.download ? props.job?.downloadDataset : false);\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  const userIsAuthenticated = () => {\n    if (!AuthService.getCurrentUser()) { // user is not authenticated\n      openDialog({\n        title: t(\"Please log in or register\"),\n        contentText: t(\"You need to be authenticated to proceed\"),\n        actions: [\n          {\n            text: t(\"Login\"),\n            closeModal: true,\n            autoFocus: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signin\");\n            },\n          },\n          {\n            text: t(\"Register\"),\n            closeModal: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signup\");\n            },\n          },\n          {\n            text: t(\"Cancel\"),\n            closeModal: true,\n            callback: () => props.goto(\"prev\"),\n          }\n        ],\n      });\n      return false;\n    }\n    return true;\n  }\n\n  const onDownloadDataset = () => {\n    if (userIsAuthenticated()) {\n      //let url = config.service.endpoint + \"marco/dataset-2022.xml\";\n      let url = props.job.transform.outputUrl;\nconsole.log(\"job:\", props.job);\nconsole.log(\"url:\", url);\n      downloadRemoteUrl(url);\n      setNextIsEnabled(true);\n      props.setJob({...props.job, downloadDataset: true});\n    }\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Download produced dataset\")}\n        </TabTitle>\n        <TabParagraph>\n          <p>\n            {t(\"Download dataset\")}.\n          </p>\n        </TabParagraph>\n        <TabParagraph>\n          <Button onClick={onDownloadDataset} variant=\"contained\" color=\"tertiary\">\n            {t(\"Download\")} ⤵\n          </Button>\n        </TabParagraph>\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab07DownloadDataset.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab07DownloadDataset.defaultProps = {\n};\n\nexport default React.memo(Tab07DownloadDataset);\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport { toast } from \"./Toast\";\nimport { errorMessage } from \"../libs/Misc\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport JobService from \"../services/JobService\";\n\n//import config from \"../config\";\n\n\n\nfunction Tab07Publish(props) {\n  const { t } = useTranslation();\n  const [ statusLocal, setStatusLocal ] = useState({});\n  const [ prevIsEnabled, ] = useState(true);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(() => props.job.downloadDataset ? props.job.downloadDataset : false);\n  const [ forceVerifyPublished, setForceVerifyPublished ] = useState(false);\n  const publishUrlFile = props.job?.transform?.metadati?.urlFile;\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  async function onVerifyPublished() {\n    setForceVerifyPublished(true);\n  };\n\n  useEffect(() => {\n    if (props.job && props.job.transform) {\n      (async () => {\n        setStatusLocal({loading: true});\n        setForceVerifyPublished(false);\n        await JobService.urlExistenceCheck({url: publishUrlFile}).then(\n          result => {\n            if (result instanceof Error) {\n              toast.error(errorMessage(result));\n              return setStatusLocal({loading: false, error: errorMessage(result)});\n            }\n            props.setJob({...props.job, datasetIsPublished: result.data});\n            setStatusLocal({loading: false, success: true});\n            setNextIsEnabled(result.data);\n          },\n          error => {\n            toast.error(errorMessage(error));\n            props.setJob({...props.job, outcome: error.response.data.message});\n            return setStatusLocal({ error: errorMessage(error)});\n          }\n        );\n      })();\n    }\n  /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job.transform, props.job.outcome, forceVerifyPublished]);\n\n  let datasetStatusContents =\n    statusLocal.loading === undefined || statusLocal.loading ?\n      `🟡` :\n    (props.job.datasetIsPublished) ?\n      `🟢 ${t(`Dataset is correctly published at address {{publishUrlFile}}`, {publishUrlFile})}`\n    :\n      `🔴 ${t(`Dataset is not published yet at address {{publishUrlFile}}`, {publishUrlFile})}`\n  ;\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Publish downloaded dataset\")}\n        </TabTitle>\n        <br />\n        <TabParagraph>\n          {datasetStatusContents}\n        </TabParagraph>\n        <TabParagraph>\n          {!(props.job.datasetIsPublished) && (\n            <span>\n              <p>\n                {t(\"Please provide to publish downloaded dataset\")}.\n              </p>\n              <p>\n                <Button onClick={onVerifyPublished} variant=\"contained\" color=\"tertiary\">\n                  {t(\"Verify publication now\")} 🌍\n                </Button>\n              </p>\n            </span>\n          )}\n        </TabParagraph>\n\n        <pre>\n          job: {JSON.stringify(props.job, null, 2)}\n        </pre>\n\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab07Publish.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab07Publish.defaultProps = {\n};\n\nexport default React.memo(Tab07Publish);\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@mui/material/Grid\";\nimport { toast } from \"./Toast\";\nimport { errorMessage } from \"../libs/Misc\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport JobService from \"../services/JobService\";\n\n\n\nfunction Tab08Validation(props) {\n  const { t } = useTranslation();\n  const [ statusLocal, setStatusLocal ] = useState({});\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(false);\n  const [ prevIsEnabled ] = useState(true);\n\n  useEffect(() => {\n    if (props.job && props.job.transform) {\n      if (props.job.outcome) {\n        setNextIsEnabled(true);\n        setStatusLocal({success: props.job.outcome.esitoUltimoTentativoAccessoUrl === \"successo\"});\n      } else {\n        (async () => {\n          setStatusLocal({loading: true});\n          await JobService.outcomeCheck(\n            props.job?.transform?.metadati?.annoRiferimento,\n            props.job?.transform?.header?.codiceFiscaleStrutturaProponente\n          ).then(\n            result => {\n              if (result instanceof Error) {\n                toast.error(errorMessage(result));\n                return setStatusLocal({ error: errorMessage(result)});\n              }\n              //console.log(\"OUTCOMECHECK result:\", result);\n              props.setJob({...props.job, outcome: result.data});\n              setStatusLocal({success: result.data});\n              setNextIsEnabled(true);\n            },\n            error => {\n              toast.error(errorMessage(error));\n              props.setJob({...props.job, outcome: error.response.data.message});\n              return setStatusLocal({ error: errorMessage(error)});\n            }\n          );\n        })();\n      }\n    }\n  /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job.transform, props.job.outcome]);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  //if (!props.active) return null;\n  \n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Wait for ANAC validation\")}\n        </TabTitle>\n        <TabParagraph>\n          {statusLocal && \"success\" in statusLocal && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"successo\") && (\n            <pre>\n              <span style={{color: \"green\", fontSize: \"1.7em\"}}>✓</span>{/*<img src=\"images/success.ico\" width=\"32\" style=alt=\"success\"></img>*/} {props.job?.outcome?.dataUltimoTentativoAccessoUrl}\n            </pre>\n          )}\n          <pre>\n            JOB: {JSON.stringify(props.job, null, 2)}\n          </pre>\n        </TabParagraph>\n        {statusLocal && \"error\" in statusLocal && `Errore: ${statusLocal.error}`}\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab08Validation.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab08Validation.defaultProps = {\n};\n\nexport default React.memo(Tab08Validation);\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@mui/material/Grid\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton } from \"./TabsComponents\";\n\nfunction Tab09Finished(props) {\n  const { t } = useTranslation();\n  const [ prevIsEnabled ] = useState(true);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Finished\")}!\n        </TabTitle>\n        <TabParagraph>\n          <div style={{fontSize: 128, textAlign: \"center\"}}>\n            🏁\n          </div>\n        </TabParagraph>\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab09Finished.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab09Finished.defaultProps = {\n};\n\nexport default React.memo(Tab09Finished);\n","import React, { useState, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport PropTypes from \"prop-types\";\nimport makeStyles from '@mui/styles/makeStyles';\nimport withStyles from '@mui/styles/withStyles';\nimport AppBar from '@mui/material/AppBar';\nimport Paper from '@mui/material/Paper';\nimport Tabs from \"@mui/material/Tabs\";\nimport Tab from \"@mui/material/Tab\";\nimport Typography from \"@mui/material/Typography\";\nimport Box from \"@mui/material/Box\";\nimport TokenService from \"../services/TokenService\";\nimport JobService from \"../services/JobService\";\nimport Tab01Start from \"./Tab01Start\";\nimport Tab02DownloadTemplate from \"./Tab02DownloadTemplate\";\nimport Tab03FillData from \"./Tab03FillData\";\nimport Tab04Upload from \"./Tab04Upload\";\nimport Tab05Check from \"./Tab05Check\";\nimport Tab06DownloadDataset from \"./Tab06DownloadDataset\";\nimport Tab07Publish from \"./Tab07Publish\";\nimport Tab08Validation from \"./Tab08Validation\";\nimport Tab09Finished from \"./Tab09Finished\";\nimport config from \"../config\";\n\n\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`nav-tab-${index}`}\n      {...other}\n    >\n      <Box p={3}>\n        {children}\n      </Box>\n    </Typography>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\nconst a11yProps = (index) => {\n  return {\n    id: `nav-tab-${index}`,\n    \"aria-controls\": `nav-tabpanel-${index}`\n  };\n}\n\nconst StyledTab = withStyles((theme) => ({\n  root: {\n    opacity: 0.8,\n  },\n}))(props => {\n  return (\n    <Tab {...props} />\n  );\n});\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    //backgroundColor: theme.palette.background.paper,\n  },\n  // tabs: {\n  //   \"& .MuiTabs-indicator\": {\n  //     //display: \"none\",\n  //     backgroundColor: \"orange\",\n  //   }\n  // }\n  tab: {\n    backgroundColor: theme.palette.secondary.light,\n  },\n  tabIndicator: {\n    backgroundColor: \"MediumSeaGreen\", //theme.palette.secondary.dark,\n    height: 3,\n  }\n\n}));\n\nconst TabsPanel = () => {\n  const classes = useStyles();\n  const [ job, setJob ] = useState(() => TokenService.getJob());\n  //const { job, setJob } = useContext(JobContext);\n  //const [ job, setJob ] = useState(JobService.get());\n  //const [ job, setJob ] = useState(TokenService.getJob());\n  //const redirect = TokenService.getRedirect();\n  //const [ tabId, setTabId ] = useState(TokenService.getJob());\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const redirect = TokenService.get(\"redirect\");\n    if (redirect) {\n      setJob({...job, tabId: redirect });\n      TokenService.remove(\"redirect\");\n    }\n  }, [job]);\n  \n  useEffect(() => { // to serialize job\n    TokenService.setJob(job); // serialize locally, on local storage\n    JobService.set(job); // serialize remotely, on server db\n  }, [job]);\n\n  function changeTab(id) {\n    setJob({...job, tabId: id });\n  }\n\n  function forceTab(event, id) {\n    if (config.ui.userCanForceTabChange) { // user can force tab change by clicking on app bar titles\n      changeTab(id);\n    }\n  }\n  \n  function goto(where) {\n    let id = where;\n    if (typeof where === \"string\") {\n      switch (where.toLowerCase()) {\n        case \"start\":\n          break;\n        case \"download template\":\n          break;\n        case \"fill your data\":\n          break;\n        case \"upload\":\n          break;\n        case \"check\":\n          break;\n        case \"download dataset\":\n          break;\n        case \"publish\":\n          break;\n        case \"wait for validation\":\n          break;\n        case \"finish!\":\n          break;\n        case \"next\":\n          id = job ? job.tabId + 1 : 0;\n          break;\n        case \"prev\":\n          id = job ? job.tabId - 1 : 0;\n          break;\n        default:\n          console.error(`Unforeseen where specification in goto: ${where}`);\n          return;\n      }\n    }\n    changeTab(id);\n  }\n\n  if (!job?.tabId) job.tabId = 0;\n  return (\n    <div className={classes.root}>\n      <AppBar elevation={0} position=\"fixed\" style={{/*backgroundColor: \"transparent\",*/ top: 50}}>\n        {/* <Tabs\n          value={job.tabId}\n          onChange={forceTab}\n          indicatorColor=\"primary\"\n          // textColor=\"primary\"\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          aria-label=\"scrollable auto tabs\"\n          className={classes.tabs}\n        > */}\n        <Paper elevation={1} square>\n          <Tabs\n            value={job?.tabId}\n            //indicatorColor=\"secondary\"\n            //textColor=\"secondary\"\n            variant=\"scrollable\"\n            scrollButtons=\"auto\"\n            onChange={forceTab}\n            aria-label=\"current section\"\n            classes={{\n              indicator: classes.tabIndicator\n            }}\n            className={classes.tab}\n          >\n            <StyledTab label={`${t(\"Start\")} 🪄`} {...a11yProps(0)} />\n            <StyledTab label={`${t(\"Download template\")} ▼`} {...a11yProps(1)} />\n            <StyledTab label={`${t(\"Fill your data\")} 🖋`} {...a11yProps(2)} />\n            <StyledTab label={`${t(\"Upload\")} ▲`} {...a11yProps(3)} />\n            <StyledTab label={`${t(\"Check\")} ✅`} {...a11yProps(4)} />\n            <StyledTab label={`${t(\"Download dataset\")} ⤵`} {...a11yProps(5)} />\n            <StyledTab label={`${t(\"Publish\")} 🌍`} {...a11yProps(6)} />\n            <StyledTab label={`${t(\"Wait for validation\")} 🎯`} {...a11yProps(7)} />\n            <StyledTab label={`${t(\"Finish!\")} 🏁`} {...a11yProps(8)} />\n          </Tabs>\n        </Paper>\n      </AppBar>\n\n      <>\n        {(job?.tabId === 0) && (\n          <TabPanel index={0} value={job.tabId}>\n            <Tab01Start goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 1) && (\n          <TabPanel index={1} value={job.tabId}>\n            <Tab02DownloadTemplate goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 2) && (\n          <TabPanel index={2} value={job.tabId}>\n            <Tab03FillData goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 3) && (\n          <TabPanel index={3} value={job.tabId}>\n            <Tab04Upload goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 4) && (\n          <TabPanel index={4} value={job.tabId}>\n            <Tab05Check goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 5) && (\n          <TabPanel index={5} value={job.tabId}>\n            <Tab06DownloadDataset goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 6) && (\n          <TabPanel index={6} value={job.tabId}>\n            <Tab07Publish goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 7) && (\n          <TabPanel index={7} value={job.tabId}>\n            <Tab08Validation goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 8) && (\n          <TabPanel index={8} value={job.tabId}>\n            <Tab09Finished goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n      </>\n    </div>\n  );\n}\n\nexport { TabsPanel };","import React from \"react\";\n// import { useContext } from \"react\";\nimport { makeStyles } from \"@mui/styles\";\n// import { useTranslation } from \"react-i18next\";\n// import { AuthContext } from \"../providers/AuthProvider\";\nimport { TabsPanel } from \"./TabsPanel\";\n\nconst useStyles = makeStyles(theme => ({\n\thome: {\n    fontSize: \"1.5em\",\n\t},\n}));\n\nfunction Home() {\n\tconst classes = useStyles();\n  // const { auth } = useContext(AuthContext);\n  // const { t } = useTranslation();\n\n  return (\n    <div className={classes.home}>\n      {/* {(typeof auth.user !== \"undefined\") && // if auth.user is undefined, we don't know yet about user authentication...\n        ${t(\"Home\")} ${t(\"for\")} ${auth.user ? t(\"authenticated user\") : t(\"guest user\")} ${auth.user ? auth.user.email : \"\"}\n      } */}\n      <TabsPanel />\n    </div>\n  );\n}\n\nexport default React.memo(Home);"],"sourceRoot":""}