{"version":3,"sources":["components/TabsComponents.js","hooks/useWindowSize.js","components/FlexibleDialog.js","components/Tab01Start.js","components/Tab02DownloadTemplate.js","components/Tab03FillData.js","services/JobService.js","components/DragNDrop.js","components/Tab04Upload.js","components/Tab05Produce.js","components/Tab06DownloadDataset.js","components/Tab07Publish.js","components/Tab08Validation.js","components/Tab09Finished.js","components/TabsPanel.js","components/Home.js"],"names":["useStyles","makeStyles","theme","paragraph","fontSize","paragraphSmall","centered","display","justifyContent","alignItems","justified","textAlign","box","boxLeft","boxRight","sup","scrollableContainer","flexDirection","marginTop","minHeight","scrollable","height","overflowY","paddingLeft","paddingRight","attention","backgroundColor","palette","main","color","fontWeight","TabContainer","React","memo","props","children","defaultProps","TabBodyScrollable","classes","size","useState","width","window","innerWidth","innerHeight","windowSize","setWindowSize","useEffect","handleResize","addEventListener","removeEventListener","useWindowSize","className","style","margin","Math","max","config","ui","toolbarHeight","tabbarHeight","footerHeight","TabTitle","TabParagraph","Box","component","mb","Typography","small","class","TabBox","sx","mx","xs","md","p","border","borderColor","mode","borderRadius","TabResetButton","m","reset","Button","variant","title","onClick","disabled","isDisabled","TabPrevButton","onPrev","prevIsEnabled","TabNextButton","onNext","nextIsEnabled","TabTooltip","Tooltip","placement","anchor","FlexibleDialog","contentText","actions","onBackdropClick","onClose","event","reason","map","action","index","callback","closeModal","autoFocus","textTransform","text","Tab01Start","t","useTranslation","href","target","goto","Tab02DownloadTemplate","history","useHistory","job","templateDownloaded","setNextIsEnabled","showModal","useModal","userIsAuthenticated","AuthService","getCurrentUser","openDialog","TokenService","set","tabId","push","downloadLocalUrl","data","templateDownloadUrl","setJob","Grid","container","item","ul","paddingHorizontal","Tab03FillData","JobService","upload","file","formData","FormData","append","console","info","api","post","headers","transformXls2Xml","filePath","validateXml","transform","outcomeCheck","anno","codiceFiscaleAmministrazione","urlExistenceAndMatch","url","fileToMatch","log","baseStyle","flex","padding","borderWidth","borderStyle","outline","transition","focusedStyle","acceptStyle","rejectStyle","disabledStyle","fontStyle","DragNDrop","drop","accept","useDropzone","onDrop","getRootProps","isFocused","isDragAccept","isDragReject","isDragActive","useMemo","getRootPropsDisabled","onBlur","onDragEnter","onDragLeave","onDragOver","onFocus","onKeyDown","getRootPropsActual","Tab04Upload","userIsAuthenticatedCallback","useCallback","fileSet","a","fileReset","fileValidate","type","split","match","fileType","fileUpload","then","result","error","errorMessage","toast","fileSelect","selectedFile","acceptedFiles","originalname","accordionRoot","danger","dark","Tab05Produce","user","getUser","useAxiosLoader","loading","setInfo","code","truncatedDueToPlanLimit","planUpgradeDeclined","planName","plan","name","cigCount","planRequired","tabValue","cigNumberAllowed","Number","MAX_SAFE_INTEGER","path","response","allErrors","length","reclaimInfo","metadati","titolo","annoRiferimento","rownum","importoAggiudicazioneTotale","currency","default","importoSommeLiquidateTotale","allWarnings","transformWarnings","warnings","validateXmlWarnings","concat","transformErrors","errors","validateXmlErrors","align","cigs","outputFile","Object","keys","maxHeight","spacing","direction","justify","Card","CardContent","key","message","Accordion","disableGutters","root","AccordionSummary","expandIcon","id","AccordionDetails","borderTop","paddingTop","warning","Tab06DownloadDataset","datasetDownloaded","outputUrl","downloadRemoteUrl","Tab07Publish","undefined","forceVerifyPublished","setForceVerifyPublished","publishUrlFile","urlFile","datasetIsPublished","published","datasetIsPublishedAsIs","publishedAsIs","outcome","Tab08Validation","esitoUltimoTentativoAccessoUrl","forceCheckValidated","setForceCheckValidated","header","codiceFiscaleStrutturaProponente","tentativiAccessoUrlLast","tentativiAccessoUrl","listaAccessoRisorsaLast","listaAccessoRisorsa","marginLeft","dataUltimoTentativoAccessoUrl","dateToLocaleDate","esitoComunicazione","codice","descrizione","dettaglio","esito","xmlValido","dettaglioValidazioneXml","esitoAccessoRisorsa","Tab09Finished","referenceLawName","year","TabPanel","value","other","role","hidden","a11yProps","StyledTab","withStyles","opacity","Tab","flexGrow","tab","secondary","light","tabIndicator","TabsPanel","getJob","changeTab","where","toLowerCase","redirect","get","remove","AppBar","elevation","position","top","Paper","square","Tabs","scrollButtons","onChange","userCanForceTabChange","indicator","label","home","Home"],"mappings":"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","file":"static/js/16.f98a8fd6.chunk.js","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@mui/styles\";\nimport Typography from \"@mui/material/Typography\";\nimport Box from \"@mui/material/Box\";\nimport Button from \"@mui/material/Button\";\nimport Tooltip from \"@mui/material/Tooltip\";\nimport useWindowSize from \"../hooks/useWindowSize\";\nimport config from \"../config\";\n\n// const height = window.innerHeight;\n// const width = window.innerWidth;\n// const heightScrollable = (\n//   (height >= width) ?\n//     //height - (height *.12) - (height *.12) - (height *.12) // portrait\n//     height * .64 // portrait\n//   :\n//     //height - (height *.16) - (height *.16) - (height*.16) // landscape\n//     height * .52 // landscape\n//   );\n\n//console.log(\"height, width, heightScrollable:\", height, width, heightScrollable);\nconst useStyles = makeStyles(theme => ({\n\tparagraph: {\n    fontSize: \"1.1em\",\n\t},\n\tparagraphSmall: {\n    fontSize: \"0.8em\",\n\t},\n  centered: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n  justified: {\n    textAlign: \"justify\",\n  },\n  box: {\n    display: \"flex\",\n  },\n  boxLeft: {\n    justifyContent: \"flex-start\",\n  },\n  boxRight: {\n    justifyContent: \"flex-end\",\n  },\n  sup: {\n    fontSize: \"0.8em\",\n  },\n  scrollableContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    marginTop: \"1em\",\n    minHeight: \"5em\",\n    //maxHeight: heightScrollable,\n  },\n  scrollable: {\n    height: \"100%\",\n    overflowY: \"auto\",\n    paddingLeft: 10,\n    paddingRight: 10,\n    minHeight: \"3em\",\n  },\n  attention: {\n    backgroundColor: theme.palette.attention.main,\n    color: \"white\",\n    fontWeight: \"bold\",\n  }\n}));\n\nconst TabContainer = React.memo(props => {\n  return (\n    <div>\n      {props.children}\n    </div>\n  );\n});\nTabContainer.propTypes = {\n};\nTabContainer.defaultProps = {\n};\n\nconst TabBodyScrollable = React.memo(props => {\n  const classes = useStyles();\n\n  /**\n   * Note: here we assume fixed sections height...\n   * this is a bad hack to have a scrollable body\n   * and avoid a scrollable container for any\n   * window height and consistent after a resize\n   */\n  const size = useWindowSize();\n\n  return (\n    <div className={classes.scrollableContainer}>\n      <div className={classes.scrollable} style={{margin: \"auto\", width: \"90%\", height: Math.max(120, size.height - config.ui.toolbarHeight - config.ui.tabbarHeight - config.ui.footerHeight)}}>\n        {props.children}\n      </div>\n    </div>\n  );\n});\nTabBodyScrollable.propTypes = {\n};\nTabBodyScrollable.defaultProps = {\n};\n\nconst TabTitle = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <div className={classes.centered}>\n      <h2>{props.children}</h2>\n    </div>\n  );\n});\nTabTitle.propTypes = {\n};\nTabTitle.defaultProps = {\n};\n\nconst TabParagraph = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Box component=\"div\" mb={1}>\n      <Typography component=\"div\" className={`${classes.paragraph} ${classes.justified} ${props.small ? classes.paragraphSmall : null} ${props.class}`}>\n        {props.children}\n      </Typography>\n    </Box>\n  );\n});\nTabParagraph.propTypes = {\n  class: PropTypes.string,\n};\nTabParagraph.defaultProps = {\n  class: null,\n};\n\nconst TabBox = React.memo(props => {\n  //const classes = useStyles();\n  return (\n    <Box\n      sx={{\n        mx: { xs: \"5%\", md: \"20%\" },\n        mb: \"1em\",\n        p: 1,\n        border: \"1px solid\",\n        borderColor: (theme) =>\n          theme.palette.mode === \"dark\" ? \"grey.800\" : \"grey.300\",\n        borderRadius: 2,\n        fontSize: \"1em\",\n        fontWeight: \"bold\",\n        textAlign: \"center\",\n      }}\n    >\n      {props.children}\n    </Box>\n  );\n});\nTabBox.propTypes = {\n  class: PropTypes.string,\n};\nTabBox.defaultProps = {\n  class: null,\n};\n\nconst TabResetButton = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Box\n      component=\"span\"\n      m={1} // margin\n      className={`${classes.reset}`}\n    >\n      <Button\n        variant=\"contained\"\n        title={props.title}\n        color=\"attention\"\n        className={classes.attention}\n        onClick={props.onClick}\n        disabled={props.isDisabled}\n      >\n        {props.children}\n      </Button>\n    </Box>\n  );\n});\nTabResetButton.propTypes = {\n  title: PropTypes.string,\n  onClick: PropTypes.func.isRequired,\n};\nTabResetButton.defaultProps = {\n  isDisabled: false,\n};\n\nconst TabPrevButton = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Box\n      component=\"span\"\n      m={1} // margin\n      className={`${classes.box} ${classes.boxLeft}`}\n    >\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={props.onPrev}\n        disabled={!props.prevIsEnabled}\n      >\n        {props.children}\n      </Button>\n    </Box>\n  );\n});\nTabPrevButton.propTypes = {\n  onPrev: PropTypes.func.isRequired,\n  prevIsEnabled: PropTypes.bool.isRequired,\n};\nTabPrevButton.defaultProps = {\n};\n\nconst TabNextButton = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Box\n      component=\"span\"\n      m={1} // margin\n      className={`${classes.box} ${classes.boxRight}`}\n    >\n      <Button\n        variant=\"contained\"\n        color=\"secondary\"\n        onClick={props.onNext}\n        disabled={!props.nextIsEnabled}\n      >\n        {props.children}\n      </Button>\n    </Box>\n  );\n});\nTabNextButton.propTypes = {\n  onNext: PropTypes.func.isRequired,\n  nextIsEnabled: PropTypes.bool.isRequired,\n};\nTabNextButton.defaultProps = {\n};\n\nconst TabTooltip = React.memo(props => {\n  const classes = useStyles();\n  return (\n    <Tooltip\n      title={props.title}\n      placement=\"top\"\n    >\n      <sup className={classes.sup}>{props.anchor}</sup>\n    </Tooltip>\n  );\n});\nTabTooltip.propTypes = {\n  title: PropTypes.string.isRequired,\n  anchor: PropTypes.string,\n};\nTabTooltip.defaultProps = {\n  anchor: \"*\",\n};\n\nexport {TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabBox, TabResetButton, TabPrevButton, TabNextButton, TabTooltip};\n","import { useState, useEffect } from \"react\";\n\nexport default function useWindowSize() {\n  const [windowSize, setWindowSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n  useEffect(() => {\n    function handleResize() {\n      setWindowSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n      //console.log(\"useWindowSize - height:\", window.innerHeight);\n    }\n    window.addEventListener(\"resize\", handleResize);\n    handleResize();\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n  return windowSize;\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport Button from \"@mui/material/Button\";\nimport { Dialog, DialogTitle, DialogContent, DialogContentText, DialogActions } from '@mui/material';\n\nconst FlexibleDialog = ({ title, contentText, actions, ...props }) => (\n  <Dialog\n    {...props}\n    onBackdropClick={() => {} /* disable modal close on backdrop click */}\n    //disableScrollLock={false}\n    //disableEnforceFocus={false}\n    aria-labelledby={title}\n    onClose={(event, reason) => { /* console.log(\"REASON:\", reason); */ }}\n  >\n    <DialogTitle>{title}</DialogTitle>\n    <DialogContent>\n      <DialogContentText>{contentText}</DialogContentText>\n    </DialogContent>\n    <DialogActions>\n      {actions.map((action, index) => (\n        <Button\n          key={index}\n          onClick={() => {\n            if (action.callback) action.callback();\n            if (action.closeModal) props.onClose();\n          }}\n          variant={action.variant === \"primary\" ? \"contained\" : action.variant === \"secondary\" ? \"outlined\" : \"contained\"}\n          autoFocus={props}\n          style={{textTransform: \"none\"}} // do not uppercase button text\n        >\n          {action.text}\n        </Button>\n      ))}\n    </DialogActions>\n  </Dialog>\n);\n\nFlexibleDialog.propTypes = {\n  title: PropTypes.string,\n  contentText: PropTypes.string,\n  actions: PropTypes.arrayOf(\n    PropTypes.shape({\n      text: PropTypes.string,\n      closeModal: PropTypes.bool,\n      callback: PropTypes.func,\n      variant: PropTypes.oneOf([\n        \"primary\", \"secondary\",\n      ]),\n      autoFocus: PropTypes.bool,\n    })\n  ),\n};\n\nFlexibleDialog.defaultProps = {\n  title: \"\",\n  contentText: \"\",\n  actions: [\n    {\n      text: \"Ok\",\n      closeModal: true,\n      callback: () => {},\n      variant: \"primary\",\n      autoFocus: false,\n    }\n  ],\n};\n\nexport default React.memo(FlexibleDialog);","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabNextButton, TabTooltip } from \"./TabsComponents\";\n\nfunction Tab01Start(props) {\n  const { t } = useTranslation();\n  const [ nextIsEnabled ] = useState(true);\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Welcome!\")}\n        </TabTitle>\n        <TabParagraph>\n          {t(\"This is our proposal to fulfill the requirements of the\")} {\" \"}\n          <a href=\"https://www.anticorruzione.it/-/adempimenti-legge-190/2012-art.-1-comma-32-7\" target=\"legge190\">\n            {t(\"Legge 190\")}\n          </a>\n          {\".\"} {t(\"We hope it is clear and simple to use\")}.\n          </TabParagraph>\n        <TabParagraph>\n          {t(\"This app will walk you through the few steps you need to complete the fulfillment successfully\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"To get started you'll need to download an Excel template\")}\n          <TabTooltip\n            title={t(\"It can be in MicroSoft-Excel format, or in ODS format\") + \".\"}\n          >\n          </TabTooltip>\n          {\",\"} {t(\"which contains rules to guide you in the compilation, and minimize possible formal errors\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"Then you will have to enter, one per line, all the goods or services that your structure has contracted out in the current year\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"At the end of the year, generally by the end of January of the following year, it will be sufficient to upload the filled Excel sheet here\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"At this point our system will carry out the formal check of the entered data\")}.\n          {t(\"In the event that some anomaly is reported, you will have to correct the reported anomalies in the Excel file, and then re-upload it\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"You will then be able to download the XML document produced, which will be published on the site your structure refers to\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"At this point you will have practically completed the fulfillment\")}.\n          {t(\"If you want, you can check - again on this site - the outcome of the verification by the ANAC\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"Please note that we are always available to answer you for any doubts or uncertainties\")}.\n          {t(\"The assistance methods are different, from telephone support to email support, and also depend on the plan chosen\")}.\n          {t(\"References can be found in the menu under \\\"Support\\\"\")}.\n        </TabParagraph>\n      </TabBodyScrollable>\n\n      <div>\n        <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n          {t(\"Continue\")}\n        </TabNextButton>\n      </div>\n    </TabContainer>\n  );\n}\nTab01Start.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab01Start.defaultProps = {\n};\n\nexport default React.memo(Tab01Start);\n","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport PropTypes from \"prop-types\";\nimport { useModal } from \"mui-modal-provider\";\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport AuthService from \"../services/AuthService\";\nimport TokenService from \"../services/TokenService\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport FlexibleDialog from \"./FlexibleDialog\";\nimport config from \"../config\";\nimport { downloadLocalUrl } from \"../libs/Misc\";\n\n\n\nfunction Tab02DownloadTemplate(props) {\n  const { t } = useTranslation();\n  const history = useHistory();\n  const [ prevIsEnabled, ] = useState(true);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(() => props.job?.templateDownloaded ?? false);\n\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  const userIsAuthenticated = () => {\n    if (!AuthService.getCurrentUser()) { // user is not authenticated\n      openDialog({\n        title: t(\"Please log in or register\"),\n        contentText: t(\"You need to be authenticated to proceed\"),\n        actions: [\n          {\n            text: t(\"Login\"),\n            closeModal: true,\n            autoFocus: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signin\");\n            },\n          },\n          {\n            text: t(\"Register\"),\n            closeModal: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signup\");\n            },\n          },\n          {\n            text: t(\"Cancel\"),\n            closeModal: true,\n            callback: () => props.goto(\"prev\"),\n          }\n        ],\n      });\n      return false;\n    }\n    return true;\n  }\n\n  const onDownload = () => {\n    if (userIsAuthenticated()) {\n      downloadLocalUrl(config.data.templateDownloadUrl);\n      setNextIsEnabled(true);\n      props.setJob({...props.job, templateDownloaded: true/*, template: {...props.job?.template, downloaded: true}*/});\n    }\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Download\")}\n        </TabTitle>\n        <TabParagraph>\n          {t(\"Download Excel template, where you'll be able to insert contracts data\")}.\n        </TabParagraph>\n        <TabParagraph>\n          <Button onClick={onDownload} variant=\"contained\" color=\"tertiary\">\n            {t(\"Download\")} ⬇\n          </Button>\n        </TabParagraph>\n        {/* <br />\n        <TabParagraph small>\n          <input type=\"checkbox\"></input>\n          {t(\"Clicca qui se preferisci la versione ODS (Open Document Format),\n          nel caso che tu utilizzi LibreOffice anziché Microsoft Office\")}.\n        </TabParagraph> */}\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab02DownloadTemplate.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab02DownloadTemplate.defaultProps = {\n};\n\nexport default React.memo(Tab02DownloadTemplate);\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@mui/styles\";\nimport Grid from \"@mui/material/Grid\";\nimport { useTranslation } from \"react-i18next\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\n\nconst useStyles = makeStyles(theme => ({\n  ul: {\n    paddingHorizontal: 25,\n  }\n}));\n\nfunction Tab03FillData(props) {\n  const classes = useStyles();\n  //const { auth } = useContext(AuthContext);\n  const { t } = useTranslation();\n  const [ prevIsEnabled ] = useState(true);\n  const [ nextIsEnabled ] = useState(true);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Fill your data\")}\n        </TabTitle>\n        <TabParagraph>\n          {t(\"Now you can open the downloaded template with your spreadsheet program\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"There are 2 sheets: \\\"METADATI\\\" and \\\"ELENCO GARE\\\"\")}.\n          <br />\n          {t(\"We advise you to start from the first sheet, \\\"METADATI\\\", and enter the 4 general data required:\")}\n          <ul className={classes.ul}>\n            <li><i>{\"codiceFiscaleStrutturaProponente\"}</i> {t(\"the tax code of your company\")}</li>\n            <li><i>{\"denominazioneStrutturaProponente\"}</i> {t(\"the business name of your company\")}</li>\n            <li><i>{\"annoRiferimento\"}</i> {t(\"the reference year for which you will enter contracts\")}</li>\n            <li><i>{\"urlFile\"}</i> {t(\"the URL address where the final document will be published\")}</li>\n          </ul>\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"At this point you can move on to the second sheet, \\\"ELENCO GARE\\\"\")}.<br />\n          {t(\"Each contract (or \\\"tender\\\") must be entered, one per line\")}.\n        </TabParagraph>\n        <TabParagraph>\n          {t(\"The fields to fill in are:\")}\n          <ul className={classes.ul}>\n            <li><i>{\"CIG\"}</i> {t(\"the Tender Identification Code: a unique code that identifies each tender\")}</li>\n            <li><i>{\"OGGETTO\"}</i> {t(\"the object of the tender\")}</li>\n            <li><i>{\"SCELTA CONTRAENTE\"}</i> {t(\"the type of contractor; it must be chosen from a predefined list, available in the sheet\")}</li>\n            <li><i>{\"PARTECIPANTI / AGGREGATO o SINGOLO\"}</i> {t(\"the type of participant: aggregate (A) or individual (S)\")}</li>\n            <li><i>{\"PARTECIPANTI / COD. FISCALE o ID. ESTERO\"}</i> {t(\"the participant's tax code (or foreign ID if not Italian)\")}</li>\n            <li><i>{\"PARTECIPANTI / RAGIONE SOCIALE\"}</i> {t(\"the partecipant's business name\")}</li>\n            <li><i>{\"PARTECIPANTI / RUOLO\"}</i> {t(\"the role of the participant; it must be chosen from a predefined list, available in the sheet\")}</li>\n            <li><i>{\"AGGIUDICATARI\"}</i> {t(\"indicates whether the participant(s) are awarded the contract (S), or not (empty)\")}</li>\n            <li><i>{\"IMPORTO AGGIUDICAZIONE\"}</i> {t(\"the contract award amount\")}</li>\n            <li><i>{\"DATA INIZIO\"}</i> {t(\"the date of the award of the contract\")}</li>\n            <li><i>{\"DATA ULTIMAZIONE\"}</i> {t(\"the date of completion of the contract\")}</li>\n            <li><i>{\"IMPORTO DELLE SOMME LIQUIDATE\"}</i> {t(\"the amount of the liquidated amount\")}</li>\n          </ul>\n        </TabParagraph>\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab03FillData.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab03FillData.defaultProps = {\n};\n\nexport default React.memo(Tab03FillData);\n","import api from \"./API\";\n//import TokenService from \"./TokenService\";\n\n/*\n// get job status\nconst get = async () => {\n  // const user = TokenService.getUser();\n  // if (!user) {\n  //   return null;\n  // }\n  return await api.get(\"/job/get\");\n};\n\n// set job status\nconst set = (job) => {\n  // const user = TokenService.getUser();\n  // if (!user) {\n  //   return null;\n  // }\n  return api.put(\"/job/set\", {job});\n};\n*/\n\n// upload a file\nconst upload = (file) => {\n  const formData = new FormData();\n  formData.append(\"file\", file);\nconsole.info(\"*********** upload - file:\", file, \"formData:\", formData);\n  \n  return api.post(\"/job/upload\", formData, {\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n    }\n  });\n};\n\n// transform XLS to XML\nconst transformXls2Xml = (filePath) => {\n  return api.post(\"/job/transformXls2Xml/:filePath\", {\n    filePath,\n  });\n}\n\n// validate XML syntax\nconst validateXml = (transform) => {\n  return api.post(\"/job/validateXml/:transform\", {\n    transform,\n  });\n  // const retval = api.post(\"/job/validateXml/:transform\", {\n  //   transform,\n  // });\n  // console.log(\"****************** validateXml retval:\", retval);\n  // return retval;\n}\n\n// check ANAC periodic verification outcome\nconst outcomeCheck = (anno, codiceFiscaleAmministrazione) => {\n  return api.post(\"/job/outcomeCheck/:anno/:codiceFiscaleAmministrazione\",\n    {\n      anno,\n      codiceFiscaleAmministrazione,\n    }\n  );\n}\n\n// // get ANAC periodic verification failed outcome details\n// const outcomeFailureDetails = (anno, codiceFiscaleAmministrazione) => {\n//   return api.post(\n//     \"/job/outcomeFailureDetails/anno/codiceFiscaleAmministrazione\",\n//     {\n//       anno,\n//       codiceFiscaleAmministrazione,\n//     }\n//   );\n// }\n\n// check url existence\nconst urlExistenceAndMatch = (url, fileToMatch) => {\nconsole.log(\"*** jobService - url,fileToMatch:\", url, fileToMatch);\n  return api.post(\n    \"/job/urlExistenceAndMatch/url/fileToMatch\",\n    {\n      url,\n      fileToMatch,\n    }\n  );\n}\n\n// // just to ignore big xml when debug printing...\n// const sanitizeJob = (job) => {\n//   if (!job?.transform?.xml) {\n//     return job;\n//   }\n//   let j = job;\n//   j.transform.xml = \"…\";\n//   return j;\n// }\n\n// const getAllPlans = () => {\n//   return api.get(\n//     \"/job/getAllPlans\",\n//   );\n// }\n\nconst JobService = {\n//  get,\n//  set,\n  upload,\n  transformXls2Xml,\n  validateXml,\n  outcomeCheck,\n  //outcomeFailureDetails,\n  urlExistenceAndMatch,\n  //sanitizeJob,\n  //getAllPlans,\n};\n\nexport default JobService;\n","import React, { useMemo } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { useDropzone } from \"react-dropzone\";\n\nconst baseStyle = {\n  flex: 1,\n  display: \"flex\",\n  flexDirection: \"column\",\n  alignItems: \"center\",\n  padding: \"20px\",\n  borderWidth: 2,\n  borderRadius: 10,\n  borderColor: \"#64a36f\",\n  borderStyle: \"dashed\",\n  backgroundColor: \"#cef0b9\",\n  color: \"#353535\",\n  outline: \"none\",\n  transition: \"border .24s ease-in-out\",\n};\n\nconst focusedStyle = {\n  backgroundColor: \"#d3f6d1\",\n  borderColor: \"#a7d7c5\",\n};\n\nconst acceptStyle = {\n  backgroundColor: \"lightgreen\",\n  borderColor: \"darkgreen\",\n};\n\nconst rejectStyle = {\n  backgroundColor: \"lightred\",\n  borderColor: \"darkred\",\n};\n\nconst disabledStyle = {\n  backgroundColor: \"lightgray\",\n  borderColor: \"darkgray\",\n  fontStyle: \"italic\",\n};\n\nconst DragNDrop = ({ drop, accept, disabled }) => {\n  const { t } = useTranslation();\n  const {\n    getRootProps,\n    isFocused,\n    isDragAccept,\n    isDragReject,\n    isDragActive\n  } = useDropzone({\n    onDrop: drop,\n    accept: accept,\n  });\n\n  const style = useMemo(() => ({\n    ...baseStyle,\n    ...(disabled ? disabledStyle : isFocused ? focusedStyle : {}),\n    ...(disabled ? disabledStyle : isDragAccept ? acceptStyle : {}),\n    ...(disabled ? disabledStyle : isDragReject ? rejectStyle : {})\n  }), [\n    isFocused,\n    isDragAccept,\n    isDragReject,\n    disabled,\n  ]);\n\n  const {onClick, onBlur, onDragEnter, onDragLeave, onDragOver, onDrop, onFocus, onKeyDown, ...getRootPropsDisabled} = getRootProps({style});\n  let getRootPropsActual = {};\n  if (disabled) {\n    getRootPropsActual = getRootPropsDisabled;\n  } else {\n    getRootPropsActual = getRootProps({style});\n  } \n\n  return (\n    <div className=\"dropzone-div\" {...getRootPropsActual}>\n      <div className=\"text-center\">\n        {\n          disabled ? (\n            <p>\n              {t(\"Remove file to load a new one\")}\n            </p>\n          ) :\n          isDragActive ? (\n            <p className=\"dropzone-content\">\n              {t(\"Release to drop the files here\")}\n            </p>\n          ) : (\n            <p className=\"dropzone-content\">\n              {t(\"Drag 'n drop some files here, or click to select files\")}\n            </p>\n          )\n        }\n      </div>\n    </div>\n  );\n};\n\nDragNDrop.propTypes = {\n  drop: PropTypes.func.isRequired,\n  accept: PropTypes.array.isRequired,\n  disabled: PropTypes.bool,\n};\nDragNDrop.defaultProps = {\n  disabled: false,\n};\n\nexport default DragNDrop;\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@mui/material/Grid\";\nimport { useModal } from \"mui-modal-provider\";\nimport AuthService from \"../services/AuthService\";\nimport JobService from \"../services/JobService\";\nimport TokenService from \"../services/TokenService\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabResetButton, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport { errorMessage } from \"../libs/Misc\";\nimport { toast } from \"./Toast\";\nimport DragNDrop from \"./DragNDrop\";\nimport FlexibleDialog from \"./FlexibleDialog\";\n\n\n\nfunction Tab04Upload(props) {\n  //const classes = useStyles();\n  const { t } = useTranslation();\n  const history = useHistory();\n  const [ prevIsEnabled ] = useState(true);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(!!props?.job?.file);\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  const [ accept ] = useState([\n    \".csv\",\n    \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",\n    \"application/vnd.ms-excel\",\n  ]);\n\n  const userIsAuthenticated = () => {\n    if (!AuthService.getCurrentUser()) { // user is not authenticated\n      openDialog({\n        title: t(\"Please log in or register\"),\n        contentText: t(\"You need to be authenticated to proceed\"),\n        actions: [\n          {\n            text: t(\"Login\"),\n            closeModal: true,\n            autoFocus: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signin\");\n            },\n          },\n          {\n            text: t(\"Register\"),\n            closeModal: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signup\");\n            },\n          },\n          {\n            text: t(\"Cancel\"),\n            closeModal: true,\n            callback: () => props.goto(\"prev\"),\n          }\n        ],\n      });\n      return false;\n    }\n    return true;\n  };\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  const userIsAuthenticatedCallback = useCallback(() => { return userIsAuthenticated() }, []);\n  \n  useEffect(() => {\n    userIsAuthenticatedCallback(); // check if user is authenticated\n  }, [userIsAuthenticatedCallback]);\n\n  const fileSet = useCallback(async(file) => {\n    props.setJob({...props.job, file});\n  }, [props]);\n\n  const fileReset = useCallback(async() => {\n    /**\n     * When file is reset, we clear the full job! (we only keep tabId)\n     * NEWFEATURE: possibly save current job as historical record\n     */\n    let job = {};\n    job.tabId = props.job.tabId;\n    //job.file = null;\n    props.setJob(job);\n    setNextIsEnabled(false);\n  }, [props]);\n\n  const fileValidate = useCallback((file) => { // validate file type or name\n    // ods: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\n    // xls: application/vnd.ms-excel\n    if (!( // TODO: check if these tests are sufficiently general...\n      file?.type?.split(\"/\")[1]?.match(/officedocument\\.spreadsheetml\\.sheet/i) ||\n      file?.type?.split(\"/\")[1]?.match(/ms-excel/i)\n    )) {\n      return t(\"Please upload a spreadsheet\") + `.` +\n        (file?.type ? ` ` + t(\"Selected file looks like {{fileType}}\", { fileType: file.type }) : \"\")\n      ;\n    }\n    return null; // validated\n  }, [t]);\n\n  const fileUpload = useCallback(async(file) => {\n    await JobService.upload(file).then(\n      result => {\n        console.log('Upload success, file path', result.data.file);\n        fileSet(result.data.file);\n      },\n      error => {\n        console.error('Upload error:', error);\n        fileReset();\n        props.setJob({...props.job, file: {error: errorMessage(error)}}) // set upload error in job.file.error\n        toast.error(errorMessage(error));\n      }\n    );\n  }, [props, fileSet, fileReset]);\n\n  const fileSelect = useCallback(async(selectedFile) => {\n    if (selectedFile) {\n      const error = fileValidate(selectedFile);\n      if (error) {\n        //setFile(null);\n        props.setJob({...props.job, file: null});\n        //fileSet(null);\n        setNextIsEnabled(false);\n      } else {\n        //setFile(selectedFile);\n        //fileSet(selectedFile);\n        props.setJob({...props.job, file: selectedFile});\n        await fileUpload(selectedFile);\n        setNextIsEnabled(true);\n      }\n    } else {\n      toast.error(t(\"No file selected, sorry... Please, repeat...\"));\n      //setFile(null);\n      //fileSet(null);\n      props.setJob({...props.job, file: null});\n      setNextIsEnabled(false);\n    }\n  }, [/*fileSet, */props, fileUpload, fileValidate, t]);\n\n  // on drop callback\n  const onDrop = useCallback(acceptedFiles => {\n    // this callback will be called after files get dropped, we will get the acceptedFiles;\n    // if needed, we can even access the rejected files too\n    console.log(\"accepted files:\", acceptedFiles);\n    fileSelect(acceptedFiles[0]);\n  }, [fileSelect]);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = async () => {\n    props.goto(\"next\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Upload\")}\n        </TabTitle>\n        <TabParagraph>\n          {t(\"Load filled spreadsheet\")}\n        </TabParagraph>\n\n        <div className=\"container\">\n          <DragNDrop\n            drop={onDrop}\n            accept={accept}\n            disabled={!!props?.job?.file?.originalname}\n          />\n          <br />\n          <TabParagraph>\n            {props?.job?.file?.originalname && (\n              <>\n                {t(\"Selected file\")}: <b>{props?.job?.file?.originalname}</b>\n                &emsp;\n                <TabResetButton\n                  onClick={fileReset}\n                  title={t(\"Remove uploaded file, and restart the whole process\")}>\n                  {t(\"Remove\")} 🗑\n                </TabResetButton>\n              </>\n            )}\n            </TabParagraph>\n        </div>\n\n      </TabBodyScrollable>\n\n      {/* <pre>\n        JOB: {JSON.stringify(props.job, null, 2)}\n      </pre> */}\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\n\nTab04Upload.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab04Upload.defaultProps = {\n};\n\nexport default React.memo(Tab04Upload);","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useHistory } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { useModal } from \"mui-modal-provider\";\nimport { makeStyles } from \"@mui/styles\";\nimport Grid from \"@mui/material/Grid\";\nimport Accordion from \"@mui/material/Accordion\";\nimport AccordionSummary from \"@mui/material/AccordionSummary\";\nimport AccordionDetails from \"@mui/material/AccordionDetails\";\nimport Card from \"@mui/material/Card\";\nimport CardContent from '@mui/material/CardContent';\nimport Typography from \"@mui/material/Typography\";\nimport ExpandMoreIcon from \"@mui/icons-material/ExpandMore\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport { toast } from \"./Toast\";\nimport FlexibleDialog from \"./FlexibleDialog\";\nimport { useAxiosLoader } from \"../hooks/useAxiosLoader\";\nimport TokenService from \"../services/TokenService\";\nimport JobService from \"../services/JobService\";\nimport { errorMessage } from \"../libs/Misc\";\nimport config from \"../config\";\n\nconst useStyles = makeStyles(theme => ({\n  accordionRoot: {\n    fontSize: \"0.9em\",\n  },\n  danger: {\n    color: theme.palette.error.dark,\n    fontWeight: \"bold\",\n  }\n}));\n\n\n\nfunction Tab05Produce(props) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const history = useHistory();\n  const user = TokenService.getUser();\n  const [ loading ] = useAxiosLoader();\n  const [ info, setInfo ] = useState([]);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(props.job?.transform?.code === \"OK\");\n  const [ prevIsEnabled] = useState(true);\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  useEffect(() => {\n    if (props.job?.transform) {\n      if (props.job?.transform?.truncatedDueToPlanLimit) {\n        if (!props.job?.transform?.planUpgradeDeclined) {\n          openDialog({\n            title: t(\"Please upgrade your plan\"),\n            contentText: \n              t(\"You need to upgrade your plan to proceed.\") + \"\\n\" +\n              t(\"Your current plan is \\\"{{planName}}\\\".\", { planName: user?.plan?.name}) + \"\\n\" +\n              t(\"To elaborate {{cigCount}} CIGs you need at least plan \\\"{{planName}}\\\"\", { cigCount: props.job?.transform?.cigCount, planName: props.job?.transform?.planRequired?.name }),\n            actions: [\n              {\n                text: t(\"Upgrade plan\"),\n                closeModal: true,\n                autoFocus: true,\n                callback: () => {\n                  TokenService.set(\"redirect\", props.tabId);\n                  history.push(\"/profile\", { tabValue: 1 }); // redirect to /profile route, to second tab, where plan can be changed\n                },\n              },\n              {\n                text:\n                  (user?.plan?.cigNumberAllowed === Number.MAX_SAFE_INTEGER) ?\n                    t(\"Proceed with unlimited CIG's\")\n                  :\n                    t(\"Proceed with the first {{cigNumberAllowed}} CIGs\", { cigNumberAllowed: user?.plan?.cigNumberAllowed }),\n                closeModal: true,\n                callback: () => {\n                  props.setJob({...props.job, transform: {...props.job?.transform, planUpgradeDeclined: true}});\n                },\n              },\n            ],\n          });\n        }\n      }\n    }\n  /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job?.transform]);\n\n  useEffect(() => {\n    if (props.job?.file && !props.job?.transform) {\n      (async () => {\n        await JobService.transformXls2Xml(props.job.file.path).then(\n          response => {\n            props.setJob({...props.job, transform: response?.data});\n          },\n          error => {\n            toast.error(errorMessage(error));\n            //props.goto(\"prev\");\n          },\n        );\n      })();\n    }\n  }, []);\n\n  useEffect(() => {\n    if (props.job?.file && (props.job?.transform?.code === \"OK\") && !props.job?.validateXml) {\n      (async () => {\n        await JobService.validateXml(props.job.transform).then(\n          response => {\n            props.setJob({...props.job, validateXml: response?.data});\n            setNextIsEnabled(props.job?.transform?.code === \"OK\" && response?.data?.code === \"OK\" && allErrors().length === 0);\n          },\n          error => {\n            toast.error(errorMessage(error));\n            setNextIsEnabled(false);\n            //props.goto(\"prev\");\n          },\n        );\n      })();\n    }\n    /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job?.transform?.code]);\n\n\n  useEffect(() => {\n    if (props.job?.validateXml) {\n      reclaimInfo();\n    }\n  }, [props.job]);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  const reclaimInfo = () => { // info preparation\n    let info = [];\n    if (props.job?.file) info[t(\"Original file name\")] = props.job.file.originalname;\n    if (props.job?.transform?.metadati?.titolo) info[t(\"Title\")] = props.job.transform.metadati.titolo;\n    //if (props.job?.transform?.metadati?.abstract) info[t(\"Abstract\")] = props.job.transform.metadati.abstract;\n    //if (props.job?.transform?.metadati?.dataPubblicazioneDataset) info[t(\"Dataset publish date\")] = props.job.transform.metadati.dataPubblicazioneDataset;\n    //if (props.job?.transform?.metadati?.dataUltimoAggiornamentoDataset) info[t(\"Dateset last update date\")] = props.job.transform.metadati.dataUltimoAggiornamentoDataset;\n    //if (props.job?.transform?.metadati?.entePubblicatore) info[t(\"Publishing body\")] = props.job.transform.metadati.entePubblicatore;\n    if (props.job?.transform?.metadati?.annoRiferimento) info[t(\"Reference year\")] = props.job.transform.metadati.annoRiferimento;\n    //if (props.job?.transform?.metadati?.urlFile) info[t(\"Url file\")] = props.job.transform.metadati.urlFile;\n    if (props.job?.transform?.rownum) info[t(\"Number of source rows\")] = props.job.transform.rownum;\n    if (props.job?.transform?.cigCount) info[t(\"Number of CIGs\")] = props.job.transform?.cigCount\n    if (props.job?.transform?.importoAggiudicazioneTotale) info[t(\"Total award amount\")] = `${config.currency.default} ${props.job.transform.importoAggiudicazioneTotale}`;\n    if (props.job?.transform?.importoSommeLiquidateTotale) info[t(\"Total liquidated amount\")] = `${config.currency.default} ${props.job.transform.importoSommeLiquidateTotale}`;\n    setInfo(info);\nconsole.log(\"INFO1:\", info);\n  }\n\n  const allWarnings = () => {\n    const transformWarnings = props.job?.transform?.warnings ?? [];\n    const validateXmlWarnings = props.job?.validateXml?.warnings ?? [];\n    return transformWarnings.concat(validateXmlWarnings);\n  }\n\n  const allErrors = () => {\n    const transformErrors = props.job?.transform?.errors ?? [];\n    const validateXmlErrors = props.job?.validateXml?.errors ?? [];\n    return transformErrors.concat(validateXmlErrors);\n  }\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Produce XML dataset\")}\n        </TabTitle>\n        <TabParagraph>\n          {loading && `🟡 ${t(\"Transforming XLS to XML and validating...\")}`}\n          {/* {statusLocal.loading === \"transform\" && `🟡 ${t(\"Transforming XLS to XML...\")}`}\n          {statusLocal.loading === \"validateXml\" && `🟡 ${t(\"Validating...\")}`} */}\n        </TabParagraph>\n        {(props.job?.transform?.truncatedDueToPlanLimit && (user?.plan?.cigNumberAllowed < Number.MAX_SAFE_INTEGER)) && (\n          <TabParagraph>\n            <Typography align=\"center\" className={classes.danger}>{t(\"Warning\")}: {t(\"The produced dataset has been truncated to {{cigs}} CIGs; you can proceed and downoad it, but file is not to be published\", {cigs: user?.plan?.cigNumberAllowed})}.</Typography>\n            <br />\n          </TabParagraph>\n        )}\n\n        {props.job?.transform?.outputFile && (Object.keys(info).length > 0) && (\n          <Grid\n            container\n            sx={{ overflowY: \"auto\", maxHeight: \"300\" }}\n            spacing={0}\n            direction=\"column\"\n            alignItems=\"center\"\n            justify=\"center\"\n          >\n            <Grid item>\n              <Card sx={{backgroundColor: \"#eee\"}}>\n                <CardContent>\n                  {Object.keys(info).map((key, index) => (\n                    <Typography sx={{fontSize: \".8em\" }} color=\"text.secondary\" key={index}>{key}: {info[key]}</Typography>\n                  ))}\n                </CardContent>\n              </Card>\n            </Grid>\n          </Grid>\n        )}\n\n        {(!loading &&\n          props.job?.transform && (props.job?.transform?.code !== \"OK\" && props.job?.transform?.message) &&\n          <Typography>🔴 {props.job?.transform?.message}</Typography>\n        )}\n        {(!loading &&\n          props.job?.validateXml && (props.job?.validateXml?.code !== \"OK\" && props.job?.validateXml?.message) &&\n          <Typography>🔴 {props.job?.validateXml?.message}</Typography>\n        )}\n        {(!loading &&\n          props.job?.transform?.code === \"OK\" &&\n          props.job?.transform?.outputFile &&\n          props.job?.validateXml?.code === \"OK\" &&\n          allErrors().length === 0 &&\n          allWarnings().length === 0) && (\n          <Typography>🟢 {t(\"Production and validation completed successfully\")}</Typography>\n        )}\n\n        {(allErrors().length > 0) && (\n          <span style={{color: \"darkred\"}}>\n            <TabParagraph>\n              <Accordion disableGutters={true} classes={{ root: classes.accordionRoot }} style={{color:\"darkred\"}}>\n                <AccordionSummary\n                  expandIcon={<ExpandMoreIcon />}\n                  aria-controls={`panel-error-content`}\n                  id={`panel-error-header`}\n                >\n                  <Typography>🔴 {`${allErrors().length} ${t(\"errors\")}`}</Typography>\n                </AccordionSummary>\n                <AccordionDetails>\n                  <Typography>\n                  {allErrors().map((error, index) => (\n                    <div key={index} style={{borderTop: \"1px solid #ddd\", paddingTop: 5}}>\n                      {1 + index}) {error}\n                    </div>\n                  ))}\n                  </Typography>\n                </AccordionDetails>\n              </Accordion>\n            </TabParagraph>\n          </span>\n        )}\n\n        {(allWarnings().length > 0) && (\n          <span style={{color: \"darkorange\"}}>\n            <TabParagraph>\n              <Accordion disableGutters={true} classes={{ root: classes.accordionRoot }} style={{color: \"orange\"}}>\n                <AccordionSummary\n                  expandIcon={<ExpandMoreIcon />}\n                  aria-controls={`panel-warning-content`}\n                  id={`panel-warning-header`}\n                >\n                  <Typography>🟠 {`${allWarnings().length} ${t(\"warnings\")}`}</Typography>\n                </AccordionSummary>\n                <AccordionDetails>\n                  <Typography>\n                  {allWarnings().map((warning, index) => (\n                    <div key={index} style={{borderTop: \"1px solid #ddd\", paddingTop: 5}}>\n                      {1 + index}) {warning}\n                    </div>\n                  ))}\n                  </Typography>\n                </AccordionDetails>\n              </Accordion>\n            </TabParagraph>\n          </span>\n        )}\n\n      </TabBodyScrollable>\n\n      <Grid container className={classes.root}>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n      {/* <pre>\n        JOB: {JSON.stringify(props.job, null, 2)}\n      </pre> */}\n\n    </TabContainer>\n  );\n}\n\nTab05Produce.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab05Produce.defaultProps = {\n};\n\nexport default React.memo(Tab05Produce);\n","import React, { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { useModal } from \"mui-modal-provider\";\nimport { makeStyles } from \"@mui/styles\";\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport Typography from \"@mui/material/Typography\";\nimport AuthService from \"../services/AuthService\";\nimport TokenService from \"../services/TokenService\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport { downloadRemoteUrl } from \"../libs/Misc\";\nimport FlexibleDialog from \"./FlexibleDialog\";\n\n\n\nconst useStyles = makeStyles(theme => ({\n  danger: {\n    color: theme.palette.error.dark,\n    fontWeight: \"bold\",\n  }\n}));\n\nfunction Tab06DownloadDataset(props) {\n  const { t } = useTranslation();\n  const classes = useStyles();\n  const history = useHistory();\n  const user = TokenService.getUser();\n  const [ prevIsEnabled, ] = useState(true);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(() => !!(props.job?.datasetDownloaded && !props.job?.transform?.truncatedDueToPlanLimit));\n  const { showModal } = useModal();\n  const openDialog = (props) => showModal(FlexibleDialog, props);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  const userIsAuthenticated = () => {\n    if (!AuthService.getCurrentUser()) { // user is not authenticated\n      openDialog({\n        title: t(\"Please log in or register\"),\n        contentText: t(\"You need to be authenticated to proceed\"),\n        actions: [\n          {\n            text: t(\"Login\"),\n            closeModal: true,\n            autoFocus: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signin\");\n            },\n          },\n          {\n            text: t(\"Register\"),\n            closeModal: true,\n            callback: () => {\n              TokenService.set(\"redirect\", props.tabId);\n              history.push(\"/signup\");\n            },\n          },\n          {\n            text: t(\"Cancel\"),\n            closeModal: true,\n            callback: () => props.goto(\"prev\"),\n          }\n        ],\n      });\n      return false;\n    }\n    return true;\n  }\n\n  const ondatasetDownloaded = () => {\n    if (userIsAuthenticated()) {\n      //let url = config.service.endpoint + \"marco/dataset-2022.xml\";\n      let url = props.job.transform.outputUrl;\nconsole.log(\"job:\", props.job);\nconsole.log(\"url:\", url);\n      downloadRemoteUrl(url);\n      setNextIsEnabled(!props.job?.transform?.truncatedDueToPlanLimit);\n      props.setJob({...props.job, datasetDownloaded: true});\n    }\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Download produced dataset\")}\n        </TabTitle>\n\n        {props.job?.transform?.truncatedDueToPlanLimit && (\n          <TabParagraph>\n            <Typography align=\"center\" className={classes.danger}>{t(\"Warning\")}: {t(\"The produced dataset has been truncated to {{cigs}} CIGs; you can proceed and downoad it, but file is not to be published\", {cigs: user?.plan?.cigNumberAllowed})}.</Typography>\n            <br />\n          </TabParagraph>\n        )}\n\n        {props.job?.transform?.outputFile && (\n          <>\n            <TabParagraph>\n                {t(\"Download dataset\")}.\n            </TabParagraph>\n            <TabParagraph>\n              <Button onClick={ondatasetDownloaded} variant=\"contained\" color=\"tertiary\">\n                {t(\"Download\")} ⤵\n              </Button>\n            </TabParagraph>\n          </>\n        )}\n\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\n\nTab06DownloadDataset.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab06DownloadDataset.defaultProps = {\n};\n\nexport default React.memo(Tab06DownloadDataset);\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@mui/material/Grid\";\nimport Button from \"@mui/material/Button\";\nimport { toast } from \"./Toast\";\nimport { errorMessage } from \"../libs/Misc\";\nimport { useAxiosLoader } from \"../hooks/useAxiosLoader\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport JobService from \"../services/JobService\";\n\n\n\nfunction Tab07Publish(props) {\n  const { t } = useTranslation();\n  const [ loading ] = useAxiosLoader();\n  const [ prevIsEnabled, ] = useState(true);\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(() => props.job?.datasetDownloaded !== undefined ? props.job.datasetDownloaded : false);\n  const [ forceVerifyPublished, setForceVerifyPublished ] = useState(false);\n  const publishUrlFile = props.job?.transform?.metadati?.urlFile;\n  const fileToMatch = props.job?.transform?.outputFile;\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  async function onVerifyPublished() {\n    setForceVerifyPublished(true);\n  };\n\n  useEffect(() => {\n    if (props.job && props.job.transform) {\n      if (!props.job?.datasetIsPublished || forceVerifyPublished) {\n      (async () => {\n        setForceVerifyPublished(false);\nconsole.log(\"*************** publishUrlFile, fileToMatch:\", publishUrlFile, fileToMatch);\n        await JobService.urlExistenceAndMatch(publishUrlFile, fileToMatch).then(\n          result => {\n            props.setJob({...props.job, datasetIsPublished: result.data.published, datasetIsPublishedAsIs: result.data.publishedAsIs});\n            setNextIsEnabled(result?.data?.published && result?.data?.publishedAsIs);\n          },\n          error => {\nconsole.error(\"Tab06DownloadDataset error:\", error);\n            toast.error(errorMessage(error));\n            setNextIsEnabled(false);\n            //props.setJob({...props.job, outcome: error.response.data.message});\n            //props.goto(\"prev\");\n          }\n        );\n      })();\n    }\n  }\n  /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job.transform, props.job.outcome, forceVerifyPublished]);\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Publish downloaded dataset\")}\n        </TabTitle>\n        {props.job?.transform?.outputFile && (\n          <>\n            <TabParagraph>\n              {loading && (\n                `${t(\"Checking\")}...`\n              )}\n              {!loading && !props.job.datasetIsPublished && (\n                `🔴 ${t(`Dataset is not published yet at address {{publishUrlFile}}`, {publishUrlFile})}`\n              )}\n              {!loading && props.job.datasetIsPublished && !props.job.datasetIsPublishedAsIs && (\n                `🔴 ${t(`Dataset is published at address {{publishUrlFile}}, but differs from produced dataset`, {publishUrlFile})}`\n              )}\n              {!loading && props.job.datasetIsPublished && props.job.datasetIsPublishedAsIs && (\n                `🟢 ${t(`Dataset is correctly published at address {{publishUrlFile}}`, {publishUrlFile})}`\n              )}\n            </TabParagraph>\n            <TabParagraph>\n              {!loading && (\n                <>\n                  <br />\n                  <Button onClick={onVerifyPublished} variant=\"contained\" color=\"tertiary\">\n                    {t(\"Verify publication now\")} 🌍\n                  </Button>\n                </>\n              )}\n            </TabParagraph>\n\n            {/*<pre>\n              JOB: {JSON.stringify(props.job, null, 2)}\n              </pre>*/}\n\n          </>\n        )}\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab07Publish.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab07Publish.defaultProps = {\n};\n\nexport default React.memo(Tab07Publish);\n","import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport { Grid, Button } from \"@mui/material\";\nimport { toast } from \"./Toast\";\nimport { errorMessage, dateToLocaleDate } from \"../libs/Misc\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton, TabNextButton } from \"./TabsComponents\";\nimport { useAxiosLoader } from \"../hooks/useAxiosLoader\";\nimport JobService from \"../services/JobService\";\n\n\n\nfunction Tab08Validation(props) {\n  const { t } = useTranslation();\n  const [ loading ] = useAxiosLoader();\n  const [ nextIsEnabled, setNextIsEnabled ] = useState(false);\n  const [ prevIsEnabled ] = useState(true);\n  const [ forceCheckValidated, setForceCheckValidated ] = useState(!props.job?.outcome?.esitoUltimoTentativoAccessoUrl);\n\n  async function onCheckValidated() {\n    setForceCheckValidated(true);\n  };\n\n  useEffect(() => {\n    if (props.job?.transform) {\n      if (props.job?.outcome?.esitoUltimoTentativoAccessoUrl) {\n        setNextIsEnabled(props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"successo\");\n      }\n      if (forceCheckValidated) {\n        (async () => {\n          await JobService.outcomeCheck(\n            props.job?.transform?.metadati?.annoRiferimento,\n            props.job?.transform?.header?.codiceFiscaleStrutturaProponente\n          ).then(\n            result => {\n              setForceCheckValidated(false);\nconsole.log(\"OUTCOMECHECK result:\", result?.data);\n              props.setJob({...props.job, outcome: result?.data});\n              setNextIsEnabled(result.data?.esitoUltimoTentativoAccessoUrl === \"successo\");\n            },\n            error => {\n              toast.error(errorMessage(error));\n              setNextIsEnabled(false);\n              //props.goto(\"prev\");\n            }\n          );\n        })();\n      }\n    }\n  /* eslint-disable react-hooks/exhaustive-deps */\n  }, [props.job.transform, forceCheckValidated]);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  const onNext = () => {\n    props.goto(\"next\");\n  };\n\n  const tentativiAccessoUrlLast = props.job?.outcome?.tentativiAccessoUrl?.length - 1;\n  const listaAccessoRisorsaLast = (tentativiAccessoUrlLast >= 0 ? props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa?.length - 1 : -1);\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Check ANAC validation\")}\n        </TabTitle>\n        <TabParagraph>\n          {loading && (\n            `${t(\"Checking\")}...`\n          )}\n          {!loading && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"in corso\") && (\n            `🟡 ${t(\"attempt in progress\")}...`\n          )}\n          {!loading && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"successo\") && (\n            `🟢 ${t(\"last attempt succeeded\")}`\n          )}\n          {!loading && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"fallito\") && (\n            `🔴 ${t(\"last attempt failed\")}`\n          )}\n        </TabParagraph>\n        {!loading && (\n          <div style={{fontSize: \"0.8em\", marginLeft: \"3em\"}}>\n            <TabParagraph>\n              <i>{t(\"last verification date\")}:</i> {props.job?.outcome?.dataUltimoTentativoAccessoUrl ? dateToLocaleDate(props.job?.outcome?.dataUltimoTentativoAccessoUrl) : t(\"never\")}\n            </TabParagraph>\n          </div>\n        )} \n        {!loading && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"fallito\") && (\n          <div style={{fontSize: \"0.8em\", marginLeft: \"3em\"}}>\n            <TabParagraph>\n              <i>{t(\"outcome code\")}:</i> {props.job?.outcome?.esitoComunicazione?.codice ?? \"?\"}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"outcome description\")}:</i> {props.job?.outcome?.esitoComunicazione?.descrizione ?? \"?\"}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"outcome detail\")}:</i> {props.job?.outcome?.esitoComunicazione?.dettaglio ?? \"?\"}\n            </TabParagraph>\n          </div>\n        )}\n        {!loading && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"fallito\") && (tentativiAccessoUrlLast >= 0) && (\n          <div style={{fontSize: \"0.8em\", marginLeft: \"3em\"}}>\n            <TabParagraph>\n              <i>{t(\"last attempt to access url outcome code\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.esito?.codice ?? \"?\"}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"last attempt to access url outcome description\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.esito?.descrizione ?? \"?\"}\n            </TabParagraph>\n          </div>\n        )}\n        {!loading && (props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"fallito\") && (tentativiAccessoUrlLast >= 0) && (listaAccessoRisorsaLast >= 0) && (\n          <div style={{fontSize: \"0.8em\", marginLeft: \"3em\"}}>\n            <TabParagraph>\n              <i>{t(\"last attempt to access resource\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa[listaAccessoRisorsaLast]?.url ?? \"?\"}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"last attempt to access resource xml valid\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa[listaAccessoRisorsaLast]?.xmlValido ? t(\"yes\") : t(\"no\")}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"last attempt to access resource xml validation\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa[listaAccessoRisorsaLast]?.dettaglioValidazioneXml ?? t(\"(empty)\")}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"last attempt to access resource code\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa[listaAccessoRisorsaLast]?.esitoAccessoRisorsa?.codice ?? \"?\"}\n            </TabParagraph>\n            <TabParagraph>\n              <i>{t(\"last attempt to access resource description\")}:</i> {props.job?.outcome?.tentativiAccessoUrl[tentativiAccessoUrlLast]?.listaAccessoRisorsa[listaAccessoRisorsaLast]?.esitoAccessoRisorsa?.descrizione ?? \"?\"}\n            </TabParagraph>\n          </div>\n        )}\n        <br />\n        <TabParagraph>\n          {props.job.datasetIsPublished && !(props.job?.outcome?.esitoUltimoTentativoAccessoUrl === \"successo\") && (\n            <Button onClick={onCheckValidated} variant=\"contained\" color=\"tertiary\">\n              {t(\"Check validation now\")} 🎯\n            </Button>\n          )}\n        </TabParagraph>\n        \n        {/* <pre>\n          JOB: {JSON.stringify(props.job, null, 2)}\n        </pre> */}\n\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n        <Grid item xs={6}>\n          <TabNextButton onNext={onNext} nextIsEnabled={nextIsEnabled}>\n            {t(\"Continue\")}\n          </TabNextButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab08Validation.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab08Validation.defaultProps = {\n};\n\nexport default React.memo(Tab08Validation);\n","import React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { useTranslation } from \"react-i18next\";\nimport Grid from \"@mui/material/Grid\";\nimport { TabContainer, TabBodyScrollable, TabTitle, TabParagraph, TabPrevButton } from \"./TabsComponents\";\nimport config from \"../config\";\n\nfunction Tab09Finished(props) {\n  const { t } = useTranslation();\n  const [ prevIsEnabled ] = useState(true);\n\n  const onPrev = () => {\n    props.goto(\"prev\");\n  };\n\n  return (\n    <TabContainer>\n      <TabBodyScrollable>\n        <TabTitle>\n          {t(\"Finished\")}!\n        </TabTitle>\n        {props.job?.transform?.outputFile && (\n          <>\n            <TabParagraph>\n              <div style={{fontSize: 128, textAlign: \"center\"}}>\n                🏁\n              </div>\n            </TabParagraph>\n            <TabParagraph>\n              <div style={{textAlign: \"center\"}}>\n                {t(\"Compliments, you did comply successfully to {{referenceLawName}} fulfillments for year {{year}}\", {referenceLawName: config.referenceLawName, year: props.job?.transform?.metadati?.annoRiferimento})}\n              </div>\n            </TabParagraph>\n          </>\n        )}\n      </TabBodyScrollable>\n\n      <Grid container>\n        <Grid item xs={6}>\n          <TabPrevButton onPrev={onPrev} prevIsEnabled={prevIsEnabled}>\n            {t(\"Back\")}\n          </TabPrevButton>\n        </Grid>\n      </Grid>\n\n    </TabContainer>\n  );\n}\nTab09Finished.propTypes = {\n  goto: PropTypes.func.isRequired,\n};\nTab09Finished.defaultProps = {\n};\n\nexport default React.memo(Tab09Finished);\n","import React, { useState, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport PropTypes from \"prop-types\";\nimport makeStyles from '@mui/styles/makeStyles';\nimport withStyles from '@mui/styles/withStyles';\nimport AppBar from '@mui/material/AppBar';\nimport Paper from '@mui/material/Paper';\nimport Tabs from \"@mui/material/Tabs\";\nimport Tab from \"@mui/material/Tab\";\nimport Typography from \"@mui/material/Typography\";\nimport Box from \"@mui/material/Box\";\nimport TokenService from \"../services/TokenService\";\n//import JobService from \"../services/JobService\";\nimport Tab01Start from \"./Tab01Start\";\nimport Tab02DownloadTemplate from \"./Tab02DownloadTemplate\";\nimport Tab03FillData from \"./Tab03FillData\";\nimport Tab04Upload from \"./Tab04Upload\";\nimport Tab05Produce from \"./Tab05Produce\";\nimport Tab06DownloadDataset from \"./Tab06DownloadDataset\";\nimport Tab07Publish from \"./Tab07Publish\";\nimport Tab08Validation from \"./Tab08Validation\";\nimport Tab09Finished from \"./Tab09Finished\";\nimport config from \"../config\";\n\n\n\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`nav-tab-${index}`}\n      {...other}\n    >\n      <Box p={3}>\n        {children}\n      </Box>\n    </Typography>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired,\n};\n\nconst a11yProps = (index) => {\n  return {\n    id: `nav-tab-${index}`,\n    \"aria-controls\": `nav-tabpanel-${index}`\n  };\n}\n\nconst StyledTab = withStyles((theme) => ({\n  root: {\n    opacity: 0.8,\n  },\n}))(props => {\n  return (\n    <Tab {...props} />\n  );\n});\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    //backgroundColor: theme.palette.background.paper,\n  },\n  // tabs: {\n  //   \"& .MuiTabs-indicator\": {\n  //     //display: \"none\",\n  //     backgroundColor: \"orange\",\n  //   }\n  // }\n  tab: {\n    backgroundColor: theme.palette.secondary.light,\n  },\n  tabIndicator: {\n    backgroundColor: \"MediumSeaGreen\", //theme.palette.secondary.dark,\n    height: 3,\n  }\n\n}));\n\nconst TabsPanel = () => {\n  const classes = useStyles();\n  const [ job, setJob ] = useState(() => TokenService.getJob());\n  //const { job, setJob } = useContext(JobContext);\n  //const [ job, setJob ] = useState(JobService.get());\n  //const [ job, setJob ] = useState(TokenService.getJob());\n  //const redirect = TokenService.getRedirect();\n  //const [ tabId, setTabId ] = useState(TokenService.getJob());\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    const redirect = TokenService.get(\"redirect\");\n    if (redirect) {\n      setJob({...job, tabId: redirect });\n      TokenService.remove(\"redirect\");\n    }\n  }, [job]);\n  \n  useEffect(() => { // to serialize job\n    TokenService.setJob(job); // serialize locally, on local storage\n    //JobService.set(job); // serialize remotely, on server db (never used...)\n  }, [job]);\n\n  function changeTab(id) {\n    setJob({...job, tabId: id });\n  }\n\n  function forceTab(event, id) {\n    if (config.ui.userCanForceTabChange) { // user can force tab change by clicking on app bar titles\n      changeTab(id);\n    }\n  }\n  \n  function goto(where) {\n    let id = where;\n    if (typeof where === \"string\") {\n      switch (where.toLowerCase()) {\n        case \"start\":\n          break;\n        case \"download template\":\n          break;\n        case \"fill your data\":\n          break;\n        case \"upload\":\n          break;\n        case \"produce\":\n          break;\n        case \"download dataset\":\n          break;\n        case \"publish\":\n          break;\n        case \"wait for validation\":\n          break;\n        case \"finish!\":\n          break;\n        case \"next\":\n          id = job ? job.tabId + 1 : 0;\n          break;\n        case \"prev\":\n          id = job ? job.tabId - 1 : 0;\n          break;\n        default:\n          console.error(`Unforeseen where specification in goto: ${where}`);\n          return;\n      }\n    }\n    changeTab(id);\n  }\n\n  if (!job?.tabId) job.tabId = 0;\n  return (\n    <div className={classes.root}>\n      <AppBar elevation={0} position=\"fixed\" style={{/*backgroundColor: \"transparent\",*/ top: 50}}>\n        {/* <Tabs\n          value={job.tabId}\n          onChange={forceTab}\n          indicatorColor=\"primary\"\n          // textColor=\"primary\"\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          aria-label=\"scrollable auto tabs\"\n          className={classes.tabs}\n        > */}\n        <Paper elevation={1} square>\n          <Tabs\n            value={job?.tabId}\n            //indicatorColor=\"secondary\"\n            //textColor=\"secondary\"\n            variant=\"scrollable\"\n            scrollButtons=\"auto\"\n            onChange={forceTab}\n            aria-label=\"current section\"\n            classes={{\n              indicator: classes.tabIndicator\n            }}\n            className={classes.tab}\n          >\n            <StyledTab label={`${t(\"Start\")} 🪄`} {...a11yProps(0)} />\n            <StyledTab label={`${t(\"Download template\")} ▼`} {...a11yProps(1)} />\n            <StyledTab label={`${t(\"Fill your data\")} 🖋`} {...a11yProps(2)} />\n            <StyledTab label={`${t(\"Upload\")} ▲`} {...a11yProps(3)} />\n            <StyledTab label={`${t(\"Produce\")} 🛠️`} {...a11yProps(4)} />\n            <StyledTab label={`${t(\"Download dataset\")} ⤵`} {...a11yProps(5)} />\n            <StyledTab label={`${t(\"Publish\")} 🌍`} {...a11yProps(6)} />\n            <StyledTab label={`${t(\"Wait for validation\")} 🎯`} {...a11yProps(7)} />\n            <StyledTab label={`${t(\"Finish!\")} 🏁`} {...a11yProps(8)} />\n          </Tabs>\n        </Paper>\n      </AppBar>\n\n      <>\n        {(job?.tabId === 0) && (\n          <TabPanel index={0} value={job.tabId}>\n            <Tab01Start goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 1) && (\n          <TabPanel index={1} value={job.tabId}>\n            <Tab02DownloadTemplate goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 2) && (\n          <TabPanel index={2} value={job.tabId}>\n            <Tab03FillData goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 3) && (\n          <TabPanel index={3} value={job.tabId}>\n            <Tab04Upload goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 4) && (\n          <TabPanel index={4} value={job.tabId}>\n            <Tab05Produce goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 5) && (\n          <TabPanel index={5} value={job.tabId}>\n            <Tab06DownloadDataset goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 6) && (\n          <TabPanel index={6} value={job.tabId}>\n            <Tab07Publish goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 7) && (\n          <TabPanel index={7} value={job.tabId}>\n            <Tab08Validation goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n        {(job?.tabId === 8) && (\n          <TabPanel index={8} value={job.tabId}>\n            <Tab09Finished goto={goto} job={job} setJob={job => setJob(job)} />\n          </TabPanel>\n        )}\n      </>\n    </div>\n  );\n}\n\nexport { TabsPanel };","import React from \"react\";\n// import { useContext } from \"react\";\nimport { makeStyles } from \"@mui/styles\";\n// import { useTranslation } from \"react-i18next\";\n// import { AuthContext } from \"../providers/AuthProvider\";\nimport { TabsPanel } from \"./TabsPanel\";\n\nconst useStyles = makeStyles(theme => ({\n\thome: {\n    fontSize: \"1.5em\",\n\t},\n}));\n\nfunction Home() {\n\tconst classes = useStyles();\n  // const { auth } = useContext(AuthContext);\n  // const { t } = useTranslation();\n\n  return (\n    <div className={classes.home}>\n      {/* {(typeof auth.user !== \"undefined\") && // if auth.user is undefined, we don't know yet about user authentication...\n        ${t(\"Home\")} ${t(\"for\")} ${auth.user ? t(\"authenticated user\") : t(\"guest user\")} ${auth.user ? auth.user.email : \"\"}\n      } */}\n      <TabsPanel />\n    </div>\n  );\n}\n\nexport default React.memo(Home);"],"sourceRoot":""}