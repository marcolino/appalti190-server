{"version":3,"sources":["components/auth/SignOut.js"],"names":["SignOut","history","useHistory","isOnline","useContext","OnlineStatusContext","AuthContext","auth","setAuth","t","useTranslation","console","error","useEffect","signOut","success","user","setTimeout","log","replace","err","ETBTAdd","toast","message","React","memo"],"mappings":"2HAAA,uFAYA,SAASA,IACP,IAAMC,EAAUC,cACVC,EAAWC,qBAAWC,KAC5B,EAA0BD,qBAAWE,KAA7BC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,QACNC,EAAMC,cAAND,EA4BR,OA1BFE,QAAQC,MAAM,6BAEZC,qBAAU,WACZF,QAAQC,MAAM,6BACLT,EAMHW,YAAQ,CACNC,QAAS,WAEPP,EAAQ,CAAEQ,KAAM,OAC1BC,YAAW,kBAAMN,QAAQO,IAAI,qBAAsBX,KAAO,KAChDN,EAAQkB,QAAQ,MAElBP,MAAO,SAACQ,GAChBT,QAAQC,MAAM,iBAAkBQ,GAChCC,YAAQ,UAAWD,GACTE,IAAMV,MAAMH,EAAEW,EAAIG,cAbtBf,EAAQ,CAAEQ,KAAM,OAChBf,EAAQkB,QAAQ,QAgBjB,CAAChB,EAAUF,EAASM,EAAMC,EAASC,IAE/B,KAGMe,cAAMC,KAAKzB","file":"static/js/15.64356a57.chunk.js","sourcesContent":["import React from \"react\";\nimport { useEffect, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { signOut } from \"../../libs/TrackPromise\";\nimport { AuthContext } from \"../../providers/AuthProvider\";\nimport { OnlineStatusContext } from \"../../providers/OnlineStatusProvider\";\nimport { toast } from \"../Toast\";\nimport { ETBTAdd } from \"../../libs/I18n\"; // TODO: remove me when finished collecting serve errors\n\n\n\nfunction SignOut() {\n  const history = useHistory();\n  const isOnline = useContext(OnlineStatusContext);\n  const { auth, setAuth } = useContext(AuthContext);\n  const { t } = useTranslation();\n\nconsole.error(\"signOut component entered\");\n  // use `useEffect` to avoid  \"cannot update a component while rendering a different component\" error\n  useEffect(() => {\nconsole.error(\"signOut useEffect entered\");\n    if (!isOnline) { // fake signout while offline...\n      // TODO: we should also at least clear localStorage.CognitoIdentityServiceProvider.* keys ...\n      //return toast.warning(\"You are currently offline. Please wait for the network to become available.\");\n      setAuth({ user: null })\n      history.replace(\"/\");\n    } else {\n      signOut({\n        success: () => {\n          //toast.success(t(\"Signed out\")); // too noisy...\n          setAuth({ user: null })\nsetTimeout(() => console.log(\"signOut ok - auth:\", auth), 100);\n          history.replace(\"/\");\n        },\n        error: (err) => {\nconsole.error(\"signOut error:\", err);\nETBTAdd(\"signOut\", err);\n          toast.error(t(err.message));\n        }\n      });\n    }\n  }, [isOnline, history, auth, setAuth, t]);\n\n  return null;\n};\n\nexport default React.memo(SignOut);\n"],"sourceRoot":""}