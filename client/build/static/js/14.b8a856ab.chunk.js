(this["webpackJsonpappalti190-client"]=this["webpackJsonpappalti190-client"]||[]).push([[14],{309:function(e,t,n){"use strict";var a=n(105),r=n(88),o=n.n(r),c=n(31),s=n(45),i=function(){var e=Object(a.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.a.getUser()){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,c.a.get("/job/get");case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l={get:i,set:function(e){return s.a.getUser()?c.a.put("/job/set",{job:e}):null},upload:function(e){var t=new FormData;return t.append("file",e),c.a.post("/job/upload",t,{headers:{"Content-Type":"multipart/form-data"}})},transformXls2Xml:function(e){return c.a.post("/job/transformXls2Xml/:filePath",{filePath:e})},validateXml:function(e){return c.a.post("/job/validateXml/:transform",{transform:e})},outcomeCheck:function(e,t){return c.a.post("/job/outcomeCheck/:anno/:codiceFiscaleAmministrazione",{anno:e,codiceFiscaleAmministrazione:t})},outcomeFailureDetails:function(e,t){return c.a.post("/job/outcomeFailureDetails/anno/codiceFiscaleAmministrazione",{anno:e,codiceFiscaleAmministrazione:t})},urlExistenceAndMatch:function(e,t){return console.log("*** jobService - url,fileToMatch:",e,t),c.a.post("/job/urlExistenceAndMatch/url/fileToMatch",{url:e,fileToMatch:t})},getPlans:function(){return c.a.get("/job/getPlans")}};t.a=l},310:function(e,t,n){"use strict";var a=n(21),r=n(313),o=n(0),c=n.n(o),s=n(294),i=n(371),l=n(353),d=n(372),u=n(373),b=n(374),j=n(1),f=["title","contentText","actions"],m=function(e){var t=e.title,n=e.contentText,o=e.actions,c=Object(r.a)(e,f);return Object(j.jsxs)(i.a,Object(a.a)(Object(a.a)({},c),{},{onBackdropClick:function(){},"aria-labelledby":t,onClose:function(e,t){},children:[Object(j.jsx)(l.a,{children:t}),Object(j.jsx)(d.a,{children:Object(j.jsx)(u.a,{children:n})}),Object(j.jsx)(b.a,{children:o.map((function(e,t){return Object(j.jsx)(s.a,{onClick:function(){e.callback&&e.callback(),e.closeModal&&c.onClose()},variant:"primary"===e.variant?"contained":"secondary"===e.variant?"outlined":"contained",autoFocus:c,style:{textTransform:"none"},children:e.text},t)}))})]}))};m.defaultProps={title:"",contentText:"",actions:[{text:"Ok",closeModal:!0,callback:function(){},variant:"primary",autoFocus:!1}]},t.a=c.a.memo(m)},320:function(e,t,n){"use strict";n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return O})),n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return v}));var a=n(21),r=n(0),o=n.n(r),c=n(294),s=n(471),i=n(480),l=n(467),d=n(297),u=n(298),b=n(287),j=n(375),f=function(e,t){return"#"+e.replace(/^#/,"").replace(/../g,(function(e){return("0"+Math.min(255,Math.max(0,parseInt(e,16)+t)).toString(16)).substr(-2)}))},m=n(76),p=n(1),h=o.a.memo((function(e){var t=Object(b.a)((function(e){return{startAdornment:{backgroundColor:"#efefff",height:"2.5rem",maxHeight:"3rem",marginLeft:-15,marginRight:5,paddingLeft:10,paddingRight:10,borderRight:"1px solid #c5c5c5"},endAdornment:{backgroundColor:"#efefff",height:"2.5rem",maxHeight:"3rem",marginLeft:5,marginRight:-15,paddingLeft:10,paddingRight:10,borderLeft:"1px solid #c5c5c5"},textField:{backgroundColor:"#efefff"}}}))();return Object(p.jsx)(s.a,{id:e.id,type:e.type,value:e.value,required:e.required,autoFocus:e.autoFocus,autoComplete:e.autoComplete.toString(),variant:e.variant,fullWidth:e.fullWidth,label:e.label,size:e.size,margin:e.margin,className:e.className?e.className:t.textField,placeholder:e.placeholder,onChange:function(t){return e.onChange(t.target.value)},disabled:e.disabled,error:!Object(m.j)(e.error),InputProps:{startAdornment:e.startAdornmentIcon?Object(p.jsx)(j.a,{className:e.startAdornmentClass?e.startAdornmentClass:t.startAdornment,position:"start",children:e.startAdornmentIcon}):Object(p.jsx)(p.Fragment,{}),endAdornment:e.endAdornmentIcon?Object(p.jsx)(j.a,{className:e.endAdornmentClass?e.endAdornmentClass:t.endAdornment,position:"end",children:e.endAdornmentIcon}):Object(p.jsx)(p.Fragment,{}),className:t.input}})}));h.defaultProps={type:"text",required:!1,autoFocus:!1,autoComplete:!1,variant:"outlined",fullWidth:!0,label:"",size:"small",margin:"dense",className:null,placeholder:"",startAdornmentClass:null,endAdornmentClass:null,disabled:!1,error:""};var g=o.a.memo((function(e){var t=Object(b.a)((function(e){return function(e){return{button:{margin:e.spacing(1,0,0,0),textTransform:"none",fontSize:"1.3em",color:"white",backgroundColor:e.palette.success.main,"&:hover":{backgroundColor:f(e.palette.success.main,-25)}},buttonSecondary:{margin:e.spacing(1,0,0,0),textTransform:"none",fontSize:"1em !important",color:"white",backgroundColor:e.palette.secondary.dark+" !important","&:hover":{backgroundColor:f(e.palette.secondary.dark,-25)+" !important"}},buttonFederated:{margin:e.spacing(1,0,0,0),justifyContent:"flex-start",paddingLeft:e.spacing(5),fontSize:"1.3em"},buttonFederatedFacebook:{backgroundColor:e.palette.socialButtons.facebook.backgroundColor,"&:hover":{backgroundColor:f(e.palette.socialButtons.facebook.backgroundColor,-25)}},buttonFederatedGoogle:{backgroundColor:e.palette.socialButtons.google.backgroundColor,"&:hover":{backgroundColor:f(e.palette.socialButtons.google.backgroundColor,-25)}}}}(e)}))();return Object(p.jsx)(c.a,{fullWidth:e.fullWidth,variant:e.variant,color:e.color,size:e.size,className:"".concat(t.button," ").concat(e.social?t.buttonFederated:""," ").concat(e.social?t["buttonFederated"+Object(m.a)(e.social)]:""," ").concat(t[e.className]),startIcon:e.startIcon,onClick:e.onClick,disabled:e.disabled,children:e.children})}));g.defaultProps={fullWidth:!0,variant:"contained",color:"primary",social:null},o.a.memo((function(e){var t=Object(b.a)((function(e){return{disabled:{color:"grey",cursor:"default","&:hover":{textDecoration:"none"}}}}))(),n=e.disabled?t.disabled:"";return Object(p.jsx)(i.a,{control:Object(p.jsx)(l.a,{checked:e.checked,onChange:function(t){return e.onChange(t.target.checked)},className:"".concat(e.className," ").concat(n),color:e.color,size:e.size,disabled:e.disabled}),label:Object(p.jsx)(O,{className:"".concat(e.className," ").concat(n),children:e.children})})})).defaultProps={checked:!1,color:"primary",size:"small"};var O=o.a.memo((function(e){return Object(p.jsx)(u.a,Object(a.a)(Object(a.a)({component:e.component,variant:e.variant,color:e.color,align:e.align},e),{},{children:e.children}))}));O.defaultProps={component:"h1",variant:"body2",color:"textPrimary"};var x=o.a.memo((function(e){var t=Object(b.a)((function(t){return{normal:{cursor:"pointer",textDecoration:e.decoration?e.decoration:"none"},disabled:{color:"grey",cursor:"default","&:hover":{textDecoration:"none",color:"grey"}}}}))(),n=e.disabled?t.disabled:t.normal;return Object(p.jsx)(d.a,Object(a.a)(Object(a.a)({href:e.href,className:"".concat(e.className," ").concat(n),color:e.color},e),{},{children:e.children}))}));x.defaultProps={color:"textPrimary"};var v=o.a.memo((function(e){var t=Object(b.a)((function(t){return function(t){return{container:{display:"flex",alignItems:"center",marginTop:t.spacing(e.marginVertical),marginBottom:t.spacing(e.marginVertical)},divider:{width:"100%",borderBottom:"1px solid "+(e.color?e.color:t.palette.primary.dark),paddingLeft:t.spacing(1)},text:{paddingLeft:t.spacing(e.paddingHorizontal),paddingRight:t.spacing(e.paddingHorizontal)}}}(t)}))();return Object(p.jsxs)("div",{className:t.container,children:[Object(p.jsx)("div",{className:t.divider}),e.children&&Object(p.jsx)("span",{className:t.text,children:e.children}),Object(p.jsx)("div",{className:t.divider})]})}));v.defaultProps={marginVertical:1,paddingHorizontal:1}},327:function(e,t,n){"use strict";var a=n(31),r={getProfile:function(){return a.a.get("/user/getProfile").then((function(e){return e.data}),(function(e){return e}))},updateProfile:function(e){var t=e.email,n=e.password,r=e.firstName,o=e.lastName,c=e.address,s=e.fiscalCode,i=e.businessName;return a.a.post("/user/updateProfile",{email:t,password:n,firstName:r,lastName:o,address:c,fiscalCode:s,businessName:i}).then((function(e){return e.data}),(function(e){return e}))},updateUserProperty:function(e){var t=e.userId,n=e.propertyName,r=e.propertyValue;return a.a.post("/user/updateUserProperty",{userId:t,propertyName:n,propertyValue:r}).then((function(e){return e.data}),(function(e){return e}))},getPlans:function(e){return a.a.get("/user/getPlans").then((function(e){return e.data}),(function(e){return e}))},updatePlan:function(e){return console.log("updatePlan - plan:",e),a.a.post("/user/updatePlan",e).then((function(e){return e.data}),(function(e){return e}))},getRoles:function(e){return a.a.get("/user/getRoles").then((function(e){return e.data}),(function(e){return e}))},updateRoles:function(e){return a.a.post("/user/updateRoles",e).then((function(e){return e.data}),(function(e){return e}))},getPublicContent:function(){return a.a.get("/test/all")},getUserBoard:function(){return a.a.get("/test/user")},getModeratorBoard:function(){return a.a.get("/test/mod")},getAdminBoard:function(){return a.a.get("/test/admin")},getAdminPanel:function(){return a.a.get("/admin/getAdminPanel").then((function(e){return e.data}),(function(e){return e}))}};t.a=r},464:function(e,t,n){"use strict";n.r(t);var a=n(14),r=n(21),o=n(313),c=n(0),s=n.n(c),i=n(18),l=n(296),d=n(339),u=n(287),b=n(299),j=n(463),f=n(474),m=n(298),p=n(475),h=n(470),g=n(465),O=n(289),x=n(420),v=n(292),C=n(302),y=n(368),S=n(401),N=n.n(S),k=n(326),P=n.n(k),A=n(337),F=n.n(A),I=n(402),w=n.n(I),R=n(403),E=n.n(R),z=n(404),T=n.n(z),U=n(405),M=n.n(U),L=n(406),W=n.n(L),B=n(407),D=n.n(B),H=n(408),V=n.n(H),G=n(409),X=n.n(G),Y=n(108),_=n(369),q=n(370),Z=n(421),J=n(294),K=n(297),Q=n(400),$=n(310),ee=n(40),te=n(77),ne=n.p+"static/media/SelectedPlan-en.85b85fc0.png",ae=n.p+"static/media/SelectedPlan-it.a09948bf.png",re=n.p+"static/media/SelectedPlan-fr.749a5b1e.png",oe=n(309),ce=n(57),se=n(76),ie=n(1),le=Object(u.a)((function(e){return{section:{},cardHeader:{paddingTop:e.spacing(3)},cardHeaderActive:{},cardHeaderTest:{paddingBottom:0},cardTest:{color:"#bb571f",backgroundColor:"#ffde92",borderRadius:5,fontSize:14,fontWeight:"bold",padding:2,paddingLeft:7,paddingRight:7},card:{transition:"box-shadow .3s",borderRadius:10,border:"1px solid #ccc","&:hover":{boxShadow:"10px 10px 30px rgba(32, 32, 132, .5)"}},cardActive:{backgroundColor:"#e0e8ff"},cardActiveImage:{position:"absolute",marginLeft:50,marginTop:-20,maxWidth:80,transform:"rotate(15deg)",opacity:.6,zIndex:999},cardHr:{border:"1px solid #eee"}}})),de=function(e){var t,n;console.log("Pricing - props:",e);var r=le(),o=Object(l.a)().t,i=Object(Y.b)().showModal,d=s.a.useState(!1),u=Object(a.a)(d,2),b=u[0],j=u[1],f=Object(c.useState)([]),p=Object(a.a)(f,2),h=p[0],g=p[1];Object(c.useEffect)((function(){oe.a.getPlans().then((function(e){g(e.data)}),(function(e){te.b.error(Object(se.g)(e))}))}),[g]);var O=function(t){return e.currentPlan.name===t.name},x=Object(c.useState)(Object(ce.a)(ee.a)),S=Object(a.a)(x,1)[0],N=null;switch(S){case"en":default:N=ne;break;case"it":N=ae;break;case"fr":N=re}return Object(ie.jsx)("section",{className:r.section,children:Object(ie.jsx)(C.a,{children:Object(ie.jsxs)(y.a,{py:0,textAlign:"center",children:[Object(ie.jsx)(y.a,{mb:0,children:Object(ie.jsxs)(C.a,{maxWidth:"lg",children:[Object(ie.jsx)(m.a,{variant:"h3",component:"h2",gutterBottom:!0,children:Object(ie.jsx)(m.a,{variant:"h6",component:"span",color:"primary",children:o("Choose the plan which best suits your needs")})}),"undefined"!==typeof(null===(t=h[0])||void 0===t?void 0:t.pricePerMonth)&&"undefined"!==typeof(null===(n=h[0])||void 0===n?void 0:n.pricePerYear)&&Object(ie.jsxs)("div",{children:[Object(ie.jsx)(m.a,{variant:"subtitle1",component:"span",children:o("per year")}),Object(ie.jsxs)("span",{children:["\xa0",Object(ie.jsx)(Q.a,{name:"checkbox",color:"primary",checked:b,onChange:function(e){j(e.target.checked)}}),"\xa0"]}),Object(ie.jsx)(m.a,{variant:"subtitle1",component:"span",children:o("per month")})]})]})}),Object(ie.jsx)(v.a,{container:!0,spacing:3,children:h.map((function(t,n){return console.log("P:",t),Object(ie.jsxs)(v.a,{item:!0,xs:12,md:parseInt(h.length?12/h.length:12),children:[O(t)&&Object(ie.jsx)("img",{className:r.cardActiveImage,src:N,alt:o("Selected plan stamp")}),Object(ie.jsxs)(_.a,{variant:"outlined",className:[r.card,O(t)?r.cardActive:null].join(" "),children:[Object(ie.jsx)(Z.a,{title:Object(se.a)(o(t.name)),className:[r.cardHeader,O(t)?r.cardHeaderActive:null].join(" "),titleTypographyProps:(O(t),{})}),"live"!==e.paymentMode?Object(ie.jsx)("span",{className:r.cardTest,children:" TEST "}):Object(ie.jsx)(ie.Fragment,{}),Object(ie.jsx)("hr",{className:r.cardHr}),Object(ie.jsxs)(q.a,{children:[Object(ie.jsxs)(y.a,{px:1,children:[Object(ie.jsxs)(m.a,{variant:"h4",component:"h2",gutterBottom:!0,style:{fontWeight:"bold"},children:[Object(se.b)(t.priceCurrency),b?t.pricePerMonth:t.pricePerYear,Object(ie.jsxs)(m.a,{variant:"h6",color:"textSecondary",component:"span",children:[" / ",o(b?"month":"year")]})]}),Object(ie.jsx)(m.a,{color:"textSecondary",variant:"subtitle1",component:"p",children:t.cigNumberAllowed===Number.MAX_SAFE_INTEGER?o("Unlimited CIG's"):o("Up to {{cigs}} CIG's",{cigs:t.cigNumberAllowed})}),Object(ie.jsx)(m.a,{color:"textSecondary",variant:"subtitle1",component:"div",children:t.supportTypes.map((function(e,t){return Object(ie.jsx)("div",{children:o("Support")+" "+o("by")+" "+o(e)},t)}))}),Object(ie.jsx)("br",{})]}),Object(ie.jsx)(J.a,{variant:"contained",color:"secondary",onClick:function(n){!function(e){i($.a,e)}({title:o("Sure to buy this plan?"),contentText:o("It allows processing of ")+(t.cigNumberAllowed===Number.MAX_SAFE_INTEGER?o("unlimited CIG's"):o("up to {{cigs}} CIG's",{cigs:t.cigNumberAllowed})),actions:[{callback:function(){console.log("Clicked first action button"),e.onPlanSelected(n,t)},text:o("Ok"),closeModal:!0},{callback:function(){console.log("Clicked second action button")},text:o("Cancel"),closeModal:!0}]})},disabled:O(t),children:O(t)?o("Active plan"):o("Select plan")}),e.canForcePlan&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(y.a,{mt:1}),Object(ie.jsx)(J.a,{variant:"contained",color:"tertiary",onClick:function(n){e.onPlanForced(n,t.name)},disabled:O(t),children:o("Force plan")})]}),Object(ie.jsx)(y.a,{mt:2,children:Object(ie.jsx)(K.a,{href:"#",color:"primary",children:Object(ie.jsx)("small",{children:o("Learn more")})})})]})]})]},n)}))})]})})})};de.defaultProps={currentPlan:{},onPlanSelected:function(e){return console.log("Selected plan:",e)},canForcePlan:!1,onPlanForced:function(e){return console.log("Forced plan:",e)}};var ue=s.a.memo(de),be=n(327),je=n(45),fe=n(105),me=n(88),pe=n.n(me),he=n(31),ge=function(){var e=Object(fe.a)(pe.a.mark((function e(){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.a.get("/payment/mode").then((function(e){return e.data}),(function(e){return e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(fe.a)(pe.a.mark((function e(t){var n;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.product,e.next=3,he.a.post("/payment/create-checkout-session",{product:n}).then((function(e){return console.log("CCS - res:",e),e.data}),(function(e){return console.log("CCS - err:",e),e}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe={mode:ge,createCheckoutSession:Oe},ve=n(47),Ce=n(320),ye=n(20),Se=n.n(ye),Ne=["children","value","index"],ke=Object(u.a)((function(e){return function(e){return{root:{flexGrow:1},avatar:{backgroundColor:e.palette.success.main},columnLeft:{marginLeft:e.spacing(.2)},columnRight:{marginLeft:"auto",marginRight:e.spacing(.2)},form:{},fieldset:{border:0},fieldsetPersonalData:{color:"#758c75",fontSize:13,border:1,borderStyle:"solid",borderColor:"#758c75",borderRadius:5},fieldsetCompanyData:{color:"#7a7aa5",fontSize:13,border:1,borderStyle:"solid",borderColor:"#7a7aa5",borderRadius:5},fieldsetAddress:{color:"#aaa",fontSize:13,border:1,borderStyle:"solid",borderColor:"#aaa",borderRadius:5},formControlSelectPlan:{minWidth:200},formControlSelectRole:{minWidth:200},tab:{backgroundColor:e.palette.secondary.light},tabIndicator:{backgroundColor:e.palette.secondary.dark,height:1}}}(e)}));function Pe(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function Ae(e){var t=e.children,n=e.value,a=e.index,c=Object(o.a)(e,Ne);return Object(ie.jsx)(m.a,Object(r.a)(Object(r.a)({component:"div",role:"tabpanel",hidden:n!==a,id:"scrollable-auto-tabpanel-".concat(a),"aria-labelledby":"nav-tab-".concat(a)},c),{},{children:Object(ie.jsx)(y.a,{p:3,children:t})}))}function Fe(e){var t,n,o,u,m=ke(),S=Object(i.f)(),k=Object(c.useState)(je.a.getUser()),A=Object(a.a)(k,2),I=A[0],R=A[1],z=Object(c.useState)(!1),U=Object(a.a)(z,2),L=U[0],B=U[1],H=Object(c.useState)(""),G=Object(a.a)(H,2),Y=G[0],_=G[1],q=Object(c.useState)(""),Z=Object(a.a)(q,2),J=Z[0],K=Z[1],Q=Object(c.useState)(""),$=Object(a.a)(Q,2),ee=$[0],ne=$[1],ae=Object(c.useState)(""),re=Object(a.a)(ae,2),ce=re[0],le=re[1],de=Object(c.useState)(""),fe=Object(a.a)(de,2),me=fe[0],pe=fe[1],he=Object(c.useState)({}),ge=Object(a.a)(he,2),Oe=ge[0],ye=ge[1],Ne=Object(c.useState)(""),Fe=Object(a.a)(Ne,2),Ie=Fe[0],we=Fe[1],Re=Object(c.useState)(""),Ee=Object(a.a)(Re,2),ze=Ee[0],Te=Ee[1],Ue=Object(c.useState)(""),Me=Object(a.a)(Ue,2),Le=Me[0],We=Me[1],Be=Object(c.useState)(""),De=Object(a.a)(Be,2),He=De[0],Ve=De[1],Ge=Object(c.useState)(""),Xe=Object(a.a)(Ge,2),Ye=Xe[0],_e=Xe[1],qe=Object(c.useState)(""),Ze=Object(a.a)(qe,2),Je=Ze[0],Ke=Ze[1],Qe=Object(c.useState)(""),$e=Object(a.a)(Qe,2),et=$e[0],tt=$e[1],nt=Object(c.useState)({}),at=Object(a.a)(nt,2),rt=at[0],ot=at[1],ct=Object(c.useState)([]),st=Object(a.a)(ct,2),it=st[0],lt=st[1],dt=Object(c.useState)([]),ut=Object(a.a)(dt,2),bt=ut[0],jt=ut[1],ft=Object(c.useState)([]),mt=Object(a.a)(ft,2),pt=mt[0],ht=mt[1],gt=Object(c.useState)({}),Ot=Object(a.a)(gt,2),xt=Ot[0],vt=Ot[1],Ct=Object(l.a)().t,yt=s.a.useState(null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&null!==(n=t.state)&&void 0!==n&&n.tabValue?null===e||void 0===e||null===(o=e.location)||void 0===o||null===(u=o.state)||void 0===u?void 0:u.tabValue:0),St=Object(a.a)(yt,2),Nt=St[0],kt=St[1],Pt=s.a.useState(!1),At=Object(a.a)(Pt,2),Ft=At[0],It=At[1],wt=s.a.useState(!1),Rt=Object(a.a)(wt,2),Et=Rt[0],zt=Rt[1],Tt=s.a.useState(!1),Ut=Object(a.a)(Tt,2),Mt=Ut[0],Lt=Ut[1];Object(d.a)((function(e){(Ft||Et||Mt)&&e.preventDefault()})),Object(c.useEffect)((function(){console.log("useeffect block");var e=S.block((function(e,t){return!(Ft||Et||Mt)||window.confirm(Ct("Are you sure to ignore unsaved data?"))}));return function(){e()}}),[Ft,Et,Mt,S,Ct]),Object(c.useEffect)((function(){var e,t,n,a,r,o,c,s,i,l,d,u,b,j,f,m,p,h;(console.log("useeffect profile:",L),L)&&(_(null!==(e=L.email)&&void 0!==e?e:""),K(null!==(t=L.firstName)&&void 0!==t?t:""),ne(null!==(n=L.lastName)&&void 0!==n?n:""),le(null!==(a=L.fiscalCode)&&void 0!==a?a:""),pe(null!==(r=L.businessName)&&void 0!==r?r:""),we(null!==(o=null===(c=L.address)||void 0===c?void 0:c.street)&&void 0!==o?o:""),Te(null!==(s=null===(i=L.address)||void 0===i?void 0:i.streetNo)&&void 0!==s?s:""),We(null!==(l=null===(d=L.address)||void 0===d?void 0:d.city)&&void 0!==l?l:""),Ve(null!==(u=null===(b=L.address)||void 0===b?void 0:b.province)&&void 0!==u?u:""),_e(null!==(j=null===(f=L.address)||void 0===f?void 0:f.zip)&&void 0!==j?j:""),Ke(null!==(m=null===(p=L.address)||void 0===p?void 0:p.country)&&void 0!==m?m:""),ot(null!==(h=L.plan)&&void 0!==h?h:{name:"free"}),jt(L.roles?L.roles.map((function(e){return e.name})):[]),It(!1),zt(!1),Lt(!1))}),[L]),Object(c.useEffect)((function(){console.log("useeffect user.id"),null!==I&&void 0!==I&&I.id||(te.b.error(Ct("User must be authenticated")),S.goBack())}),[null===I||void 0===I?void 0:I.id,S,Ct]),Object(c.useEffect)((function(){console.log("useeffect getProfile"),be.a.getProfile().then((function(e){if(e instanceof Error)return console.error("getProfile error:",e),vt({code:e.message});B(e.user)})),oe.a.getPlans().then((function(e){if(e instanceof Error)return console.error("getPlans error:",e),vt({code:e.message});console.log("plans got successfully:",e),lt(e.data)})),be.a.getRoles().then((function(e){if(e instanceof Error)return console.error("getRoles error:",e),vt({code:e.message});console.log("roles got successfully:",e),ht(e.map((function(e){return e.name})))})),xe.mode().then((function(e){if(e instanceof Error)return console.error("mode error:",e),vt({code:e.message});console.log("mode:",e),tt(e.mode)}))}),[null===I||void 0===I?void 0:I.id]),Object(c.useEffect)((function(){ye({street:Ie,streetNo:ze,city:Le,province:He,zip:Ye,country:Je})}),[Ie,ze,Le,He,Ye,Je]);var Wt=function(){var e;return null===I||void 0===I||null===(e=I.roles)||void 0===e?void 0:e.includes("admin")},Bt=function(){var e;return null===I||void 0===I||null===(e=I.roles)||void 0===e?void 0:e.includes("admin")};return Object(ie.jsxs)("div",{className:m.root,children:[Object(ie.jsxs)(C.a,{maxWidth:"sm",children:[Object(ie.jsx)(y.a,{m:1}),Object(ie.jsx)(v.a,{container:!0,justifyContent:"center",children:Object(ie.jsx)(x.a,{className:m.avatar,children:Object(ie.jsx)(N.a,{})})}),Object(ie.jsx)(y.a,{m:3}),Object(ie.jsx)(b.a,{position:"static",children:Object(ie.jsxs)(j.a,{value:Nt,onChange:function(e,t){kt(t)},variant:"standard","aria-label":"tabs for user's personal profile",classes:{indicator:m.tabIndicator},className:m.tab,children:[Object(ie.jsx)(f.a,Object(r.a)({label:Ct("Your profile")},Pe(0))),Object(ie.jsx)(f.a,Object(r.a)({label:Ct("Your plan")},Pe(1))),Object(ie.jsx)(f.a,Object(r.a)({label:Ct("Your role(s)")},Pe(2)))]})})]}),Object(ie.jsxs)(C.a,{maxWidth:1===Nt?"md":"sm",children:[0===Nt&&Object(ie.jsx)(Ae,{value:Nt,index:0,children:Object(ie.jsx)("form",{name:"form",className:m.form,noValidate:!0,autoComplete:"off",children:Object(ie.jsxs)("fieldset",{className:m.fieldset,children:[Object(ie.jsx)(y.a,{m:3}),Object(ie.jsxs)("fieldset",{className:m.fieldsetPersonalData,children:[Object(ie.jsx)("legend",{children:Ct("Personal data")}),Object(ie.jsx)(v.a,{item:!0,xs:12,children:Object(ie.jsx)(Ce.c,{id:"email",value:Y,onChange:function(e){It(!0),_(e)},placeholder:Ct("Email"),startAdornmentIcon:Object(ie.jsx)(F.a,{}),error:xt.email,autoFocus:!0})}),Object(ie.jsxs)(v.a,{container:!0,direction:"row",columnSpacing:{xs:1,sm:2,md:3,lg:4},rowSpacing:0,children:[Object(ie.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(ie.jsx)(Ce.c,{id:"firstName",value:J,onChange:function(e){It(!0),K(e)},placeholder:Ct("First Name"),startAdornmentIcon:Object(ie.jsx)(P.a,{}),error:xt.firstName})}),Object(ie.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(ie.jsx)(Ce.c,{id:"lastName",value:ee,onChange:function(e){It(!0),ne(e)},placeholder:Ct("Last Name"),startAdornmentIcon:Object(ie.jsx)(P.a,{}),error:xt.lastName})})]})]}),Object(ie.jsx)(y.a,{m:1}),Object(ie.jsxs)("fieldset",{className:m.fieldsetCompanyData,children:[Object(ie.jsx)("legend",{children:Ct("Company data")}),Object(ie.jsxs)(v.a,{container:!0,direction:"row",columnSpacing:{xs:1,sm:2,md:3,lg:4},rowSpacing:0,children:[Object(ie.jsx)(v.a,{item:!0,xs:12,children:Object(ie.jsx)(Ce.c,{id:"fiscalCode",value:ce,onChange:function(e){It(!0),le(e)},placeholder:Ct("Company fiscal code"),startAdornmentIcon:Object(ie.jsx)(w.a,{}),error:xt.fiscalCode})}),Object(ie.jsx)(v.a,{item:!0,xs:12,children:Object(ie.jsx)(Ce.c,{id:"businessName",value:me,onChange:function(e){It(!0),pe(e)},placeholder:Ct("Company business name"),startAdornmentIcon:Object(ie.jsx)(E.a,{}),error:xt.businessName})})]}),Object(ie.jsx)(y.a,{m:1}),Object(ie.jsxs)("fieldset",{className:m.fieldsetAddress,children:[Object(ie.jsx)("legend",{children:Ct("Address")}),Object(ie.jsxs)(v.a,{container:!0,direction:"row",columnSpacing:{xs:1,sm:2,md:3,lg:4},rowSpacing:0,children:[Object(ie.jsx)(v.a,{item:!0,xs:12,sm:8,children:Object(ie.jsx)(Ce.c,{id:"addressStreet",value:Ie,onChange:function(e){It(!0),we(e)},placeholder:Ct("Street"),startAdornmentIcon:Object(ie.jsx)(T.a,{}),error:xt.addressStreet})}),Object(ie.jsx)(v.a,{item:!0,xs:12,sm:4,children:Object(ie.jsx)(Ce.c,{id:"addressStreetNo",value:ze,onChange:function(e){It(!0),Te(e)},placeholder:Ct("N\xb0"),startAdornmentIcon:Object(ie.jsx)(M.a,{}),error:xt.addressStreetNo})}),Object(ie.jsx)(v.a,{item:!0,xs:12,children:Object(ie.jsx)(Ce.c,{id:"addressCity",value:Le,onChange:function(e){It(!0),We(e)},placeholder:Ct("City"),startAdornmentIcon:Object(ie.jsx)(W.a,{}),error:xt.addressCity})}),Object(ie.jsx)(v.a,{item:!0,xs:12,sm:7,children:Object(ie.jsx)(Ce.c,{id:"addressProvince",value:He,onChange:function(e){It(!0),Ve(e)},placeholder:Ct("Province"),startAdornmentIcon:Object(ie.jsx)(D.a,{}),error:xt.addressProvince})}),Object(ie.jsx)(v.a,{item:!0,xs:12,sm:5,children:Object(ie.jsx)(Ce.c,{id:"addressZip",value:Ye,onChange:function(e){It(!0),_e(e)},placeholder:Ct("ZIP"),startAdornmentIcon:Object(ie.jsx)(V.a,{}),error:xt.addressZip})}),Object(ie.jsx)(v.a,{item:!0,xs:12,children:Object(ie.jsx)(Ce.c,{id:"addressCountry",value:Je,onChange:function(e){It(!0),Ke(e)},placeholder:Ct("Country"),startAdornmentIcon:Object(ie.jsx)(X.a,{}),error:xt.addressCountry})})]})]})]})]})})}),1===Nt&&Object(ie.jsx)(Ae,{value:Nt,index:1,children:Object(ie.jsx)("form",{className:m.form,noValidate:!0,autoComplete:"off",children:Object(ie.jsx)("fieldset",{className:m.fieldset,children:Object(ie.jsx)(ue,{currentPlan:rt,onPlanSelected:function(e,t){var n;n=t,xe.createCheckoutSession({product:n.name}).then((function(e){var t;if(console.log("createCheckoutSession got successfully:",e),null===e||void 0===e||null===(t=e.session)||void 0===t||!t.url)return te.b.error(Ct("Sorry, could not get the payment page"));window.location=e.session.url}),(function(e){console.error("createCheckoutSession error:",e),te.b.error(Object(se.g)(e))}))},canForcePlan:Bt(),onPlanForced:function(e,t){if(Bt()){var n=it.find((function(e){return e.name===t}));I.plan=n,R(I),je.a.setUser(I),be.a.updatePlan({plan:n.name}).then((function(e){if(e instanceof Error)return console.error("profileUpdate error:",e),te.b.error(Object(se.g)(e)),vt({code:e.message});ot(rt),Lt(!1),ve.a.dispatch("plan-change"),te.b.success(Ct("Plan forced successfully"))}))}},paymentMode:et})})})}),2===Nt&&Object(ie.jsx)(Ae,{value:Nt,index:2,children:Object(ie.jsx)("form",{className:m.form,noValidate:!0,autoComplete:"off",children:Object(ie.jsxs)("fieldset",{className:m.fieldset,children:[Object(ie.jsx)(y.a,{m:3}),Object(ie.jsx)(v.a,{item:!0,xs:12,children:Object(ie.jsxs)(p.a,{variant:"outlined",className:m.formControlSelectRole,children:[Object(ie.jsx)(h.a,{id:"roles-label",children:Ct("Role(s)")}),Object(ie.jsx)(g.a,{labelId:"roles-label",id:"roles",multiple:!0,value:bt,onChange:function(e){zt(!0),jt(e.target.value)},label:Ct("Role(s)"),disabled:!Wt(),children:pt.map((function(e,t){return Object(ie.jsx)(O.a,{value:e,children:e},t)}))})]})})]})})})]}),0===Nt&&Object(ie.jsx)(v.a,{container:!0,justifyContent:"center",children:Object(ie.jsx)(Ce.a,{fullWidth:!1,className:"buttonSecondary",autoFocus:!0,onClick:function(e){e.preventDefault(),vt({}),be.a.updateProfile({email:Y,firstName:J,lastName:ee,fiscalCode:ce,businessName:me,address:Oe,roles:bt}).then((function(e){if(e instanceof Error)return console.error("profileUpdate error:",e),te.b.warn(Object(se.g)(e)),vt({code:e.message});It(!1),te.b.success(Ct("Profile updated successfully"))}))},children:Ct("Update")})}),2===Nt&&Wt()&&Object(ie.jsx)(v.a,{container:!0,justifyContent:"center",children:Object(ie.jsx)(Ce.a,{fullWidth:!1,className:"buttonSecondary",autoFocus:!0,onClick:function(e){I.roles=String(bt).split(","),console.log("USER.ROLES:",I.roles,typeof I.roles),I.roles&&I.roles.length&&!I.roles.every((function(e){return""===e}))||(I.roles=Se.a.api.rolesNamesDefault,jt(I.roles),console.log("USER.ROLES DEFAULTS TO:",I.roles,typeof I.roles)),console.log("*** USER:",I),R(I),je.a.setUser(I),be.a.updateRoles({roles:I.roles}).then((function(e){if(e instanceof Error)return console.error("profileUpdate error:",e),te.b.error(Object(se.g)(e)),vt({code:e.message});jt(I.roles),zt(!1),ve.a.dispatch("roles-change"),te.b.success(Ct("Roles updated successfully"))}))},children:Ct("Update")})}),Object(ie.jsx)(y.a,{m:1})]})}Fe.defaultProps={tabValue:0};t.default=s.a.memo(Fe)}}]);
//# sourceMappingURL=14.b8a856ab.chunk.js.map