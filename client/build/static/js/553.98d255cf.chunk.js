"use strict";(self.webpackChunkquiccasa_client=self.webpackChunkquiccasa_client||[]).push([[553],{3553:function(n,e,r){r.r(e);var t=r(390),o=r(971),c=r(3721),u=r(6715),i=r(6733),s=r(2333),f=r(4100),a=r(1661);function l(){var n=(0,o.k6)(),e=(0,t.useContext)(s.F),r=(0,t.useContext)(i.V),l=r.auth,h=r.setAuth,g=(0,c.$)().t;return(0,t.useEffect)((function(){e?(0,u.w7)({success:function(){h({user:!1}),n.replace("/")},error:function(n){console.error("signOut error:",n),(0,a.ci)("signOut",n),f.A.error(g(n.message))}}):(h({user:!1}),n.replace("/"))}),[e,n,l,h,g]),null}e.default=t.memo(l)},6715:function(n,e,r){r.d(e,{_f:function(){return d},t$:function(){return h},gF:function(){return p},vG:function(){return v},kk:function(){return y},Rv:function(){return m},zB:function(){return l},w7:function(){return E},y1:function(){return g}});var t=r(6515),o=r(6444),c=r(2600),u=r.n(c),i=r(3137),s={signIn:function(n){return console.log((0,i.lf)(),n),f("/api/auth/login","POST",n)},signUp:function(n){return console.log((0,i.lf)(),n),f("/api/auth/register","POST",n)},confirmSignUp:function(n){return console.log((0,i.lf)(),n),f("/api/auth/verify/".concat(n.code),"GET",n)},currentAuthenticatedUser:function(n){return console.log((0,i.lf)(),n),new Promise((function(n,e){var r=JSON.parse(localStorage.getItem("auth"));console.log((0,i.lf)(),"auth:",r),r?(console.log((0,i.lf)(),"resolving auth.user:",r.user),n(r.user)):(console.log((0,i.lf)(),"rejecting"),e())}))},signOut:function(n){return console.log((0,i.lf)()),new Promise((function(n,e){n()}))}},f=function(n,e,r){return console.log("fetcher:",n,e,r),new Promise((function(o,c){"GET"===e&&r&&(n+="?"+Object.keys(r).map((function(n){return encodeURIComponent(n)+"="+encodeURIComponent(r[n])})).join("&")),console.log("fetcher url 2:",n);var i=(0,t.Z)((0,t.Z)({method:e,headers:new Headers(u().api.headers)},r&&"GET"!==e&&{body:JSON.stringify(r)}),{},{redirect:u().api.redirect});console.log("fetcher opt:",i),fetch(n,(0,t.Z)((0,t.Z)({method:e,headers:new Headers(u().api.headers)},r&&"GET"!==e&&{body:JSON.stringify(r)}),{},{redirect:u().api.redirect})).then((function(n){console.log("fetcher res:",n);try{n.json().then((function(e){console.log("fetcher data:",e),n.ok||c({status:n.status,statusText:n.statusText,message:e.message?e.message:n.statusText}),o(e)}))}catch(e){console.error("fetch error:",e)}})).catch((function(n){return c(n)}))}))},a=s;function l(n,e){var r=e.success,c=e.error,u=e.final;(0,o.JE)(a.signIn((0,t.Z)({},n)).then((function(n){console.log("success:",n),r(n)})).catch((function(n){console.log("error:",n),c(n)})).finally((function(n){return u(n)})))}function h(n,e){var r=e.success,c=e.error,u=e.final;(0,o.JE)(a.federatedSignIn((0,t.Z)({},n)).then((function(n){return r(n)})).catch((function(n){return c(n)})).finally((function(n){return u(n)})))}function g(n,e){var r=e.success,c=e.error,u=e.final;(0,o.JE)(a.signUp((0,t.Z)({},n)).then((function(n){return r(n)})).catch((function(n){return c(n)})).finally((function(n){return u(n)})))}function d(n,e){var r=e.success,c=e.error,u=e.final;console.log("TrackPromise - props:",n),(0,o.JE)(a.confirmSignUp((0,t.Z)({},n)).then((function(n){return r(n)})).catch((function(n){return c(n)})).finally((function(n){return u(n)})))}function p(n,e){var r=e.success,t=e.error,c=e.final;(0,o.JE)(a.forgotPassword(n).then((function(n){return r(n)})).catch((function(n){return t(n)})).finally((function(n){return c(n)})))}function m(n,e){var r=e.success,t=e.error,c=e.final;(0,o.JE)(a.resendSignUp(n).then((function(n){return r(n)})).catch((function(n){return t(n)})).finally((function(n){return c(n)})))}function v(n,e,r,t){var c=t.success,u=t.error,i=t.final;(0,o.JE)(a.forgotPasswordSubmit(n,e,r).then((function(n){return c(n)})).catch((function(n){return u(n)})).finally((function(n){return i(n)})))}function y(n,e){var r=e.success,t=e.error,c=e.final;(0,o.JE)(a.resendSignUp(n).then((function(n){return r(n)})).catch((function(n){return t(n)})).finally((function(n){return c(n)})))}function E(n){var e=n.success,r=n.error,t=n.final;(0,o.JE)(a.signOut().then((function(n){return e(n)})).catch((function(n){return r(n)})).finally((function(n){return t(n)})))}}}]);
//# sourceMappingURL=553.98d255cf.chunk.js.map