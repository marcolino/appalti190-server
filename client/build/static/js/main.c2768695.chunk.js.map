{"version":3,"sources":["libs/I18n.js","providers/OnlineStatusProvider.js","config.js","libs/Auth.js","libs/TrackPromise.js","libs/Misc.js","assets/icons/LogoMain.png","assets/icons/Network.on.svg","assets/icons/Network.off.svg","components/IconCustom.js","components/IconGravatar.js","components/ImageCustom.js","components/Header.js","components/Authentication.js","components/Spinner.js","components/auth/Profile.js","components/Routes.js","components/Footer.js","components/CookieBanner.js","libs/Firebase.js","components/PushNotifications.js","components/FloatingActionButton.js","themes/default.js","components/App.js","serviceWorkerRegistration.js","index.js","reportWebVitals.js","providers/AuthProvider.js","hooks/usePersistedState.js","components/Toast.js","providers/StatusProvider.js","i18n.js"],"names":["getCurrentLanguage","i18n","browserLanguages","languages","supportedLanguages","Object","keys","resources","commonLanguages","filter","language","includes","map","browserLanguage","split","pop","config","fallback","ETBTAdd","caller","err","ETBT","action","toString","message","JSON","stringify","id","value","open","window","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","shimIndexedDB","onupgradeneeded","result","createObjectStore","keyPath","createIndex","onsuccess","db","tx","transaction","store","objectStore","index","put","random","getAll","resultUniq","Set","this","item","console","log","oncomplete","close","Math","substring","OnlineStatusContext","createContext","OnlineStatusProvider","props","useState","onlineStatus","setOnlineStatus","useEffect","addEventListener","removeEventListener","Provider","children","module","exports","companyName","companyHomeSiteName","companyHomeSiteUrl","companyOwner","companyOwnerFiscalCode","companyOwnerStreetAddress","companyOwnerCity","companyOwnerProvince","companyOwnerZipCode","companyOwnerPhone","companyOwnerEmail","appName","appTitle","appSiteUrl","appTermsValidityStartDate","startUrl","display","spinner","delay","type","color","size","opacity","supported","icon","footerHeight","extraSmallWatershed","mobileDesktopWatershed","federatedSigninProviders","oauth","domain","scope","responseType","oauthRedirectSignInLocal","oauthRedirectSignInPublic","oauthRedirectSignOutLocal","oauthRedirectSignOutPublic","debugAwsAmplify","api","version","stage","enpoint","development","production","headers","redirect","indexedDb","name","objectStoresMeta","storeConfig","autoIncrement","storeSchema","keypath","options","unique","Auth_","signIn","params","currentFunctionName","fetcher","signUp","confirmSignUp","code","currentAuthenticatedUser","Promise","resolve","reject","auth","localStorage","getItem","user","signOut","url","method","key","encodeURIComponent","join","opt","Headers","body","fetch","then","res","json","data","ok","status","statusText","catch","success","error","final","trackPromise","finally","federatedSignIn","Auth","forgotPassword","username","resendSignUp","forgotPasswordSubmit","password","resendResetPasswordCode","capitalize","string","charAt","toUpperCase","slice","isEmptyObject","obj","length","constructor","isAuthLocation","location","pathname","Boolean","hostname","match","Error","stack","trim","replace","encodeEmail","email","encodedEmail","i","charNum","curChar","React","createElement","dangerouslySetInnerHTML","__html","IconCustom","IconLogoMain","IconNetworkOn","IconNetworkOff","src","style","width","height","alt","defaultProps","memo","IconGravatar","classes","makeStyles","theme","customAvatarIcon","useStyles","className","ImageCustom","root","offset","mixins","toolbar","header","fontSize","backgroundColor","palette","paddingRight","spacing","paddingLeft","logo","marginTop","marginRight","menuLink","textDecoration","menuLabel","headerLabel","title","flexGrow","fontWeight","justifyContent","drawerContainer","menuItem","borderBottom","paddingTop","paddingBottom","menuPadding","padding","Header","useContext","AuthContext","history","useHistory","t","useTranslation","setResponsiveness","innerWidth","setState","prevState","view","drawerOpen","userMenuIsOpen","state","handleDrawerClose","anchorUserMenuEl","setAnchorUserMenuEl","handleUserMenuClose","mainItems","label","href","showInDesktopMode","userItems","AppBar","elevation","position","Toolbar","variant","IconButton","edge","onClick","Drawer","anchor","onClose","MenuItem","Link","component","RouterLink","to","Grid","container","alignItems","event","currentTarget","profileImage","borderRadius","Button","push","Menu","anchorEl","anchorOrigin","vertical","horizontal","keepMounted","transformOrigin","MenuListProps","Authentication","setAuth","LOG_LEVEL","info","Spinner","promiseInProgress","usePromiseTracker","outer","top","left","middle","verticalAlign","inner","marginLeft","profile","Profile","Home","lazy","SignUp","SignIn","SignOut","ForgotPassword","Searches","Listings","Unsubscribe","Notifications","NotFound","TermsOfUse","Legal","Routes","useLocation","search","queryString","parse","toast","warning","error_description","styles","content","path","exact","render","doc","zIndex","transition","footer","fontStyle","Footer","on","off","languageIcon","navigator","toLowerCase","Container","Typography","packageJson","Date","getFullYear","changeLanguage","document","documentElement","setAttribute","isOnline","fill","how","CookieBanner","onScroll","e","target","scrollTop","now","date","setFullYear","toUTCString","cookie","buttonText","fontFamily","background","buttonStyle","float","expires","dismissOnScroll","messaging","tokenKey","firebase","apps","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","getToken","a","onMessage","PushNotifications","StatusContext","setStatus","setToken","currentTokenString","currentToken","timestamp","getTime","vapidKey","token","setItem","payload","pushNotifications","FloatingActionButton","showingNotifications","show","link","rotate","darkColors","lighterRed","lightColors","white","bottom","createMuiTheme","typography","overrides","MuiInputBase","input","transitionDelay","transitionProperty","primary","light","blueGrey","main","dark","secondary","lightGreen","grey","amber","socialButtons","facebook","google","contentsContainer","minHeight","contentsWrap","flexDirection","Contents","App","ThemeProvider","AuthProvider","StatusProvider","CssBaseline","BroadcastChannel","onPerfEntry","getElementById","ReactDOM","StrictMode","Toast","Function","getCLS","getFID","getFCP","getLCP","getTTFB","serviceWorker","ready","registration","unregister","level","initialState","defaultValue","usePersistedState","ToastContainer","injectStyle","hideProgressBar","newestOnTop","closeOnClick","rtl","pauseOnFocusLoss","draggable","pauseOnHover","bodyClassName","en","translation","it","fr","use","LanguageDetector","initReactI18next","init","fallbackLng","keySeparator","nsSeparator","interpolation","escapeValue","detection","order","checkWhitelist"],"mappings":"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","file":"static/js/main.c2768695.chunk.js","sourcesContent":["import config from \"../config\";\nimport { resources } from \"../i18n\";\n\n/**\n * Find the first language from the browser's language, also primarized (ex.: \"en_US\" => \"en\") if needed,\n * which is among supported languages; if none found, return configured fallback language.\n */\nexport const getCurrentLanguage = (i18n) => {\n  const browserLanguages = i18n.languages;\n  const supportedLanguages = Object.keys(resources);\n  const commonLanguages = browserLanguages.filter(language => supportedLanguages.includes(language));\n  if (commonLanguages) { // found a supported language in browser languages\n    return commonLanguages[0];\n  } else { // not found a supported language in i18n browser languages, look for primary language\n    const browserLanguagesPrimary = browserLanguages.map(browserLanguage => browserLanguage.split(\"_\").pop());\n    const commonLanguages = browserLanguagesPrimary.filter(language => supportedLanguages.includes(language));\n    if (commonLanguages) { // found a supported language in browser primary languages\n      return commonLanguages[0];\n    } else {\n      return config.languages.fallback; // return configured fallback language\n    }\n  }\n}\n\n\n/**\n * Function to store in IndexedDB errors in English from Cognito/Amplify,\n * so to be able to localize them all, later...\n * To be used only while developing, remove in stable production.\n * \n * @param {caller} string\n * @param {error} object or string\n */\nexport function ETBTAdd(caller, err) {\n  return ETBT(caller, err, 'add');\n}\n\n/**\n * Function to list from IndexedDB errors in English from Cognito/Amplify,\n * so to be able to localize them all.\n * To be used only while developing, remove in stable production.\n * \n * @param {caller} string\n * @param {error} object or string\n */\n export function ETBTList(caller, err) {\n  return ETBT(caller, err, 'list');\n}\n\nfunction ETBT(caller, err, action) {\n  caller = caller.toString();\n  if ((typeof err === 'object') && (typeof err.message === 'string')) {\n    err = err.message;\n  } else {\n    if (typeof err !== 'string') {\n      err = JSON.stringify(err);\n    }\n  }\n\n  // save to indexedDB\n  const id = caller;\n  const value = err;\n\n  // IndexedDB handling\n\n  // this works on all devices/browsers, and uses IndexedDBShim as a final fallback \n  var indexedDB = window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB || window.shimIndexedDB;\n\n  // open (or create) the database\n  var open = indexedDB.open(\"ERRORS_TO_BE_TRANSLATED\", 1);\n\n  // create the schema\n  open.onupgradeneeded = function() {\n    var db = open.result;\n    var store = db.createObjectStore(\"Amplify\", {keyPath: \"id\"});\n    /*var index = */store.createIndex(\"Index\", [\"id\", \"value\"]);\n  };\n\n  open.onsuccess = function() {\n    // start a new transaction\n    var db = open.result;\n    var tx = db.transaction(\"Amplify\", \"readwrite\");\n    var store = tx.objectStore(\"Amplify\");\n    /*var index = */store.index(\"Index\");\n\n    if (action === \"add\") {\n      // add some data (with changing id to allow storing multiple rows with the same id)\n      store.put({id: id + `-${random()}`, value});\n    }\n    \n    if (action === \"list\") {\n      // query the data\n      store.getAll().onsuccess = function() {\n        var resultUniq = [...new Set(this.result.map(item => item.value))];\n        //this.result.filter((v, i, a) => a.indexOf(v.value) === i);\n        console.log('IndexedDb store list:', resultUniq);\n      };\n    }\n\n    // close the db when the transaction is done\n    tx.oncomplete = function() {\n      db.close();\n    };\n  }\n\n  var random = function() {\n    return (Math.random() + 1).toString(36).substring(1);\n  }\n}\n","import React, { useState, useEffect, createContext } from \"react\";\n\nconst OnlineStatusContext = createContext(true);\n\nconst OnlineStatusProvider = (props) => {\n  const [onlineStatus, setOnlineStatus] = useState(true);\n\n  useEffect(() => {\n    window.addEventListener(\"offline\", () => setOnlineStatus(false));\n    window.addEventListener(\"online\", () => setOnlineStatus(true));\n    return () => {\n      window.removeEventListener(\"offline\", () => setOnlineStatus(false));\n      window.removeEventListener(\"online\", () => setOnlineStatus(true));\n    };\n  }, []);\n\n  return (\n    <OnlineStatusContext.Provider value={onlineStatus}>\n      {props.children}\n    </OnlineStatusContext.Provider>\n  );\n};\n\nexport { OnlineStatusProvider, OnlineStatusContext };\n\n// export const useOnlineStatus = () => {\n//   useContext(OnlineStatusContext);\n  \n//   //return useContext(OnlineStatusContext);\n\n//   //const store = useContext(OnlineStatusContext);\n//   //return store;\n// };\n","module.exports = {\n  companyName: \"Sistemi Solari\",\n  companyHomeSiteName: \"sistemisolari.com\",\n  companyHomeSiteUrl: \"https://www.sistemisolari.com\",\n  companyOwner: \"Marco Solari\",\n  companyOwnerFiscalCode: \"SLRMRC61M31L219Y\",\n  companyOwnerStreetAddress: \"Corso Quintino Sella, 92/43\",\n  companyOwnerCity: \"Torino\",\n  companyOwnerProvince: \"TO\",\n  companyOwnerZipCode: \"10132\",\n  companyOwnerPhone: \"+39 333 6480983\",\n  companyOwnerEmail: \"marcosolari@gmail.com\",\n  appName: \"quiccasa\",\n  appTitle: \"Quiccasa\",\n  appSiteUrl: \"quiccasa.sistemisolari.com\",\n  appTermsValidityStartDate: \"01-01-2021\",\n  startUrl: \".\", // TODO: \"/\" or \".\" ?\n  display: \"standalone\",\n  spinner: {\n    delay: 100,\n    type: \"Audio\",\n    color: \"darkred\",\n    size: 66,\n    opacity: .50,\n  },\n  languages: {\n    supported: {\n      \"en\": { icon: \"🇬🇧\" },\n      \"it\": { icon: \"🇮🇹\" },\n    },\n    fallback: \"en\",\n  },\n  // sounds: {\n  //   buttonClick,\n  // },\n  footerHeight: \"1.5rem\",\n  extraSmallWatershed: 600,\n  mobileDesktopWatershed: 900,\n  federatedSigninProviders: [ // we currently handle \"Facebook\", \"Google\"\n    \"Facebook\",\n    \"Google\",\n  ],\n  oauth: {\n    domain: \"auth.sistemisolari.com\",\n    // OK for Google // scope: [ \"phone\", \"email\", \"profile\", \"openid\", \"aws.cognito.signin.user.admin\" ],\n    scope: [ \"email\", \"openid\", \"aws.cognito.signin.user.admin\" ],\n    responseType: \"code\",\n  },\n  oauthRedirectSignInLocal: \"http://localhost:3000/\",\n  oauthRedirectSignInPublic: \"https://quiccasa.sistemisolari.com/\",\n  oauthRedirectSignOutLocal: \"http://localhost:3000/\",\n  oauthRedirectSignOutPublic: \"https://quiccasa.sistemisolari.com/\",\n  debugAwsAmplify: false,\n  api: {\n    version: 1,\n    stage: \"dev\", // \"dev\" / \"prod\"\n    enpoint: {\n      development: \"https://apidev.sistemisolari.com/\",\n      production: \"https://api.sistemisolari.com/\",\n    },\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"Content-Type-BACKUP\": \"x-www-form-urlencoded\",\n    },\n    redirect: \"follow\",\n  },\n  indexedDb: {\n    name: 'sw-background-push-messages',\n    version: 1,\n    objectStoresMeta: [\n      {\n        store: 'messages',\n        storeConfig: { keyPath: 'id', autoIncrement: true },\n        storeSchema: [\n          { name: 'name', keypath: 'name', options: { unique: false } },\n          { name: 'email', keypath: 'email', options: { unique: false } }\n        ]\n      }\n    ]\n  }\n};\n","import config from \"../config\";\nimport { currentFunctionName } from \"../libs/Misc\";\n\nconst Auth_ = {\n  signIn: (params) => {\nconsole.log(currentFunctionName(), params);\n    return fetcher(\"/api/auth/login\", \"POST\", params);\n  },\n  signUp: (params) => {\nconsole.log(currentFunctionName(), params);\n    return fetcher(\"/api/auth/register\", \"POST\", params);\n  },\n  confirmSignUp: (params) => {\nconsole.log(currentFunctionName(), params);\n    // TODO: props = props.filter(key => key === \"code\");\n    return fetcher(`/api/auth/verify/${params.code}`, \"GET\", params); // TODO: choose: verify or confirmSignUp, and code or token (better code) ...\n  },\n  currentAuthenticatedUser: (params) => {\nconsole.log(currentFunctionName(), params);\n    return new Promise((resolve, reject) => {\n      const auth = localStorage.getItem('auth');\nconsole.log(currentFunctionName(), \"auth:\", auth);\n      if (auth) {\n        resolve(auth.user);\n      } else {\n        reject();\n      }\n    });\n  },\n  signOut: (params) => {\nconsole.log(currentFunctionName());\n    // nothing to do\n    return new Promise((resolve, reject) => {\n      resolve();\n    });\n  },\n};\n\nconst fetcher = (url, method, params) => {\nconsole.log(\"fetcher:\", url, method, params);\n  return new Promise((resolve, reject) => {\n    if (method === \"GET\" && params) {\n      url += \"?\" + Object.keys(params).map((key) => {\n        return encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key])\n      }).join(\"&\");\n    }\nconsole.log(\"fetcher url 2:\", url);\nvar opt = {\n  method,\n  headers: new Headers(config.api.headers),\n  ...(params && method !== \"GET\" && { body: JSON.stringify(params) }),\n  redirect: config.api.redirect,\n}\nconsole.log(\"fetcher opt:\", opt);\n    fetch(url, {\n      method,\n      headers: new Headers(config.api.headers),\n      ...(params && method !== \"GET\" && { body: JSON.stringify(params) }),\n      //body: new URLSearchParams(params),\n      redirect: config.api.redirect,\n    })\n      .then(res => {\n        res.json().then(data => {\n          if (!res.ok) reject({status: res.status, statusText: res.statusText, message: data.message ? data.message : res.statusText})\n          resolve(data);\n        })\n      })\n      .catch(err => reject(err))\n    ;\n  });\n}\n\nexport default Auth_;","//import React from \"react\";\nimport { Auth } from \"aws-amplify\";\nimport { trackPromise } from \"react-promise-tracker\";\nimport Auth_ from \"./Auth\";\n\n\n\nexport function currentAuthenticatedUser({success, error, final}) {\n  trackPromise(\n    Auth_.currentAuthenticatedUser()\n      .then((data) => success(data))\n      .catch((data) => error(data))\n      .finally((data) => final(data))\n  );\n}\n\nexport function signIn(props, {success, error, final}) {\n  trackPromise(\n    Auth_.signIn({...props})\n      .then((data) => {console.log(\"success:\", data); success(data)})\n      .catch((data) => {console.log(\"error:\", data); error(data)})\n      .finally((data) => final(data))\n  );\n}\n\nexport function federatedSignIn(props, {success, error, final}) {\n  trackPromise(\n    Auth.federatedSignIn({...props})\n      .then((data) => success(data))\n      .catch((data) => error(data))\n      .finally((data) => final(data))\n  );\n}\n  \nexport function signUp(props, {success, error, final}) {\n  trackPromise(\n    Auth_.signUp({...props})\n      .then((data) => success(data))\n      .catch((data) => error(data))\n      .finally((data) => final(data))\n  );\n};\n\n//export function confirmSignUp(username, code, {success, error, final}) {\nexport function confirmSignUp(props, {success, error, final}) {\nconsole.log('TrackPromise - props:', props);\n  trackPromise(\n    Auth_.confirmSignUp({...props})\n      .then((data) => success(data))\n      .catch((data) => error(data))\n      .finally((data) => final(data))\n  );\n};\n\nexport function forgotPassword(username, {success, error, final}) {\n  trackPromise(\n    Auth.forgotPassword(username)\n      .then((data) => success(data))\n      .catch((data) => error(data))\n      .finally((data) => final(data))\n  );\n};\n\nexport function resendSignUp(username, {success, error, final}) {\n  trackPromise(\n    Auth.resendSignUp(username)\n      .then((data) => success(data))\n      .catch((data) => error(data))\n      .finally((data) => final(data))\n  );\n};\n\nexport function forgotPasswordSubmit(username, code, password, {success, error, final}) {\n  trackPromise(\n    Auth.forgotPasswordSubmit(username, code, password,)\n      .then((data) => success(data))\n      .catch((data) => error(data))\n      .finally((data) => final(data))\n  );\n};\n\nexport function resendResetPasswordCode(username, {success, error, final}) {\n  trackPromise(\n    //Auth.resendResetPassword(username)\n    Auth.resendSignUp(username)\n      .then((data) => success(data))\n      .catch((data) => error(data))\n      .finally((data) => final(data))\n  );\n};\n\nexport function signOut({success, error, final}) {\n  trackPromise(\n    Auth_.signOut()\n      .then((data) => success(data))\n      .catch((data) => error(data))\n      .finally((data) => final(data))\n  );\n};\n","import React from \"react\";\n\nexport const capitalize = (string) => {\n  return string ? string.charAt(0).toUpperCase() + string.slice(1) : \"\";\n};\n\nexport const isEmptyObject = (obj) => {\n  return (\n    obj ? // null and undefined check\n      Object.keys(obj).length === 0 // empty object check\n      && obj.constructor === Object // Object.keys(new Date()).length === 0; so we have to check it is not a Date\n    :\n      true\n  );\n};\n\nexport const findValueInObjectsArrayByProp = (array, keyProp, valProp, value) => {\n  const result = array.find(a => {\n    return a[keyProp] === value;\n  });\n  return ((typeof result === \"object\") && (result !== null)) ? result[valProp] : undefined;\n}\n\nexport const isAuthLocation = (location) => {\n  return (\n    (location.pathname === \"/signup\") ||\n    (location.pathname === \"/signin\") ||\n    (location.pathname === \"/profile\") ||\n    (location.pathname === \"/signout\") ||\n    (location.pathname === \"/forgot-password\")\n  );\n}\n\nexport const isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === \"[::1]\" ||\n  // 127.0.0.1/8 is considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n);\n\nexport function currentFunctionName() {\n  // TODO: remove this long version:\n  // let name = arguments.callee.toString();\n  // name = name.substr('function '.length);\n  // name = name.substr(0, name.indexOf('('));\n  // return name;\n\n  // /* eslint-disable no-caller */\n  // const name = arguments.callee.toString().substring(0, 'function '.length);\n  // return name.substring(0, name.indexOf('('));\n\n  const stack = new Error().stack,\n        caller = stack.split('\\n')[2].trim().replace(/at\\s*/, \"\").replace(/Object\\./, \"\");\n  return caller;\n};\n\nexport const encodeEmail = (email) => {\n  var encodedEmail = \"\";\n  \n  if (!email) {\n    return \"\";\n  }\n\n  for (let i = 0; i < email.length; i++) {\n      var charNum = \"000\";\n      var curChar = email.charAt(i);\n      if (curChar === \"A\") {\n        charNum = \"065\";\n      }\n      if (curChar === \"a\") {\n        charNum = \"097\";\n      }\n      if (curChar === \"B\") {\n        charNum = \"066\";\n      }\n      if (curChar === \"b\") {\n        charNum = \"098\";\n      }\n      if (curChar === \"C\") {\n        charNum = \"067\";\n      }\n      if (curChar === \"c\") {\n        charNum = \"099\";\n      }\n      if (curChar === \"D\") {\n        charNum = \"068\";\n      }\n      if (curChar === \"d\") {\n        charNum = \"100\";\n      }\n      if (curChar === \"E\") {\n        charNum = \"069\";\n      }\n      if (curChar === \"e\") {\n        charNum = \"101\";\n      }\n      if (curChar === \"F\") {\n        charNum = \"070\";\n      }\n      if (curChar === \"f\") {\n        charNum = \"102\";\n      }\n      if (curChar === \"G\") {\n        charNum = \"071\";\n      }\n      if (curChar === \"g\") {\n        charNum = \"103\";\n      }\n      if (curChar === \"H\") {\n        charNum = \"072\";\n      }\n      if (curChar === \"h\") {\n        charNum = \"104\";\n      }\n      if (curChar === \"I\") {\n        charNum = \"073\";\n      }\n      if (curChar === \"i\") {\n        charNum = \"105\";\n      }\n      if (curChar === \"J\") {\n        charNum = \"074\";\n      }\n      if (curChar === \"j\") {\n        charNum = \"106\";\n      }\n      if (curChar === \"K\") {\n        charNum = \"075\";\n      }\n      if (curChar === \"k\") {\n        charNum = \"107\";\n      }\n      if (curChar === \"L\") {\n        charNum = \"076\";\n      }\n      if (curChar === \"l\") {\n        charNum = \"108\";\n      }\n      if (curChar === \"M\") {\n        charNum = \"077\";\n      }\n      if (curChar === \"m\") {\n        charNum = \"109\";\n      }\n      if (curChar === \"N\") {\n        charNum = \"078\";\n      }\n      if (curChar === \"n\") {\n        charNum = \"110\";\n      }\n      if (curChar === \"O\") {\n        charNum = \"079\";\n      }\n      if (curChar === \"o\") {\n        charNum = \"111\";\n      }\n      if (curChar === \"P\") {\n        charNum = \"080\";\n      }\n      if (curChar === \"p\") {\n        charNum = \"112\";\n      }\n      if (curChar === \"Q\") {\n        charNum = \"081\";\n      }\n      if (curChar === \"q\") {\n        charNum = \"113\";\n      }\n      if (curChar === \"R\") {\n        charNum = \"082\";\n      }\n      if (curChar === \"r\") {\n        charNum = \"114\";\n      }\n      if (curChar === \"S\") {\n        charNum = \"083\";\n      }\n      if (curChar === \"s\") {\n        charNum = \"115\";\n      }\n      if (curChar === \"T\") {\n        charNum = \"084\";\n      }\n      if (curChar === \"t\") {\n        charNum = \"116\";\n      }\n      if (curChar === \"U\") {\n        charNum = \"085\";\n      }\n      if (curChar === \"u\") {\n        charNum = \"117\";\n      }\n      if (curChar === \"V\") {\n        charNum = \"086\";\n      }\n      if (curChar === \"v\") {\n        charNum = \"118\";\n      }\n      if (curChar === \"W\") {\n        charNum = \"087\";\n      }\n      if (curChar === \"w\") {\n        charNum = \"119\";\n      }\n      if (curChar === \"X\") {\n        charNum = \"088\";\n      }\n      if (curChar === \"x\") {\n        charNum = \"120\";\n      }\n      if (curChar === \"Y\") {\n        charNum = \"089\";\n      }\n      if (curChar === \"y\") {\n        charNum = \"121\";\n      }\n      if (curChar === \"Z\") {\n        charNum = \"090\";\n      }\n      if (curChar === \"z\") {\n        charNum = \"122\";\n      }\n      if (curChar === \"0\") {\n        charNum = \"048\";\n      }\n      if (curChar === \"1\") {\n        charNum = \"049\";\n      }\n      if (curChar === \"2\") {\n        charNum = \"050\";\n      }\n      if (curChar === \"3\") {\n        charNum = \"051\";\n      }\n      if (curChar === \"4\") {\n        charNum = \"052\";\n      }\n      if (curChar === \"5\") {\n        charNum = \"053\";\n      }\n      if (curChar === \"6\") {\n        charNum = \"054\";\n      }\n      if (curChar === \"7\") {\n        charNum = \"055\";\n      }\n      if (curChar === \"8\") {\n        charNum = \"056\";\n      }\n      if (curChar === \"9\") {\n        charNum = \"057\";\n      }\n      if (curChar === \"&\") {\n        charNum = \"038\";\n      }\n      if (curChar === \" \") {\n        charNum = \"032\";\n      }\n      if (curChar === \"_\") {\n        charNum = \"095\";\n      }\n      if (curChar === \"-\") {\n        charNum = \"045\";\n      }\n      if (curChar === \"@\") {\n        charNum = \"064\";\n      }\n      if (curChar === \".\") {\n        charNum = \"046\";\n      }\n      if (charNum === \"000\") {\n        encodedEmail += curChar;\n      } else {\n        encodedEmail += \"&#\" + charNum + \";\";\n      }\n    }\n    return React.createElement(\"span\", { dangerouslySetInnerHTML: { __html: encodedEmail } });\n  }\n","export default __webpack_public_path__ + \"static/media/LogoMain.e61b1d04.png\";","export default __webpack_public_path__ + \"static/media/Network.on.122066d2.svg\";","export default __webpack_public_path__ + \"static/media/Network.off.aeab2383.svg\";","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport IconLogoMain from \"../assets/icons/LogoMain.png\";\nimport IconNetworkOn from \"../assets/icons/Network.on.svg\";\nimport IconNetworkOff from \"../assets/icons/Network.off.svg\";\n\n\n\nfunction IconCustom(props) {\n  let icon = null;\n  switch (props.name) {\n    case \"LogoMain\": icon = IconLogoMain; break;\n    case \"Network.on\": icon = IconNetworkOn; break;\n    case \"Network.off\": icon = IconNetworkOff; break;\n    default: icon = \"#\"; break;\n  }\n\n  return (\n    <img src={icon} style={props.style} width={props.size} height={props.size} alt={`${props.alt ? props.alt : props.name}`} {...props} />\n  );    \n};\n\nIconCustom.propTypes = {\n  name: PropTypes.oneOf([\n    \"LogoMain\",\n    \"Network.on\",\n    \"Network.off\",\n  ]).isRequired,\n  size: PropTypes.number,\n  style: PropTypes.object,\n  alt: PropTypes.string,\n};\n\nIconCustom.defaultProps = {\n  size: 32,\n  style: {},\n  alt: \"icon\",\n};\n\n\nexport default React.memo(IconCustom);","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport Gravatar from \"react-gravatar\";\n\n\n\nfunction IconGravatar(props) {\n  const styles = theme => ({\n    customAvatarIcon: {\n    },\n  });\n  const useStyles = makeStyles((theme) => (styles(theme)));\n  const classes = useStyles();\n\n  return (\n    <Gravatar\n      email={props.email}\n      size={props.size}\n      style={props.style}\n      className={props.className ? props.className : classes.customAvatarIcon}\n    />\n  );    \n};\n\nIconGravatar.propTypes = {\n  email: PropTypes.string.isRequired,\n  size: PropTypes.number,\n  style: PropTypes.object,\n  className: PropTypes.string,\n};\n\nIconGravatar.defaultProps = {\n  size: 32,\n};\n\nexport default React.memo(IconGravatar);","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\n\n\nfunction ImageCustom(props) {\n  return (\n    <img src={props.src} style={props.style} width={props.size} height={props.size} alt={props.alt} {...props} />\n  );    \n};\n\nImageCustom.propTypes = {\n  src: PropTypes.string.isRequired,\n  size: PropTypes.number,\n  style: PropTypes.object,\n  alt: PropTypes.string,\n};\n\nImageCustom.defaultProps = {\n  size: 32,\n  style: {},\n  alt: \"icon\",\n};\n\nexport default React.memo(ImageCustom);","import React, { useState, useEffect, useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { Link as RouterLink, useHistory } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Link from \"@material-ui/core/Link\";\nimport Button from \"@material-ui/core/Button\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Menu from \"@material-ui/core/Menu\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport ListAltIcon from \"@material-ui/icons/ListAlt\";\nimport ExitToAppIcon from \"@material-ui/icons/ExitToApp\";\nimport AccountCircleIcon from \"@material-ui/icons/AccountCircle\";\nimport VpnKeyIcon from \"@material-ui/icons/VpnKey\";\nimport AssignmentTurnedInIcon from \"@material-ui/icons/AssignmentTurnedIn\";\nimport IconCustom from \"./IconCustom\";\nimport IconGravatar from \"./IconGravatar\";\nimport ImageCustom from \"./ImageCustom\";\nimport { AuthContext } from \"../providers/AuthProvider\";\nimport config from \"../config\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    //flexGrow: 1,\n  },\n  offset: theme.mixins.toolbar, // to avoid contents to show behide headr\n  header: {\n    fontSize: \"1.15em\",\n    backgroundColor: theme.palette.header.backgroundColor,\n    color: theme.palette.header.color,\n    paddingRight: theme.spacing(1),\n    paddingLeft: theme.spacing(1),\n  },\n  logo: {\n    marginTop: theme.spacing(0.5),\n    marginRight: theme.spacing(2),\n  },\n  menuLink: {\n    marginRight: theme.spacing(2),\n    textDecoration: \"none\",\n    \"&:hover\": {\n      textDecoration: \"none\",\n    },\n  },\n  menuLabel: {\n    paddingLeft: theme.spacing(1.5),\n  },\n  headerLabel: {\n  },\n  title: { // TODO...\n    flexGrow: 1,\n    color: \"#222\",\n    fontWeight: 700,\n    fontSize: \"1.5em\",\n  },\n  toolbar: {\n    display: \"flex\",\n    justifyContent: \"space-between\",\n  },\n  drawerContainer: {\n  },\n  menuItem: {\n    borderBottom: \"1px solid #eaeaea\",\n    paddingLeft: theme.spacing(1.5),\n    paddingRight: theme.spacing(1.5),\n    paddingTop: \"1.5vw\",\n    paddingBottom: \"1.5vw\",\n  },\n  menuPadding: {\n    padding: 0,\n  },\n}));\n\nconst elevation = 3; // header elevation over contents below\n\n\n\nfunction Header() {\n  const classes = useStyles();\n  const { auth } = useContext(AuthContext);\n  const history = useHistory();\n  const { t } = useTranslation();\n\n  // handle responsiveness\n  useEffect(() => {\n    const setResponsiveness = () => {\n      return window.innerWidth < config.mobileDesktopWatershed\n        ? setState((prevState) => ({ ...prevState, view: \"mobile\" }))\n        : setState((prevState) => ({ ...prevState, view: \"desktop\" }));\n    };\n    setResponsiveness();\n    window.addEventListener(\"resize\", () => setResponsiveness());\n    return () => {\n      window.removeEventListener(\"resize\", () => setResponsiveness());\n    };\n  }, []);\n\n  const [state, setState] = useState({\n    view: \"mobile\", // mobile / desktop\n    drawerOpen: false,\n    userMenuIsOpen: false,\n  });\n\n  const handleDrawerOpen = () =>\n    setState((prevState) => ({ ...prevState, drawerOpen: true }));\n  const handleDrawerClose = () =>\n    setState((prevState) => ({ ...prevState, drawerOpen: false }));\n\n  const [anchorUserMenuEl, setAnchorUserMenuEl] = React.useState(null);\n  const userMenuIsOpen = Boolean(anchorUserMenuEl);\n\n  const handleUserMenuOpen = (event) => {\n    setAnchorUserMenuEl(event.currentTarget);\n  };\n\n  const handleUserMenuClose = () => {\n    setAnchorUserMenuEl(null);\n  };\n  \n  const handleUserJoin = (event) => {\n    history.push(\"/signin\");\n  };\n\n  const mainItems = [\n    {\n      label: t(\"Home\"),\n      icon: <HomeIcon />,\n      href: \"/\",\n      showInDesktopMode: false,\n    },\n    {\n      label: t(\"Searches\"),\n      icon: <SearchIcon />,\n      href: \"/searches\",\n    },\n    {\n      label: t(\"Listings\"),\n      icon: <ListAltIcon />,\n      href: \"/listings\",\n    },\n  ];\n\n  const userItems = auth.user ?\n    [\n      {\n        label: t(\"Profile\"),\n        icon: <AccountCircleIcon />,\n        href: \"/profile\",\n      },\n      {\n        label: t(\"Sign out\"),\n        icon: <ExitToAppIcon />,\n        href: \"/signout\",\n      },\n    ] : [\n      {\n        label: t(\"Sign in\"),\n        icon: <VpnKeyIcon />,\n        href: \"/signin\",\n      },\n      {\n        label: t(\"Sign up\"),\n        icon: <AssignmentTurnedInIcon />,\n        href: \"/signup\",\n      },\n    ]\n  ;\n \n  const getMobileMainMenuItems = () => {\n    return mainItems.map(({ label, icon, href }) => (\n      <MenuItem\n        key={label}\n        className={classes.menuItem}\n      >\n        <Link {...{\n          key: label,\n          component: RouterLink,\n          to: href,\n          color: \"inherit\",\n          className: classes.menuLink,\n        }}>\n          <Grid container spacing={1} alignItems=\"center\">\n            {icon}\n            <span className={classes.menuLabel}>{label}</span>\n          </Grid>\n        </Link>\n      </MenuItem>\n    ));\n  };\n\n  const getDesktopMainHeaderItems = () => {\n    return mainItems.filter(item => item.showInDesktopMode !== false).map(({ label, icon, href }) => (\n      <Link {...{\n        key: label,\n        component: RouterLink,\n        to: href,\n        color: \"inherit\",\n        className: classes.menuLink,\n      }}>\n        <span className={classes.headerLabel}>{label}</span>\n      </Link>\n    ));\n  };\n\n  const getUserMenuItems = () => {\n    return userItems.map(({ label, icon, href }) => (\n        <MenuItem\n          key={label}\n          className={classes.menuItem}\n        >\n          <Link {...{\n            key: label,\n            component: RouterLink,\n            to: href,\n            color: \"inherit\",\n            className: classes.menuLink,\n          }}>\n            <Grid container spacing={1} alignItems=\"center\">\n              {icon}\n              <span className={classes.menuLabel}>{label}</span>\n            </Grid>\n          </Link>\n        </MenuItem>\n    ));\n  };\n\n  console.log('HEADER - auth:', auth);\n  return (\n    <header>\n      <AppBar className={classes.header} elevation={elevation} position=\"fixed\">\n        <Toolbar variant=\"dense\">\n\n          {/* drawer button */}\n          {state.view === \"mobile\" &&\n            <IconButton {...{ // mobile only\n              edge: \"start\",\n              color: \"inherit\",\n              \"aria-label\": \"menu\",\n              \"aria-haspopup\": \"true\",\n              onClick: handleDrawerOpen,\n            }}>\n              <MenuIcon />\n            </IconButton>\n          }\n\n          {/* drawer menu */}\n          {state.view === \"mobile\" &&\n            <Drawer // mobile only\n              anchor=\"left\"\n              open={state.drawerOpen}\n              onClose={handleDrawerClose}\n              onClick={handleDrawerClose} // to close on click everywhere\n            >\n              <div className={classes.drawerContainer}>{getMobileMainMenuItems()}</div>\n            </Drawer>\n          }\n\n          {/* main brand logo icon */}\n          <RouterLink to=\"/\">\n            <IconCustom name=\"LogoMain\" size={30} className={classes.logo} />\n          </RouterLink>\n\n          {/* main brand logo text */}\n          <div className={classes.title}>\n            {config.appTitle}\n          </div>\n\n          {state.view === \"desktop\" &&\n            <div>\n              {getDesktopMainHeaderItems()}\n            </div>\n          }\n\n          {/* user menu */}\n          <>\n            {auth.user ?\n              <IconButton\n                aria-label=\"account of current user\"\n                aria-controls=\"menu-appbar\"\n                aria-haspopup=\"true\"\n                onClick={handleUserMenuOpen}\n                color=\"inherit\"\n              >\n                {auth.user ?\n                  //<AccountCircleIcon />\n\n                  // <IconGravatar\n                  //   email={auth.user.email}\n                  //   size={30}\n                  // />\n\n                  //<img src={auth.user.profileImage} alt=\"user's icon\" width={30} style={{borderRadius: \"50%\"}} />\n\n                  //<ImageCustom src={auth.user.profileImage} alt=\"user's icon\" width={30} style={{borderRadius: \"50%\"}} />\n\n                  //<IconCustom name=\"UserPicture\" size={30} className={classes.logo} />\n\n                  auth.user.profileImage ?\n                    <ImageCustom src={auth.user.profileImage} alt=\"user's icon\" width={30} style={{borderRadius: \"50%\"}} />\n                  :\n                    <IconGravatar\n                      email={auth.user.email}\n                      size={30}\n                    />\n                :\n                  <AccountCircleIcon />\n                }\n              </IconButton>\n            :\n              (auth.user === null) && // if auth.user is not null (undefined), we don't kow yet, so do not show anything...\n              // TODO: aviud object.keys length test!!! auth MUST NOT be {} ... But, { user: null }\n                <Button\n                  variant=\"contained\"\n                  size=\"small\"\n                  color=\"secondary\"\n                  onClick={handleUserJoin}\n                >\n                  {t(\"Join !\")}\n                </Button>\n            }\n\n            <Menu\n              id=\"menu-appbar\"\n              anchorEl={anchorUserMenuEl}\n              anchorOrigin={{\n                vertical: \"top\",\n                horizontal: \"right\",\n              }}\n              open={userMenuIsOpen}\n              onClose={handleUserMenuClose}\n              onClick={handleUserMenuClose} // to close on click everywhere\n              keepMounted\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"right\",\n              }}\n              MenuListProps={{\n                classes: { padding: classes.menuPadding }\n              }}\n            >\n              {getUserMenuItems()}\n            </Menu>\n          </>\n        </Toolbar>\n      </AppBar>\n      <div className={classes.offset} />\n    </header>\n  );\n}\n\nexport default React.memo(Header);","import React from \"react\";\nimport { useEffect, useContext } from \"react\";\n//import Amplify/*, { I18n }*/ from \"aws-amplify\";\n//import { useTranslation } from \"react-i18next\";\nimport { currentAuthenticatedUser } from \"../libs/TrackPromise\";\nimport { AuthContext } from \"../providers/AuthProvider\";\n//import { isLocalhost } from \"../libs/Misc\";\nimport \"../i18n\"; // TODO: can we remove this import from here? Now we have it in /src/index.js ...\nimport config from \"../config\";\n\n\n\nfunction Authentication() {\nconsole.log('Authentication');\n  const { setAuth } = useContext(AuthContext);\n  //const { i18n } = useTranslation();\n\n  useEffect(() => {\nconsole.log('Authentication useEffect');\n\n    /**\n     * user:\n     *  - undefined: we don't know yet, we need this state in suspense and in routes\n     *  - null: guest user\n     *  - true: authenticated user\n     */\n    //setAuth({ user: undefined });\n\n    window.LOG_LEVEL = (process.env.NODE_ENV !== \"production\" && config.debugAwsAmplify ? \"DEBUG\" : \"\");\n\n    // Amplify.configure({\n    //   Auth: {\n    //     oauth: {...config.oauth,\n    //       redirectSignIn: isLocalhost ? config.oauthRedirectSignInLocal : config.oauthRedirectSignInPublic,\n    //       redirectSignOut: isLocalhost ? config.oauthRedirectSignOutLocal : config.oauthRedirectSignOutPublic,\n    //     },\n    //     region: process.env.REACT_APP_REGION,\n    //     userPoolId: process.env.REACT_APP_USER_POOL_ID,\n    //     userPoolWebClientId: process.env.REACT_APP_USER_POOL_WEB_CLIENT_ID,\n    //     storage: localStorage,\n    //   },\n    // });\n    //\n    // /**\n    // * TODO: I18n.setLanguage should enable amplify localized error messages,\n    // * but it's not implemented: we shell manually translate error messages our side.\n    // */\n    // //I18n.setLanguage(i18n.currentLanguage);\n    \n    currentAuthenticatedUser({\n      success: (user) => {\n        console.info(\"authenticated user is\", user);\n        setAuth({ user });\n      },\n      error: (err) => {\n        console.info(\"no authenticated user\", err);\n        setAuth({ user: null });\n      }\n    });\n\n  }, [setAuth/*, i18n.currentLanguage*/]);\n\n  return null;\n}\n\nexport default React.memo(Authentication);\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { usePromiseTracker } from \"react-promise-tracker\";\nimport Loader from \"react-loader-spinner\";\nimport config from \"../config\";\n\n\n\nfunction Spinner(props) {\n  const { promiseInProgress } = usePromiseTracker({delay: config.spinner.delay});\n\n  // centered overlay styles\n  const styles = theme => ({\n    outer: {\n      display: \"table\",\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      height: \"100%\",\n      width: \"100%\",\n      opacity: config.spinner.opacity,\n    },\n    middle: {\n      display: \"table-cell\",\n      verticalAlign: \"middle\",\n    },\n    inner: {\n      marginLeft: \"auto\",\n      marginRight: \"auto\",\n      height: 100,\n      width: 100,\n    },\n  });\n  const useStyles = makeStyles((theme) => (styles(theme)));\n  const classes = useStyles();\n\n  return promiseInProgress && (\n    <div className={classes.outer}>\n      <div className={classes.middle}>\n        <div className={classes.inner}>\n          <Loader type={config.spinner.type} color={config.spinner.color} height={config.spinner.size} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(Spinner);","import React from \"react\";\nimport { useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { AuthContext } from \"../../providers/AuthProvider\";\nimport { useTranslation } from \"react-i18next\";\n\nconst useStyles = makeStyles(theme => ({\n\tprofile: {\n    fontSize: \"1.5em\",\n\t},\n}));\n\nfunction Profile() {\n\tconst classes = useStyles();\n  const { auth } = useContext(AuthContext);\n  const { t } = useTranslation();\n\n  return (\n    <div className={classes.profile}>\n      {(typeof auth.user !== \"undefined\") && // if auth.user is undefined, we don't know yet about user authentication...\n        `${t(\"Profile\")} ${t(\"for\")} ${auth.user ? t(\"authenticated user\") : t(\"guest user\")} ${auth.user ? auth.user.email : \"\"}`\n      }\n   </div>\n  );\n}\n\nexport default React.memo(Profile);","import React, { useEffect, Suspense, lazy } from \"react\";\nimport { Switch, Route } from \"react-router\";\nimport { useLocation } from \"react-router\";\nimport queryString from \"query-string\";\nimport { useTranslation } from \"react-i18next\";\nimport { getCurrentLanguage } from \"../libs/I18n\";\nimport { toast } from \"./Toast\";\nimport Spinner from \"./Spinner\";\nimport Profile from \"./auth/Profile\";\n\nconst Home = lazy(() => import(\"./Home\"));\nconst SignUp = lazy(() => import(\"./auth/SignUp\"));\nconst SignIn = lazy(() => import(\"./auth/SignIn\"));\nconst SignOut = lazy(() => import(\"./auth/SignOut\"));\n//const Profile = lazy(() => import(\"./auth/Profile\"));\nconst ForgotPassword = lazy(() => import(\"./auth/ForgotPassword\"));\nconst Searches = lazy(() => import(\"./Searches\"));\nconst Listings = lazy(() => import(\"./Listings\"));\nconst Unsubscribe = lazy(() => import(\"./Unsubscribe\"));\nconst Notifications = lazy(() => import(\"./Notifications\"));\nconst NotFound = lazy(() => import(\"./NotFound\"));\n// const PrivacyPolicy = [];\n//       PrivacyPolicy[\"en\"] = lazy(() => import(\"./legal/en/PrivacyPolicy\"));\n//       PrivacyPolicy[\"it\"] = lazy(() => import(\"./legal/it/PrivacyPolicy\"));\nconst TermsOfUse = [];\n      TermsOfUse[\"en\"] = lazy(() => import(\"./legal/en/TermsOfUse\"));\n      TermsOfUse[\"it\"] = lazy(() => import(\"./legal/it/TermsOfUse\"));\nconst Legal = lazy(() => import(\"./legal/legal\"));\n\n\n\nfunction Routes() {\n  const location = useLocation();\n  const { i18n } = useTranslation();\n\n  // check for error parameters in location url\n  useEffect(() => {\n    const search = queryString.parse(location.search);\n    if (search.error) {\n      toast.warning(`Social login did not work, sorry.\\n${search.error}: ${search.error_description}`);\n    }\n  }, [location]);\n\n  return (\n    <Suspense fallback={<Spinner />}>\n      <div style={styles.content}>\n        <Switch location={location}>\n        <Route path=\"/\" exact component={Home} /> {/* sitemapFrequency={\"weekly\"} sitemapPriority={0.7} */}\n        <Route path=\"/signup\" component={SignUp} /> {/* sitemapFrequency={\"monthly\"} sitemapPriority={0.3} */}\n        <Route path=\"/signin\" component={SignIn} /> {/* sitemapFrequency={\"monthly\"} sitemapPriority={0.3} */}\n        <Route path=\"/profile\" component={Profile} />\n        <Route path=\"/signout\" component={SignOut} />\n        <Route path=\"/forgot-password\" component={ForgotPassword} />\n        <Route path=\"/searches\" component={Searches} /> {/* sitemapFrequency={\"daily\"} sitemapPriority={1.0} */}\n        <Route path=\"/listings\" component={Listings} /> {/* sitemapFrequency={\"daily\"} sitemapPriority={1.0} */}\n        <Route path=\"/unsubscribe\" component={Unsubscribe} /> {/* sitemapFrequency={\"monthly\"} sitemapPriority={0.2} */}\n        <Route path=\"/notifications\" component={Notifications} /> {/* sitemapFrequency={\"monthly\"} sitemapPriority={0.2} */}\n        {/*\n        <Route path=\"/privacy-policyOLD\" component={PrivacyPolicy[getCurrentLanguage(i18n)]} />\n        <Route path=\"/terms-of-useOLD\" component={TermsOfUse[getCurrentLanguage(i18n)]} />\n        */}\n        <Route path=\"/privacy-policy\" render={(props) => <Legal language={getCurrentLanguage(i18n)} doc={\"privacyPolicy\"} /> } />\n        <Route path=\"/terms-of-use\" render={(props) => <Legal language={getCurrentLanguage(i18n)} doc={\"termsOfUse\"} /> } />\n        <Route path=\"\" component={NotFound} />\n      </Switch>\n      </div>\n    </Suspense>\n  );\n}\n\nconst styles = {};\n\nstyles[\"fade-enter\"] = {\n  opacity: 0,\n  zIndex: 1,\n};\n\nstyles[\"fade-enter\"] = {\n  opacity: 0,\n  transition: \"opacity 250ms ease-in\",\n};\n\nstyles[\"fade-enter-active\"] = {\n  opacity: 1,\n  transition: \"opacity 250ms ease-in\",\n};\n\n// styles.fill = {\n//   position: \"absolute\",\n//   left: 0,\n//   right: 0,\n//   top: 100,\n//   bottom: 0\n// };\n\n// styles.content = {\n//   ...styles.fill,\n//   top: \"140px\",\n//   textAlign: \"center\"\n// };\n\nexport default React.memo(Routes);","import React from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { useLocation } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport Container from \"@material-ui/core/Container\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Link from \"@material-ui/core/Link\";\n\nimport i18n from \"i18next\";\n\nimport IconCustom from \"./IconCustom\";\nimport { isAuthLocation } from \"../libs/Misc\";\nimport config from \"../config\";\nimport packageJson from \"../package.alias.json\";\n\nconst useStyles = makeStyles(theme => ({\n\tfooter: {\n    fontStyle: \"italic\",\n\t},\n}));\n\nconst changeLanguage = () => {\n  const language = i18n.language === \"it\" ? \"en\" : \"it\"; // simple switch it<=> en - TODO: let user select language...\n  i18n.changeLanguage(language);\n  document.documentElement.setAttribute(\"lang\", language);\n}\n\nfunction Footer(props) {\n  const location = useLocation();\n\tconst classes = useStyles();\n  const { t } = useTranslation();\n  const on = t(\"on\"), off = t(\"off\");\n  const languageIcon = config.languages.supported[navigator.language.slice(0, 2).toLowerCase()].icon; // TODO: do something safer...\n\n  return isAuthLocation(location) ? null : ( // hide footer while in auth screens\n    <Container className={classes.footer}>\n      <Grid container justifyContent=\"center\">\n        <Typography component=\"h6\" variant=\"body2\" color={\"textSecondary\"}>\n          {packageJson.name} {\" \"}\n          {\"v\"}{packageJson.version} {\" ~ \"}\n          {\"©\"} {\" \"} {new Date().getFullYear()}, {\" \"}\n          <Link color=\"inherit\" href={config.companyHomeSiteUrl}>\n            {config.companyName}\n          </Link>\n          <span>&emsp;</span>\n          <span onClick={() => changeLanguage()}>{languageIcon}</span>\n          <span>&emsp;</span>\n          <IconCustom name={`Network.${props.isOnline ? \"on\" : \"off\"}`} fill=\"red\" size={12} alt={t(\"Network connection indicator\")} title={t(\"Network connection is {{how}}\", { how: props.isOnline ? on : off })} />\n        </Typography>\n      </Grid>\n    </Container>\n  );\n}\n\nexport default React.memo(Footer);\n","import React, { useEffect }  from \"react\";\nimport Link from \"@material-ui/core/Link\";\nimport CookieConsent from \"react-cookie-consent\";\nimport { useTranslation } from \"react-i18next\";\n\n\n\nfunction CookieBanner() {\n  const { t } = useTranslation();\n  const scrollOffsetMin = 100;\n\n  // an alternative to `CookieConsent.dismissOnScroll`, not yet available\n  useEffect(() => {\n    const onScroll = e => {\n      if (e.target.documentElement.scrollTop >= scrollOffsetMin) {\n        const now = new Date(); const date = new Date(now.setFullYear(now.getFullYear() + 1)).toUTCString(); // +1 year from now\n        document.cookie = `CookieConsent=true; expires=${date}; sameSite=Lax`;\n        window.removeEventListener(\"scroll\", onScroll);\n        //accept();\n      }\n    };\n    window.addEventListener(\"scroll\", onScroll);\n    return () => window.removeEventListener(\"scroll\", onScroll);\n  }, []);\n\n  return (\n    <CookieConsent\n      location=\"bottom\"\n      buttonText={t(\"I agree\")}\n      style={{ fontFamily: \"Open Sans\", color:\"#999999\", background: \"#2b373b\", display: \"block\" }}\n      buttonStyle={{ color: \"#4e503b\", fontSize: \"13px\", float: \"right\" }}\n      expires={365}\n      dismissOnScroll={true} // TODO: not handled yet\n    >\n      {t(\"We use cookies or similar technologies as specified in the\")} {\" \"}\n        <Link color=\"primary\" href={\"/privacy-policy\"}>\n          {t(\"privacy policy\")}\n        </Link>\n      {\".\"} {\" \"} {t(\"You can consent to the use of such technologies by closing this notice\")}\n      {\",\"} {\" \"} {t(\"or by otherwise continuing interacting with this site.\")}\n    </CookieConsent>\n  );\n}\n\nexport default React.memo(CookieBanner);\n","import firebase from \"firebase/app\";\nimport \"firebase/messaging\";\n\n// TODO: put in .env or config\nconst firebaseConfig = {\n  apiKey: \"AIzaSyAN-T9JMI8W5oF2Gip2Pcu-E_xtXBB2gE0\",\n  authDomain: \"sistemisolari-quiccasa.firebaseapp.com\",\n  projectId: \"sistemisolari-quiccasa\",\n  storageBucket: \"sistemisolari-quiccasa.appspot.com\",\n  messagingSenderId: \"748892040096\",\n  appId: \"1:748892040096:web:69200876ed8ffa8615d2c5\",\n  //measurementId: \"G-HQVK7VFN1W\",\n};\n// console.firebase.com - Project - Projetc Settings - Cloud Messaging - Certificati Web Push - Coppia di chiavi\nconst vapidKey = \"BJAzYrLnCaD13Cwv61jZGEiTA8yP7SVmPMY2_m0QO0VI8GFDhs_yKap6_3SrZlmf8eAYrdK7UJIsedyOXyY5ulY\";\nconst tokenKey = \"firebaseMessagingToken\";\nconst tokenMaxValidityTimeSpan = 7 * 60 * 60 * 24 * 1000; // one week (in milliseconds)\n\nif (!firebase.apps.length) { // if never inizialized, inizialize app\n  firebase.initializeApp(firebaseConfig);\n} else {\n  firebase.app(); // if already initialized, use that one\n}\n\nlet messaging;\ntry {\n  messaging = firebase.messaging();\n} catch (err) {\n  console.info(\"This browser does not support Firebase SDK\");\n  messaging = {}; // create a dummy messaging object\n  messaging.getToken = async() => {};\n  messaging.onMessage = async() => {};\n}\n\nexport const getToken = (setToken) => {\n  // check if we already have a valid token saved to local storage\n  const currentTokenString = localStorage.getItem(tokenKey);\n  if (currentTokenString) {\n    const currentToken = JSON.parse(currentTokenString);\n    if (currentToken.timestamp > new Date().getTime() + tokenMaxValidityTimeSpan) { // consider fresh for one week at most\n      // token in local storage is fresh\n      return currentToken;\n    }\n  }\n\n  // we do not already have a valid token saved to local storage, get it from firebase\n  return messaging.getToken({vapidKey}).then((token) => {\n    if (token) {\n      console.info(\"PushNotifications - Firebase - current token for client:\", token);\n      if (setToken) setToken(token);\n      // TODO: track the token -> client mapping, by sending to backend server, and\n      // show on the UI that permission is secured\n      localStorage.setItem(tokenKey, JSON.stringify({value: token, timestamp: new Date().getTime()}));\n    } else {\n      console.info(\"No registration token available, requesting permission to generate one...\");\n      if (setToken) setToken(null);\n      // shows on the UI that permission is required\n    }\n  }).catch(err => { // catch error while creating client token\n    if (err.code === \"messaging/permission-blocked\") {\n      console.error(\"Notification permission denied by user, token not retrieved\");\n    } else {\n      if (err.code === \"messaging/failed-service-worker-registration\") {\n        console.error(\"Service worker registration failed\");\n      } else {\n        console.error(\"Error while creating client token:\", JSON.stringify(err));\n      }\n    }\n    if (setToken) setToken(null);\n  });\n}\n\nexport const onMessageListener = () =>\n  new Promise((resolve) => {\n    messaging.onMessage((payload) => {\n      resolve(payload);\n    });\n});\n","import React, { /*useState, */useEffect, useContext } from \"react\";\nimport { getToken, onMessageListener } from \"../libs/Firebase\";\nimport { StatusContext } from \"../providers/StatusProvider\";\n\nfunction PushNotifications() {\n  const { status, setStatus } = useContext(StatusContext);\n\n  useEffect(() => { // TODO: save timestamp of last getToken(), and repeat it not more often than one week...\n    console.log(\"PushNotifications - calling getToken\");\n    getToken();\n    //getToken(setToken);\n  }, [status]);\n\n  onMessageListener().then(message => {\n    setStatus({pushNotifications: [message, ...status.pushNotifications]});\n  }).catch(err => {\n    console.error('error listening to push messages:', err);\n  });\n\n  return null;\n}\n\nexport default React.memo(PushNotifications);\n","import React, { /*useState, useEffect, */useContext } from \"react\";\nimport { useLocation } from \"react-router\";\nimport { useHistory } from \"react-router-dom\";\n//import { useTranslation } from \"react-i18next\";\nimport { Container, Button, lightColors, darkColors } from \"react-floating-action-button\";\nimport NotificationsActiveIcon from \"@material-ui/icons/NotificationsActive\";\n//import useSound from \"use-sound\";\nimport { StatusContext } from \"../providers/StatusProvider\";\n//import config from \"../config\";\n//import buttonClick from \"../assets/sounds/pop.mp3\";\n\n\n\n\nfunction FloatingActionButton(props) {\n  const { status } = useContext(StatusContext);\n  const location = useLocation();\n  const history = useHistory();\n  //const { t } = useTranslation();\n  //const [play] = useSound(/*config.sounds.*/buttonClick); \n\n  const showingNotifications = (location.pathname === \"/notifications\");\n  const show = (status.pushNotifications.length && !showingNotifications);\n\n  const link = props.link ? props.link : {\n    pathname: \"/notifications\",\n    //search: \"?query=abc\",\n    state: status.pushNotifications,\n  };\n\n  const action = () => {\n    history.push(link);\n    //play();\n  };\n\n  return show ? (\n    <Container>\n      <Button\n        //tooltip={t(\"You have some new notifications!\")}\n        rotate={true}\n        onClick={action}\n        styles={{backgroundColor: darkColors.lighterRed, color: lightColors.white}}\n      >\n        <NotificationsActiveIcon />\n        <span style={{position: \"relative\", bottom: \"-0.8em\", fontSize: \"90%\", fontWeight: \"bold\"}}>\n          {status.pushNotifications.length > 1 ? status.pushNotifications.length : null}\n        </span>\n      </Button>\n    </Container>\n  ) : null\n}\n\nexport default React.memo(FloatingActionButton);\n","//import { createMuiTheme } from \"@material-ui/core/styles\";\nimport { unstable_createMuiStrictModeTheme as createMuiTheme } from \"@material-ui/core/styles\"; // TEMPORARY: temporary, to solve material-ui drawer \"findDOMNode is deprecated in StrictModefindDOMNode is deprecated in StrictMode\" warning\nimport blueGrey from \"@material-ui/core/colors/blueGrey\";\nimport lightGreen from \"@material-ui/core/colors/lightGreen\";\nimport grey from \"@material-ui/core/colors/grey\";\nimport amber from \"@material-ui/core/colors/amber\";\n\nexport default createMuiTheme({\n  typography: {\n    fontFamily: `-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Open Sans', 'Roboto', 'Oxygen',\n      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif`,\n  },\n  overrides: {\n    MuiInputBase: {\n      input: {\n        \"&:-webkit-autofill\": {\n          transitionDelay: \"9999s\",\n          transitionProperty: \"background-color, color\",\n        },\n      },\n    },\n  },\n  palette: {\n    primary: {\n      light: blueGrey[100],\n      main: blueGrey[200],\n      dark: blueGrey[300],\n    },\n    secondary: {\n      light: lightGreen[100],\n      main: lightGreen[300],\n      dark: lightGreen[500],\n    },\n    header: {\n      color: grey[900],\n      backgroundColor: amber[50],\n    },\n    socialButtons: {\n      facebook: {\n        backgroundColor: \"#1877f2\",\n      },\n      google: {\n        backgroundColor: \"#db4437\",\n      },\n    },\n  },\n});\n","import React, { useContext } from \"react\";\nimport { makeStyles } from \"@material-ui/styles\";\nimport { BrowserRouter, useLocation } from \"react-router-dom\";\nimport { ThemeProvider } from \"@material-ui/core/styles\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport { AuthProvider } from \"../providers/AuthProvider\";\nimport { StatusProvider } from \"../providers/StatusProvider\";\nimport { OnlineStatusProvider, OnlineStatusContext } from \"../providers/OnlineStatusProvider\";\nimport Header from \"./Header\";\nimport Authentication from \"./Authentication\";\nimport Routes from \"./Routes\";\nimport Footer from \"./Footer\";\nimport Spinner from \"./Spinner\";\nimport CookieBanner from \"./CookieBanner\";\nimport PushNotifications from \"../components/PushNotifications\";\nimport FloatingActionButton from \"./FloatingActionButton\";\nimport { isAuthLocation } from \"../libs/Misc\";\nimport config from \"../config\";\nimport theme from \"../themes/default\"; // here we choose the theme\n\nfunction App() {\n// /* test calling local express endpoint */\n// var headers = new Headers();\n// headers.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\n// var urlencoded = new URLSearchParams();\n// urlencoded.append(\"email\", \"marcosolari@gmail.com\");\n// urlencoded.append(\"password\", \"secret\");\n// var requestOptions = {\n//   method: \"POST\",\n//   headers: headers,\n//   body: urlencoded,\n//   redirect: \"follow\"\n// };\n\n// fetch(\"//localhost:5000/api/auth/login\", requestOptions)\n//   .then(response => response.json())\n//   .then(function(res){ console.log(\"app success:\", res) })\n//   .catch(function(res){ console.log(\"error:\", res) })\n// ;\n\n  return (\n    <ThemeProvider theme={theme}>\n      <AuthProvider>\n        <OnlineStatusProvider>\n          <StatusProvider>\n            <CssBaseline />\n            <BrowserRouter>\n              <Authentication />\n              <Contents />\n              <Spinner />\n              <FloatingActionButton/>\n            </BrowserRouter>\n            <PushNotifications />\n          </StatusProvider>\n        </OnlineStatusProvider>\n      </AuthProvider>\n    </ThemeProvider>\n  );\n}\n\nconst useStyles = makeStyles(theme => ({\n  contentsContainer: {\n    position: \"relative\",\n    minHeight: \"100vh\",\n  },\n  contentsWrap: props => ({\n    paddingBottom: props.footerHeight,\n  }),\n  header: {\n  },\n  body: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"left\",\n    padding: theme.spacing(2),\n  },\n  footer: props => ({\n    position: \"absolute\",\n    bottom: \"0.5rem\",\n    width: \"100%\",\n    height: props.footerHeight,\n  }),\n}));\n\nconst Contents = () => {\n  const location = useLocation();\n  const isOnline = useContext(OnlineStatusContext);\n\tconst classes = useStyles({footerHeight: isAuthLocation(location) ? 0 : config.footerHeight }); // hide footer while in auth screens\n\n  return (\n    <div className={classes.contentsContainer}>\n      <div className={classes.contentsWrap}>\n        <div className={classes.header}>\n          <Header />\n        </div>\n        <div className={classes.body}>\n          <Routes />\n        </div>\n        <CookieBanner />\n      </div>\n      <div className={classes.footer}>\n        <Footer isOnline={isOnline} />\n      </div>\n    </div>\n  );\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\n// set up a broadcast channel to the clients to be able to translate service worker messages\nconst broadcastChannel = new BroadcastChannel(\"sw-i18n-messages\");\n\n// dummy `t` function to persuade i18-next to parse these text messages too\nconst t = (args) => {\n  return args;\n}\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config, t);\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          //broadcastChannel.postMessage({level: \"info\", message:\n          console.log(\n            t(\"This web app is being locally served cache-first by a service \" +\n            \"worker. To learn more, visit https://cra.link/PWA\")\n            );\n          //});\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              broadcastChannel.postMessage({level: \"info\", message:\n                t(\"New content is available and will be used when all \" +\n                \"tabs for this page are closed.\") // See https://cra.link/PWA.\n              });\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              broadcastChannel.postMessage({level: \"info\", message:\n                t(\"Content is cached for offline use.\")\n              });\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      broadcastChannel.postMessage({level: \"error\", message:\n        t(\"Error during service worker registration: {{error}}\", error)\n      });\n    })\n  ;\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      broadcastChannel.postMessage({level: \"info\", message:\n        t(\"No internet connection found. App is running in offline mode.\")\n      });\n    })\n  ;\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        // broadcastChannel.postMessage({level: \"error\", message:\n        //   t(error.message) // TODO: how to localize these errors?\n        // });\n        console.error(error.message); // do not bore users with unregister errors\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\nimport { ToastContainer, toast } from \"./components/Toast\";\nimport { i18n } from \"./i18n\";\n\nconsole.log(\"app started rendering\");\nconst root = document.getElementById(\"root\");\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n    <ToastContainer />\n  </React.StrictMode>,\n  root\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// function sendToAnalytics(metric) {\n//   const body = JSON.stringify({[metric.name]: metric.value});\n//   (navigator.sendBeacon && navigator.sendBeacon(\"/analytics\", body)) ||\n//     fetch(\"/analytics\", {body, method: \"POST\", keepalive: true});\n// }\n//reportWebVitals(sendToAnalytics);\nreportWebVitals(console.log);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.unregister();\n//serviceWorkerRegistration.register();\n\n// Set up a broadcast channel to localize messages from i18n service worker\nconst channel1 = new BroadcastChannel(\"sw-i18n-messages\");\nchannel1.addEventListener(\"message\", event => {\n  toast[event.data.level](i18n.t(event.data.message));\n});\n\n// Set up a broadcast channel to localize messages from background push messages service worker\nconst channel2 = new BroadcastChannel(\"sw-background-push-messages\");\nchannel2.addEventListener(\"message\", event => {\nconsole.log('received event.data:', event.data);\n  toast[event.data.level](i18n.t(event.data.message));\n});\n","export default function reportWebVitals(onPerfEntry) {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n","import React, { createContext } from \"react\";\nimport { usePersistedState } from \"../hooks/usePersistedState\";\n\nconst initialState = { user: null };\n\nconst AuthContext = createContext(initialState);\n\nconst AuthProvider = (props) => {\nconsole.log(\"calling usePersistedState with initialstate =\", initialState);\n  const [auth, setAuth] = usePersistedState('auth', initialState);\n\n  return (\n    <AuthContext.Provider value={{ auth, setAuth }}>\n      {props.children}\n    </AuthContext.Provider>\n  )\n};\n\nexport { AuthProvider, AuthContext };\n","import React, { useEffect } from \"react\";\n\nexport const usePersistedState = (key, defaultValue) => {\nconsole.log('usePersistedState - key, defaultValue:', key, defaultValue);\n  const [state, setState] = React.useState(\n    () => JSON.parse(localStorage.getItem(key)) || defaultValue\n  );\n  useEffect(() => {\nconsole.log('usePersistedState useEffect - key, state:', key, state);\n    localStorage.setItem(key, JSON.stringify(state));\n  }, [key, state]);\n  return [state, setState];\n};\n","import React, { useEffect } from \"react\";\nimport { ToastContainer as ToastifyContainer, toast } from \"react-toastify\";\nimport { injectStyle } from \"react-toastify/dist/inject-style\";\n\n\n\nconst ToastContainer = React.memo((props) => {\n  useEffect(() => {\n    injectStyle();\n  }, []);\n\n  return (\n    <ToastifyContainer\n      position=\"top-right\"\n      //autoClose={5000}\n      hideProgressBar={true}\n      newestOnTop={false}\n      closeOnClick\n      rtl={false}\n      pauseOnFocusLoss={false}\n      draggable\n      pauseOnHover\n      className=\"toastContainer\"\n      bodyClassName=\"toastBody\"\n      {...props}\n    />\n  );\n});\n\nexport { ToastContainer, toast };\n","import React, { useState, createContext } from \"react\";\n\nconst initialState = {\n  pushNotifications: [],\n};\n\nconst StatusContext = createContext(initialState);\n\nconst StatusProvider = (props) => {\n  const [status, setStatus] = useState(initialState);\n\n  return (\n    <StatusContext.Provider value={{ status, setStatus }}>\n      {props.children}\n    </StatusContext.Provider>\n  )\n};\n\nexport { StatusProvider, StatusContext };\n","import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport LanguageDetector from \"i18next-browser-languagedetector\";\nimport config from \"./config\";\n\nimport en from \"./locales/en/translation.json\";\nimport it from \"./locales/it/translation.json\";\nimport fr from \"./locales/fr/translation.json\";\n\n/**\n * All supported languages resources are listed here.\n * When adding a new language, add it here.\n */\nconst resources = {\n  en: { translation: en },\n  it: { translation: it },\n  fr: { translation: fr },\n};\n\ni18n\n  .use(LanguageDetector) // detect language\n  .use(initReactI18next) // passes i18n down to react-i18next\n  .init({\n    resources,\n    fallbackLng: [ config.languages.fallback ],\n    keySeparator: false, // we do not use keys in form messages.welcome\n    nsSeparator: false, // do not use namespaces\n    interpolation: {\n      escapeValue: false // react already safes from xss\n    },\n    detection: {\n      order: [ \"navigator\" ], // only detect from browser\n      checkWhitelist: true, // only detect languages that are in the whitelist\n    },\n  })\n;\n\nexport { i18n, resources };"],"sourceRoot":""}