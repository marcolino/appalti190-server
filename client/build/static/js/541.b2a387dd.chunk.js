"use strict";(self.webpackChunkquiccasa_client=self.webpackChunkquiccasa_client||[]).push([[541],{6473:function(e,n,r){r.d(n,{OL:function(){return v},z8:function(){return x},NR:function(){return y},yt:function(){return g},Kv:function(){return C},R9:function(){return b}});var t=r(6515),o=r(390),a=r(2420),s=r(7762),c=r(1426),i=r(3383),l=r(3999),d=r(1395),u=r(1846),f=r(3447),m=function(e,n){return"#"+e.replace(/^#/,"").replace(/../g,(function(e){return("0"+Math.min(255,Math.max(0,parseInt(e,16)+n)).toString(16)).substr(-2)}))},h=r(3137),p=r(2559),g=o.memo((function(e){var n=(0,u.Z)((function(e){return{startAdornment:{backgroundColor:"#eaedf0",height:"2.5rem",maxHeight:"3rem",marginLeft:-15,marginRight:5,paddingLeft:10,paddingRight:10,borderRight:"1px solid #c5c5c5"},endAdornment:{backgroundColor:"#eaedf0",height:"2.5rem",maxHeight:"3rem",marginLeft:5,marginRight:-15,paddingLeft:10,paddingRight:10,borderLeft:"1px solid #c5c5c5"}}}))();return(0,p.jsx)(s.Z,{id:e.id,type:e.type,value:e.value,required:e.required,autoFocus:e.autoFocus,autoComplete:e.autoComplete.toString(),variant:e.variant,fullWidth:e.fullWidth,label:e.label,size:e.size,margin:e.margin,className:e.className?e.className:n.textField,placeholder:e.placeholder,onChange:function(n){return e.onChange(n.target.value)},disabled:e.disabled,error:!(0,h.Qr)(e.error),InputProps:{startAdornment:e.startAdornmentIcon?(0,p.jsx)(f.Z,{className:e.startAdornmentClass?e.startAdornmentClass:n.startAdornment,position:"start",children:e.startAdornmentIcon}):(0,p.jsx)(p.Fragment,{}),endAdornment:e.endAdornmentIcon?(0,p.jsx)(f.Z,{className:e.endAdornmentClass?e.endAdornmentClass:n.endAdornment,position:"end",children:e.endAdornmentIcon}):(0,p.jsx)(p.Fragment,{}),className:n.input}})}));g.defaultProps={type:"text",required:!1,autoFocus:!1,autoComplete:!1,variant:"outlined",fullWidth:!0,label:"",size:"small",margin:"dense",className:null,placeholder:"",startAdornmentClass:null,endAdornmentClass:null,disabled:!1,error:""};var v=o.memo((function(e){var n=(0,u.Z)((function(e){return function(e){return{button:{margin:e.spacing(1,0,0,0),textTransform:"none",fontSize:"1.3em",color:"white",backgroundColor:e.palette.success.main,"&:hover":{backgroundColor:m(e.palette.success.main,-25)}},buttonSecondary:{margin:e.spacing(1,0,0,0),textTransform:"none",fontSize:"1em !important",color:"white",backgroundColor:e.palette.secondary.dark+" !important","&:hover":{backgroundColor:m(e.palette.secondary.dark,-25)+" !important"}},buttonFederated:{margin:e.spacing(1,0,0,0),justifyContent:"flex-start",paddingLeft:e.spacing(5),fontSize:"1.3em"},buttonFederatedFacebook:{backgroundColor:e.palette.socialButtons.facebook.backgroundColor,"&:hover":{backgroundColor:m(e.palette.socialButtons.facebook.backgroundColor,-25)}},buttonFederatedGoogle:{backgroundColor:e.palette.socialButtons.google.backgroundColor,"&:hover":{backgroundColor:m(e.palette.socialButtons.google.backgroundColor,-25)}}}}(e)}))();return(0,p.jsx)(a.Z,{fullWidth:e.fullWidth,variant:e.variant,color:e.color,size:e.size,className:"".concat(n.button," ").concat(e.social?n.buttonFederated:""," ").concat(e.social?n["buttonFederated"+(0,h.kC)(e.social)]:""," ").concat(n[e.className]),startIcon:e.startIcon,onClick:e.onClick,disabled:e.disabled,children:e.children})}));v.defaultProps={fullWidth:!0,variant:"contained",color:"primary",social:null};var x=o.memo((function(e){var n=(0,u.Z)((function(e){return{disabled:{color:"grey",cursor:"default","&:hover":{textDecoration:"none"}}}}))(),r=e.disabled?n.disabled:"";return(0,p.jsx)(c.Z,{control:(0,p.jsx)(i.Z,{checked:e.checked,onChange:function(n){return e.onChange(n.target.checked)},className:"".concat(e.className," ").concat(r),color:e.color,size:e.size,disabled:e.disabled}),label:(0,p.jsx)(b,{className:"".concat(e.className," ").concat(r),children:e.children})})}));x.defaultProps={checked:!1,color:"primary",size:"small"};var b=o.memo((function(e){return(0,p.jsx)(d.Z,(0,t.Z)((0,t.Z)({component:e.component,variant:e.variant,color:e.color,align:e.align},e),{},{children:e.children}))}));b.defaultProps={component:"h1",variant:"body2",color:"textPrimary"};var C=o.memo((function(e){var n=(0,u.Z)((function(e){return{normal:{cursor:"pointer"},disabled:{color:"grey",cursor:"default","&:hover":{textDecoration:"none",color:"grey"}}}}))(),r=e.disabled?n.disabled:n.normal;return(0,p.jsx)(l.Z,(0,t.Z)((0,t.Z)({href:e.href,className:"".concat(e.className," ").concat(r),color:e.color},e),{},{children:e.children}))}));C.defaultProps={color:"textPrimary"};var y=o.memo((function(e){var n=(0,u.Z)((function(n){return function(n){return{container:{display:"flex",alignItems:"center",marginTop:n.spacing(e.marginVertical),marginBottom:n.spacing(e.marginVertical)},divider:{width:"100%",borderBottom:"1px solid "+(e.color?e.color:n.palette.primary.dark),paddingLeft:n.spacing(1)},text:{paddingLeft:n.spacing(e.paddingHorizontal),paddingRight:n.spacing(e.paddingHorizontal)}}}(n)}))();return(0,p.jsxs)("div",{className:n.container,children:[(0,p.jsx)("div",{className:n.divider}),e.children&&(0,p.jsx)("span",{className:n.text,children:e.children}),(0,p.jsx)("div",{className:n.divider})]})}));y.defaultProps={marginVertical:1,paddingHorizontal:1}},8541:function(e,n,r){r.r(n);var t=r(3430),o=r(390),a=r(971),s=r(6444),c=r(3721),i=r(1846),l=r(1732),d=r(119),u=r(7530),f=r(8282),m=r(1395),h=r(1411),p=r(2398),g=r(9797),v=r(6826),x=r(6083),b=r(5416),C=r(1855),y=r(1970),Z=r(6715),j=r(4100),w=r(6473),k=r(5782),N=r(2600),P=r.n(N),S=r(1661),A=r(2559),z=(0,i.Z)((function(e){return function(e){return{avatar:{backgroundColor:e.palette.success.main},fieldset:{border:0}}}(e)}));function F(){var e=z(),n=(0,o.useState)(""),r=(0,t.Z)(n,2),i=r[0],N=r[1],F=(0,o.useState)(""),R=(0,t.Z)(F,2),I=R[0],E=R[1],O=(0,o.useState)(""),L=(0,t.Z)(O,2),D=L[0],T=L[1],H=(0,o.useState)({email:null,password:null,passwordConfirmed:null,code:null}),U=(0,t.Z)(H,2),V=U[0],J=U[1],W=(0,o.useState)(!1),G=(0,t.Z)(W,2),M=G[0],q=G[1],B=(0,o.useState)(""),_=(0,t.Z)(B,2),K=_[0],Q=_[1],Y=(0,o.useState)(""),$=(0,t.Z)(Y,2),X=$[0],ee=$[1],ne=(0,a.k6)(),re=(0,s.WH)({delay:P().spinner.delay}).promiseInProgress,te=(0,o.useState)(!1),oe=(0,t.Z)(te,2),ae=oe[0],se=oe[1],ce=(0,o.useState)(null),ie=(0,t.Z)(ce,2),le=ie[0],de=ie[1],ue=(0,o.useState)(null),fe=(0,t.Z)(ue,2),me=fe[0],he=fe[1],pe=(0,c.$)().t,ge=function(e,n){de(e),he(n),se(!0)},ve=function(){se(!1),de(null),he(null)};return(0,A.jsxs)(u.Z,{maxWidth:"xs",children:[(0,A.jsx)("form",{className:e.form,noValidate:!0,autoComplete:"off",children:(0,A.jsxs)("fieldset",{disabled:re,className:e.fieldset,children:[!M&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(f.Z,{m:1}),(0,A.jsx)(d.Z,{container:!0,justifyContent:"center",children:(0,A.jsx)(l.Z,{className:e.avatar,children:(0,A.jsx)(x.Z,{})})}),(0,A.jsx)(f.Z,{m:3}),(0,A.jsx)(d.Z,{container:!0,justifyContent:"flex-start",children:(0,A.jsx)(w.R9,{children:pe("Reset password")})}),(0,A.jsx)(f.Z,{m:1}),(0,A.jsx)(w.yt,{autoFocus:!0,id:"email",value:i,onChange:N,placeholder:pe("Email"),startAdornmentIcon:(0,A.jsx)(y.Z,{}),error:V.email}),(0,A.jsx)(f.Z,{m:1}),(0,A.jsx)(w.OL,{onClick:function(e){e.preventDefault(),function(){if(!M&&!(0,k.ks)(i)){var e=pe("Please supply a valid email");return j.A.warning(e),J({email:e}),!1}if(M){if(!(0,k.oH)(I)){var n=pe("Please supply a more complex password");return j.A.warning(n),J({password:n}),!1}if(!D){var r=pe("Please confirm the password");return J({passwordConfirmed:r}),j.A.warning(r),!1}if(I!==D){var t=pe("The confirmed password does not match the password");return j.A.warning(t),J({passwordConfirmed:t}),!1}}return!0}()&&(J({}),(0,Z.gF)(i,{success:function(e){console.log("forgotPassword success:",e),q(!0),E(""),e.codeDeliveryMedium;var n=e.CodeDeliveryDetails.AttributeName,r=e.CodeDeliveryDetails.Destination;Q(n),ge(pe("Verification code sent"),pe("Verification code sent via {{medium}} to {{email}}.\nPlease copy and paste it here.",{medium:n,email:r}))},error:function(e){console.error("forgotPassword error:",e),(0,S.ci)("forgotPassword",e),j.A.error(pe(e.message)),J({email:e.message})}}))},children:pe("Request password reset")})]}),M&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(w.yt,{id:"password",type:"password",value:I,onChange:E,placeholder:pe("New password"),startAdornmentIcon:(0,A.jsx)(C.Z,{}),error:V.password}),(0,A.jsx)(w.yt,{id:"passwordConfirmed",type:"password",value:D,onChange:T,placeholder:pe("New password confirmation"),startAdornmentIcon:(0,A.jsx)(C.Z,{}),error:V.passwordConfirmed}),(0,A.jsx)(w.yt,{id:"confirmationCode",type:"number",value:X,onChange:ee,placeholder:pe("Numeric code just received by {{codeDeliveryMedium}}",{codeDeliveryMedium:K}),startAdornmentIcon:(0,A.jsx)(b.Z,{}),error:V.confirmationCode}),(0,A.jsx)(f.Z,{m:1}),(0,A.jsx)(w.OL,{onClick:function(e){e.preventDefault(),J({}),(0,Z.vG)(i,X,I,{success:function(e){console.log("confirmForgotPassword success data:",e),q(!1),N(""),E(""),T(""),ee(""),ge("Password reset success","You can now sign in with your new password"),ne.push("/signin")},error:function(e){console.error("confirmForgotPassword error:",e),(0,S.ci)("confirmForgotPassword",e),j.A.error(pe(e.message)),J({password:e.message})}})},children:pe("Confirm Password Reset")}),(0,A.jsx)(d.Z,{container:!0,justifyContent:"flex-end",children:(0,A.jsx)(w.OL,{onClick:function(e){e.preventDefault(),J({}),(0,Z.kk)("x"+i,{success:function(e){console.log("resendResetPasswordCode success data:",e),j.A.info("Code resent successfully")},error:function(e){if(console.error("resendResetPasswordCode error:",e),(0,S.ci)("resendResetPasswordCode",e),"ExpiredCodeException"===e.code)J({confirmationCode:e});else J({});j.A.error(pe(e.message))}})},fullWidth:!1,className:"buttonSecondary",children:pe("Resend code")})})]})]})}),(0,A.jsxs)(h.Z,{open:ae,onClose:ve,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,A.jsx)(v.Z,{id:"alert-dialog-title",children:le}),(0,A.jsx)(g.Z,{id:"alert-dialog-description",children:(0,A.jsx)(m.Z,{variant:"body1",style:{whiteSpace:"pre-line"},children:me})}),(0,A.jsx)(p.Z,{children:(0,A.jsx)(w.OL,{onClick:ve,fullWidth:!1,className:"buttonSecondary",autoFocus:!0,children:pe("Ok")})})]})]})}n.default=o.memo(F)},6715:function(e,n,r){r.d(n,{_f:function(){return u},gF:function(){return f},vG:function(){return h},kk:function(){return p},Rv:function(){return m},w7:function(){return g},y1:function(){return d}});var t=r(6515),o=r(6444),a=r(2600),s=r.n(a),c=(r(3137),{signUp:function(e){return i("/api/auth/register","POST",e)},confirmSignUp:function(e){return i("/api/auth/verify/".concat(e.code),"GET",e)},signIn:function(e){return i("/api/auth/login","POST",e)},UNUSEDcurrentAuthenticatedUser:function(e){return new Promise((function(e,n){var r=JSON.parse(localStorage.getItem("auth"));console.log("currentAuthenticatedUser auth:",r),e(!!r&&r.user)}))},signOut:function(e){return new Promise((function(e,n){e()}))}}),i=function(e,n,r){return console.log("fetcher:",e,n,r),new Promise((function(o,a){"GET"===n&&r&&(e+="?"+Object.keys(r).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])})).join("&")),console.log("fetcher url 2:",e);var c=(0,t.Z)((0,t.Z)({method:n,headers:new Headers(s().api.headers)},r&&"GET"!==n&&{body:JSON.stringify(r)}),{},{redirect:s().api.redirect});console.log("fetcher opt:",c),fetch(e,(0,t.Z)((0,t.Z)({method:n,headers:new Headers(s().api.headers)},r&&"GET"!==n&&{body:JSON.stringify(r)}),{},{redirect:s().api.redirect})).then((function(n){console.log("fetcher res:",n);try{n.json().then((function(r){console.log("fetcher from ".concat(e," data:"),r),n.ok||a({status:n.status,statusText:n.statusText,message:r.message?r.message:n.statusText}),o(r)}))}catch(r){console.error("fetch ".concat(e," error:"),r),a(r)}})).catch((function(n){console.error("fetch ".concat(e," error:"),n),a(n)}))}))},l=c;function d(e,n){var r=n.success,a=n.error,s=n.final;(0,o.JE)(l.signUp((0,t.Z)({},e)).then((function(e){return r(e)})).catch((function(e){return a(e)})).finally((function(e){return s(e)})))}function u(e,n){var r=n.success,a=n.error,s=n.final;console.log("TrackPromise - props:",e),(0,o.JE)(l.confirmSignUp((0,t.Z)({},e)).then((function(e){return r(e)})).catch((function(e){return a(e)})).finally((function(e){return s(e)})))}function f(e,n){var r=n.success,t=n.error,a=n.final;(0,o.JE)(l.forgotPassword(e).then((function(e){return r(e)})).catch((function(e){return t(e)})).finally((function(e){return a(e)})))}function m(e,n){var r=n.success,t=n.error,a=n.final;(0,o.JE)(l.resendSignUp(e).then((function(e){return r(e)})).catch((function(e){return t(e)})).finally((function(e){return a(e)})))}function h(e,n,r,t){var a=t.success,s=t.error,c=t.final;(0,o.JE)(l.forgotPasswordSubmit(e,n,r).then((function(e){return a(e)})).catch((function(e){return s(e)})).finally((function(e){return c(e)})))}function p(e,n){var r=n.success,t=n.error,a=n.final;(0,o.JE)(l.resendSignUp(e).then((function(e){return r(e)})).catch((function(e){return t(e)})).finally((function(e){return a(e)})))}function g(e){var n=e.success,r=e.error,t=e.final;(0,o.JE)(l.signOut().then((function(e){return n(e)})).catch((function(e){return r(e)})).finally((function(e){return t(e)})))}},1970:function(e,n,r){var t=r(5318),o=r(862);n.Z=void 0;var a=o(r(390)),s=(0,t(r(7581)).default)(a.createElement("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}),"LockOpen");n.Z=s},6083:function(e,n,r){var t=r(5318),o=r(862);n.Z=void 0;var a=o(r(390)),s=(0,t(r(7581)).default)(a.createElement("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h2c0-1.66 1.34-3 3-3s3 1.34 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"}),"LockOpenOutlined");n.Z=s}}]);
//# sourceMappingURL=541.b2a387dd.chunk.js.map